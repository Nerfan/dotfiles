(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/gi,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return new Function("return "+b)();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){
var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a);

})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof(r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);var Broadcaster={_onlyOnce:function(fn){var onceFn=function(){if(onceFn._broadcasterCalled){return}onceFn._broadcasterCalled=true;fn.apply(window,arguments)};onceFn._broadcasterCalled=false;return onceFn},onMessage:{_listeners:[],_call:function(msg,cb){var result=false;cb=cb||function(){};var sender={url:document.location.href,id:chrome.runtime.id};var args=[msg,sender];if(cb){args.push(cb)}for(var i=0;i!=this._listeners.length;i++){var callres=this._listeners[i].apply(window,args);if(callres===true||cb._broadcasterCalled){result=true}}return result},addListener:function(listener){if(this._listeners.indexOf(listener)!==-1){return}chrome.runtime.onMessage.addListener(listener)},removeListener:function(listener){var index=this._listeners.indexOf(listener);if(index!==-1){return}this._listeners.splice(index,0);chrome.runtime.onMessage.removeListener(listener)}},sendMessage:function(msg,cb){if(cb){cb=this._onlyOnce(cb)}var currentPageCallRes=this.onMessage._call(msg,cb);if(currentPageCallRes&&cb){return}var args=[msg];if(cb){args.push(cb)}chrome.runtime.sendMessage.apply(chrome.runtime,args)}};var fvdSpeedDial={};(function(){var MAX_LOG_RECORDS=300;var MAX_LOG_SIZE=1024*1024;var STORAGE_KEY="_app_log";window.addEventListener("load",function(){fvdSpeedDial.AppLog.startWriteCheckInterval()},false);fvdSpeedDial.AppLog={_logUpdated:false,_log:[],_writeCheckInterval:null,_read:function(){this._log=[];if(localStorage[STORAGE_KEY]){try{this._log=JSON.parse(localStorage[STORAGE_KEY])}catch(ex){}}},getText:function(){return this._log.join("\n")},startWriteCheckInterval:function(){var self=this;this._writeCheckInterval=setInterval(function(){if(self._logUpdated){self._logUpdated=false;self.write()}},1e3)},write:function(){if(this._log.length>MAX_LOG_RECORDS){this._log.splice(0,this._log.length-MAX_LOG_RECORDS)}var logJSON=JSON.stringify(this._log);while(logJSON.length>MAX_LOG_SIZE){this._log.shift();logJSON=JSON.stringify(this._log)}localStorage[STORAGE_KEY]=logJSON},info:function(){var args=Array.prototype.slice.call(arguments);args.unshift("info");this.log.apply(this,args)},err:function(){var args=Array.prototype.slice.call(arguments);args.unshift("err");this.log.apply(this,args)},warn:function(){var args=Array.prototype.slice.call(arguments);

args.unshift("warn");this.log.apply(this,args)},log:function(){var args=Array.prototype.slice.call(arguments);var level=args.shift();var logLine=[];logLine.push((new Date).toUTCString());logLine.push("_"+level+"_");for(var i=0;i!=args.length;i++){var elem=args[i];if(typeof elem==="object"){elem=JSON.stringify(elem)}logLine.push(elem)}logLine=logLine.join(" ");this._logUpdated=true;this._log.push(logLine)}};fvdSpeedDial.AppLog._read()})();var Aes={};Aes.cipher=function(input,w){var Nb=4;var Nr=w.length/Nb-1;var state=[[],[],[],[]];for(var i=0;i<4*Nb;i++)state[i%4][Math.floor(i/4)]=input[i];state=Aes.addRoundKey(state,w,0,Nb);for(var round=1;round<Nr;round++){state=Aes.subBytes(state,Nb);state=Aes.shiftRows(state,Nb);state=Aes.mixColumns(state,Nb);state=Aes.addRoundKey(state,w,round,Nb)}state=Aes.subBytes(state,Nb);state=Aes.shiftRows(state,Nb);state=Aes.addRoundKey(state,w,Nr,Nb);var output=new Array(4*Nb);for(var i=0;i<4*Nb;i++)output[i]=state[i%4][Math.floor(i/4)];return output};Aes.keyExpansion=function(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var temp=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r}for(var i=Nk;i<Nb*(Nr+1);i++){w[i]=new Array(4);for(var t=0;t<4;t++)temp[t]=w[i-1][t];if(i%Nk==0){temp=Aes.subWord(Aes.rotWord(temp));for(var t=0;t<4;t++)temp[t]^=Aes.rCon[i/Nk][t]}else if(Nk>6&&i%Nk==4){temp=Aes.subWord(temp)}for(var t=0;t<4;t++)w[i][t]=w[i-Nk][t]^temp[t]}return w};Aes.subBytes=function(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++)s[r][c]=Aes.sBox[s[r][c]]}return s};Aes.shiftRows=function(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++)t[c]=s[r][(c+r)%Nb];for(var c=0;c<4;c++)s[r][c]=t[c]}return s};Aes.mixColumns=function(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3]}return s};Aes.addRoundKey=function(state,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++)state[r][c]^=w[rnd*4+c][r]}return state};Aes.subWord=function(w){for(var i=0;i<4;i++)w[i]=Aes.sBox[w[i]];return w};Aes.rotWord=function(w){var tmp=w[0];for(var i=0;i<3;i++)w[i]=w[i+1];w[3]=tmp;return w};Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];Aes.Ctr={};Aes.Ctr.encrypt=function(plaintext,password,nBits){var blockSize=16;if(!(nBits==128||nBits==192||nBits==256))return"";plaintext=Utf8.encode(plaintext);password=Utf8.encode(password);var nBytes=nBits/8;var pwBytes=new Array(nBytes);for(var i=0;i<nBytes;i++){pwBytes[i]=isNaN(password.charCodeAt(i))?0:password.charCodeAt(i)}var key=Aes.cipher(pwBytes,Aes.keyExpansion(pwBytes));key=key.concat(key.slice(0,nBytes-16));var counterBlock=new Array(blockSize);var nonce=(new Date).getTime();var nonceMs=nonce%1e3;var nonceSec=Math.floor(nonce/1e3);var nonceRnd=Math.floor(Math.random()*65535);for(var i=0;i<2;i++)counterBlock[i]=nonceMs>>>i*8&255;for(var i=0;i<2;i++)counterBlock[i+2]=nonceRnd>>>i*8&255;for(var i=0;i<4;i++)counterBlock[i+4]=nonceSec>>>i*8&255;var ctrTxt="";for(var i=0;i<8;i++)ctrTxt+=String.fromCharCode(counterBlock[i]);var keySchedule=Aes.keyExpansion(key);var blockCount=Math.ceil(plaintext.length/blockSize);var ciphertxt=new Array(blockCount);for(var b=0;b<blockCount;b++){for(var c=0;c<4;c++)counterBlock[15-c]=b>>>c*8&255;for(var c=0;c<4;c++)counterBlock[15-c-4]=b/4294967296>>>c*8;var cipherCntr=Aes.cipher(counterBlock,keySchedule);var blockLength=b<blockCount-1?blockSize:(plaintext.length-1)%blockSize+1;var cipherChar=new Array(blockLength);for(var i=0;i<blockLength;i++){cipherChar[i]=cipherCntr[i]^plaintext.charCodeAt(b*blockSize+i);cipherChar[i]=String.fromCharCode(cipherChar[i])}ciphertxt[b]=cipherChar.join("")}var ciphertext=ctrTxt+ciphertxt.join("");ciphertext=Base64.encode(ciphertext);return ciphertext};Aes.Ctr.decrypt=function(ciphertext,password,nBits){var blockSize=16;if(!(nBits==128||nBits==192||nBits==256))return"";ciphertext=Base64.decode(ciphertext);password=Utf8.encode(password);var nBytes=nBits/8;var pwBytes=new Array(nBytes);for(var i=0;i<nBytes;i++){pwBytes[i]=isNaN(password.charCodeAt(i))?0:password.charCodeAt(i)}var key=Aes.cipher(pwBytes,Aes.keyExpansion(pwBytes));key=key.concat(key.slice(0,nBytes-16));var counterBlock=new Array(8);ctrTxt=ciphertext.slice(0,8);for(var i=0;i<8;i++)counterBlock[i]=ctrTxt.charCodeAt(i);var keySchedule=Aes.keyExpansion(key);var nBlocks=Math.ceil((ciphertext.length-8)/blockSize);var ct=new Array(nBlocks);for(var b=0;b<nBlocks;b++)ct[b]=ciphertext.slice(8+b*blockSize,8+b*blockSize+blockSize);ciphertext=ct;var plaintxt=new Array(ciphertext.length);for(var b=0;b<nBlocks;b++){for(var c=0;c<4;c++)counterBlock[15-c]=b>>>c*8&255;for(var c=0;c<4;c++)counterBlock[15-c-4]=(b+1)/4294967296-1>>>c*8&255;var cipherCntr=Aes.cipher(counterBlock,keySchedule);var plaintxtByte=new Array(ciphertext[b].length);for(var i=0;i<ciphertext[b].length;i++){plaintxtByte[i]=cipherCntr[i]^ciphertext[b].charCodeAt(i);plaintxtByte[i]=String.fromCharCode(plaintxtByte[i])}plaintxt[b]=plaintxtByte.join("")}var plaintext=plaintxt.join("");plaintext=Utf8.decode(plaintext);return plaintext};var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Base64.encode=function(str,utf8encode){utf8encode=typeof utf8encode=="undefined"?false:utf8encode;var o1,o2,o3,bits,h1,h2,h3,h4,e=[],pad="",c,plain,coded;var b64=Base64.code;plain=utf8encode?str.encodeUTF8():str;c=plain.length%3;if(c>0){while(c++<3){pad+="=";plain+="\x00"}}for(c=0;c<plain.length;c+=3){o1=plain.charCodeAt(c);o2=plain.charCodeAt(c+1);o3=plain.charCodeAt(c+2);bits=o1<<16|o2<<8|o3;h1=bits>>18&63;h2=bits>>12&63;h3=bits>>6&63;h4=bits&63;e[c/3]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)}coded=e.join("");coded=coded.slice(0,coded.length-pad.length)+pad;return coded};Base64.decode=function(str,utf8decode){utf8decode=typeof utf8decode=="undefined"?false:utf8decode;var o1,o2,o3,h1,h2,h3,h4,bits,d=[],plain,coded;var b64=Base64.code;coded=utf8decode?str.decodeUTF8():str;for(var c=0;c<coded.length;c+=4){h1=b64.indexOf(coded.charAt(c));h2=b64.indexOf(coded.charAt(c+1));h3=b64.indexOf(coded.charAt(c+2));h4=b64.indexOf(coded.charAt(c+3));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>>16&255;o2=bits>>>8&255;o3=bits&255;d[c/4]=String.fromCharCode(o1,o2,o3);if(h4==64)d[c/4]=String.fromCharCode(o1,o2);if(h3==64)d[c/4]=String.fromCharCode(o1)}plain=d.join("");return utf8decode?plain.decodeUTF8():plain};var Utf8={};Utf8.encode=function(strUni){var strUtf=strUni.replace(/[\u0080-\u07ff]/g,function(c){var cc=c.charCodeAt(0);return String.fromCharCode(192|cc>>6,128|cc&63)});strUtf=strUtf.replace(/[\u0800-\uffff]/g,function(c){var cc=c.charCodeAt(0);return String.fromCharCode(224|cc>>12,128|cc>>6&63,128|cc&63)});return strUtf};Utf8.decode=function(strUtf){var strUni=strUtf.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(c){var cc=(c.charCodeAt(0)&15)<<12|(c.charCodeAt(1)&63)<<6|c.charCodeAt(2)&63;return String.fromCharCode(cc)});strUni=strUni.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(c){var cc=(c.charCodeAt(0)&31)<<6|c.charCodeAt(1)&63;return String.fromCharCode(cc)});return strUni};(function(window,document,undefined){"use strict";var NAME="Parallax";var MAGIC_NUMBER=30;var DEFAULTS={relativeInput:false,clipRelativeInput:false,calibrationThreshold:100,calibrationDelay:500,supportDelay:500,calibrateX:false,calibrateY:true,invertX:true,invertY:true,limitX:false,limitY:false,scalarX:10,scalarY:10,frictionX:.1,frictionY:.1,originX:.5,originY:.5};function Parallax(element,options){this.element=element;this.layers=element.getElementsByClassName("layer");var data={calibrateX:this.data(this.element,"calibrate-x"),calibrateY:this.data(this.element,"calibrate-y"),invertX:this.data(this.element,"invert-x"),invertY:this.data(this.element,"invert-y"),limitX:this.data(this.element,"limit-x"),limitY:this.data(this.element,"limit-y"),scalarX:this.data(this.element,"scalar-x"),scalarY:this.data(this.element,"scalar-y"),frictionX:this.data(this.element,"friction-x"),frictionY:this.data(this.element,"friction-y"),originX:this.data(this.element,"origin-x"),originY:this.data(this.element,"origin-y")};for(var key in data){if(data[key]===null)delete data[key]}this.extend(this,DEFAULTS,options,data);this.calibrationTimer=null;this.calibrationFlag=true;this.enabled=false;this.depths=[];this.raf=null;this.bounds=null;this.ex=0;this.ey=0;this.ew=0;this.eh=0;this.ecx=0;this.ecy=0;this.erx=0;this.ery=0;this.cx=0;this.cy=0;this.ix=0;this.iy=0;this.mx=0;this.my=0;this.vx=0;this.vy=0;this.onMouseMove=this.onMouseMove.bind(this);this.onDeviceOrientation=this.onDeviceOrientation.bind(this);this.onOrientationTimer=this.onOrientationTimer.bind(this);this.onCalibrationTimer=this.onCalibrationTimer.bind(this);this.onAnimationFrame=this.onAnimationFrame.bind(this);this.onWindowResize=this.onWindowResize.bind(this);this.initialise()}Parallax.prototype.extend=function(){if(arguments.length>1){var master=arguments[0];for(var i=1,l=arguments.length;i<l;i++){var object=arguments[i];for(var key in object){master[key]=object[key]}}}};Parallax.prototype.data=function(element,name){return this.deserialize(element.getAttribute("data-"+name))};Parallax.prototype.deserialize=function(value){if(value==="true"){return true}else if(value==="false"){return false}else if(value==="null"){return null}else if(!isNaN(parseFloat(value))&&isFinite(value)){return parseFloat(value)}else{return value}};Parallax.prototype.camelCase=function(value){return value.replace(/-+(.)?/g,function(match,character){return character?character.toUpperCase():""})};Parallax.prototype.transformSupport=function(value){var element=document.createElement("div");var propertySupport=false;var propertyValue=null;var featureSupport=false;var cssProperty=null;var jsProperty=null;for(var i=0,l=this.vendors.length;i<l;i++){if(this.vendors[i]!==null){cssProperty=this.vendors[i][0]+"transform";jsProperty=this.vendors[i][1]+"Transform"}else{cssProperty="transform";jsProperty="transform"}if(element.style[jsProperty]!==undefined){propertySupport=true;break}}switch(value){case"2D":featureSupport=propertySupport;break;case"3D":if(propertySupport){var body=document.body||document.createElement("body");var documentElement=document.documentElement;var documentOverflow=documentElement.style.overflow;if(!document.body){documentElement.style.overflow="hidden";documentElement.appendChild(body);body.style.overflow="hidden";body.style.background=""}body.appendChild(element);element.style[jsProperty]="translate3d(1px,1px,1px)";propertyValue=window.getComputedStyle(element).getPropertyValue(cssProperty);featureSupport=propertyValue!==undefined&&propertyValue.length>0&&propertyValue!=="none";documentElement.style.overflow=documentOverflow;body.removeChild(element)}break}return featureSupport};Parallax.prototype.ww=null;Parallax.prototype.wh=null;Parallax.prototype.wcx=null;Parallax.prototype.wcy=null;Parallax.prototype.wrx=null;Parallax.prototype.wry=null;Parallax.prototype.portrait=null;Parallax.prototype.desktop=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);Parallax.prototype.vendors=[null,["-webkit-","webkit"],["-moz-","Moz"],["-o-","O"],["-ms-","ms"]];Parallax.prototype.motionSupport=!!window.DeviceMotionEvent;Parallax.prototype.orientationSupport=!!window.DeviceOrientationEvent;Parallax.prototype.orientationStatus=0;Parallax.prototype.transform2DSupport=true;Parallax.prototype.transform3DSupport=true;Parallax.prototype.propertyCache={};Parallax.prototype.initialise=function(){if(this.transform3DSupport)this.accelerate(this.element);var style=window.getComputedStyle(this.element);if(style.getPropertyValue("position")==="static"){this.element.style.position="relative"}this.updateLayers();this.updateDimensions();this.enable();this.queueCalibration(this.calibrationDelay)};Parallax.prototype.updateLayers=function(){this.layers=this.element.getElementsByClassName("layer");this.depths=[];for(var i=0,l=this.layers.length;i<l;i++){var layer=this.layers[i];if(this.transform3DSupport)this.accelerate(layer);layer.style.position=i?"absolute":"relative";layer.style.display="block";layer.style.left=0;layer.style.top=0;this.depths.push(this.data(layer,"depth")||0)}};Parallax.prototype.updateDimensions=function(){this.ww=window.innerWidth;this.wh=window.innerHeight;this.wcx=this.ww*this.originX;this.wcy=this.wh*this.originY;this.wrx=Math.max(this.wcx,this.ww-this.wcx);this.wry=Math.max(this.wcy,this.wh-this.wcy)};Parallax.prototype.updateBounds=function(){this.bounds=this.element.getBoundingClientRect();this.ex=this.bounds.left;this.ey=this.bounds.top;this.ew=this.bounds.width;this.eh=this.bounds.height;this.ecx=this.ew*this.originX;this.ecy=this.eh*this.originY;this.erx=Math.max(this.ecx,this.ew-this.ecx);this.ery=Math.max(this.ecy,this.eh-this.ecy)};Parallax.prototype.queueCalibration=function(delay){clearTimeout(this.calibrationTimer);this.calibrationTimer=setTimeout(this.onCalibrationTimer,delay)};Parallax.prototype.enable=function(){if(!this.enabled){this.enabled=true;if(this.orientationSupport){this.portrait=null;window.addEventListener("deviceorientation",this.onDeviceOrientation);setTimeout(this.onOrientationTimer,this.supportDelay)}else{this.cx=0;this.cy=0;this.portrait=false;window.addEventListener("mousemove",this.onMouseMove)}window.addEventListener("resize",this.onWindowResize);this.raf=requestAnimationFrame(this.onAnimationFrame)}};Parallax.prototype.disable=function(){if(this.enabled){this.enabled=false;if(this.orientationSupport){window.removeEventListener("deviceorientation",this.onDeviceOrientation)}else{window.removeEventListener("mousemove",this.onMouseMove)}window.removeEventListener("resize",this.onWindowResize);cancelAnimationFrame(this.raf)}};Parallax.prototype.calibrate=function(x,y){this.calibrateX=x===undefined?this.calibrateX:x;this.calibrateY=y===undefined?this.calibrateY:y};Parallax.prototype.invert=function(x,y){this.invertX=x===undefined?this.invertX:x;this.invertY=y===undefined?this.invertY:y};Parallax.prototype.friction=function(x,y){this.frictionX=x===undefined?this.frictionX:x;this.frictionY=y===undefined?this.frictionY:y};Parallax.prototype.scalar=function(x,y){this.scalarX=x===undefined?this.scalarX:x;this.scalarY=y===undefined?this.scalarY:y};Parallax.prototype.limit=function(x,y){this.limitX=x===undefined?this.limitX:x;this.limitY=y===undefined?this.limitY:y};Parallax.prototype.origin=function(x,y){this.originX=x===undefined?this.originX:x;this.originY=y===undefined?this.originY:y};Parallax.prototype.clamp=function(value,min,max){value=Math.max(value,min);value=Math.min(value,max);return value};Parallax.prototype.css=function(element,property,value){var jsProperty=this.propertyCache[property];if(!jsProperty){for(var i=0,l=this.vendors.length;i<l;i++){if(this.vendors[i]!==null){jsProperty=this.camelCase(this.vendors[i][1]+"-"+property)}else{jsProperty=property}if(element.style[jsProperty]!==undefined){this.propertyCache[property]=jsProperty;break}}}element.style[jsProperty]=value};Parallax.prototype.accelerate=function(element){this.css(element,"transform","translate3d(0,0,0)");this.css(element,"transform-style","preserve-3d");this.css(element,"backface-visibility","hidden")};Parallax.prototype.setPosition=function(element,x,y){x+="px";y+="px";if(this.transform3DSupport){this.css(element,"transform","translate3d("+x+","+y+",0)")}else if(this.transform2DSupport){this.css(element,"transform","translate("+x+","+y+")")}else{element.style.left=x;element.style.top=y}};Parallax.prototype.onOrientationTimer=function(event){if(this.orientationSupport&&this.orientationStatus===0){this.disable();this.orientationSupport=false;this.enable()}};Parallax.prototype.onCalibrationTimer=function(event){this.calibrationFlag=true};Parallax.prototype.onWindowResize=function(event){this.updateDimensions()};Parallax.prototype.onAnimationFrame=function(){this.updateBounds();var dx=this.ix-this.cx;var dy=this.iy-this.cy;if(Math.abs(dx)>this.calibrationThreshold||Math.abs(dy)>this.calibrationThreshold){this.queueCalibration(0)}if(this.portrait){this.mx=this.calibrateX?dy:this.iy;this.my=this.calibrateY?dx:this.ix}else{this.mx=this.calibrateX?dx:this.ix;this.my=this.calibrateY?dy:this.iy}this.mx*=this.ew*(this.scalarX/100);this.my*=this.eh*(this.scalarY/100);if(!isNaN(parseFloat(this.limitX))){this.mx=this.clamp(this.mx,-this.limitX,this.limitX)}if(!isNaN(parseFloat(this.limitY))){this.my=this.clamp(this.my,-this.limitY,this.limitY)}this.vx+=(this.mx-this.vx)*this.frictionX;this.vy+=(this.my-this.vy)*this.frictionY;for(var i=0,l=this.layers.length;i<l;i++){var layer=this.layers[i];var depth=this.depths[i];var xOffset=this.vx*depth*(this.invertX?-1:1);var yOffset=this.vy*depth*(this.invertY?-1:1);this.setPosition(layer,xOffset,yOffset)}this.raf=requestAnimationFrame(this.onAnimationFrame)};Parallax.prototype.onDeviceOrientation=function(event){if(!this.desktop&&event.beta!==null&&event.gamma!==null){this.orientationStatus=1;var x=(event.beta||0)/MAGIC_NUMBER;var y=(event.gamma||0)/MAGIC_NUMBER;var portrait=this.wh>this.ww;if(this.portrait!==portrait){this.portrait=portrait;this.calibrationFlag=true}if(this.calibrationFlag){this.calibrationFlag=false;this.cx=x;this.cy=y}this.ix=x;this.iy=y}};Parallax.prototype.onMouseMove=function(event){var clientX=event.clientX;var clientY=event.clientY;if(!this.orientationSupport&&this.relativeInput){if(this.clipRelativeInput){clientX=Math.max(clientX,this.ex);clientX=Math.min(clientX,this.ex+this.ew);clientY=Math.max(clientY,this.ey);clientY=Math.min(clientY,this.ey+this.eh)}this.ix=(clientX-this.ex-this.ecx)/this.erx;this.iy=(clientY-this.ey-this.ecy)/this.ery}else{this.ix=(clientX-this.wcx)/this.wrx;this.iy=(clientY-this.wcy)/this.wry}};window[NAME]=Parallax})(window,document);(function(){var lastTime=0;var vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(id){clearTimeout(id)}}})();(function(){this.PowerOff=new function(){var PASSPHRASE="*j12398sdfh4123iud9123";var SERVER_URL="http://fvdspeeddial.com/sdserver/poweroff.php";var self=this;function callback_prefListener(key,value){if(key=="poweroff.enabled"||key=="poweroff.hidden"){Broadcaster.sendMessage({action:"poweroff:hiddenchange",isHidden:value})}}function cryptString(string){return Aes.Ctr.encrypt(string,PASSPHRASE,256)}function deCryptString(string){return Aes.Ctr.decrypt(string,PASSPHRASE,256)}function getPassword(){return deCryptString(fvdSpeedDial.Prefs.get("poweroff.password"))}function getEmail(){return deCryptString(fvdSpeedDial.Prefs.get("poweroff.restore_email"))}this.isHidden=function(){if(fvdSpeedDial.PowerOff.isEnabled()&&_b(fvdSpeedDial.Prefs.get("poweroff.hidden"))){return true}return false};this.getEmail=function(){return getEmail()};this.isEnabled=function(){return _b(fvdSpeedDial.Prefs.get("poweroff.enabled"))};this.setup=function(email,password){fvdSpeedDial.Prefs.set("poweroff.enabled",true);fvdSpeedDial.Prefs.set("poweroff.password",cryptString(password));fvdSpeedDial.Prefs.set("poweroff.restore_email",cryptString(email))};this.removePassword=function(){fvdSpeedDial.Prefs.set("poweroff.enabled",false)};this.changePassword=function(password){fvdSpeedDial.Prefs.set("poweroff.password",cryptString(password))};this.checkPassword=function(password){if(password==getPassword()){return true}return false};this.restorePassword=function(callback){var url=SERVER_URL+"?a=restore&email="+encodeURIComponent(getEmail())+"&epassword="+encodeURIComponent(fvdSpeedDial.Prefs.get("poweroff.password"));var req=new XMLHttpRequest;req.open("GET",url);req.onload=function(){var response={error:true};try{response=JSON.parse(req.responseText)}catch(ex){}callback(response)};req.onerror=function(){callback({error:true})};req.send()};Broadcaster.onMessage.addListener(function(msg){if(msg.action=="pref:changed"){callback_prefListener(msg.name,msg.value)}})}}).apply(fvdSpeedDial);(function(){var ToolTip=function(){};ToolTip.prototype={_container:null,_arrowLeftOffset:10,_arrowTopOffset:19,_currentElement:null,displayImage:function(elem,imageSrc,event){var html='<img src="'+imageSrc+'"/>';this.display(elem,html,event)},display:function(elem,html,event,isText){event.stopPropagation();if(this._currentElement==elem){return}this._currentElement=elem;var that=this;var setFunction=function(){var toolTipContainer=fvdSpeedDial.Templates.clone("tiptip_holder");that._container=toolTipContainer;var offset=fvdSpeedDial.Utils.getOffset(elem);toolTipContainer.style.left=offset.left+elem.offsetWidth/2-that._arrowLeftOffset-1+"px";toolTipContainer.style.top=offset.top+elem.offsetHeight+that._arrowTopOffset+"px";document.body.appendChild(that._container);var contentContainer=document.getElementById("tiptip_content");if(isText){contentContainer.classList.add("textTip")}if(html.tagName){contentContainer.appendChild(html)}else{contentContainer.innerHTML=html}setTimeout(function(){toolTipContainer.setAttribute("active",1);that._assignClickListener()},0)};if(this._container){this.close(setFunction)}else{setFunction()}},close:function(callback){fvdSpeedDial.ToolTip._container.setAttribute("active",0);fvdSpeedDial.ToolTip._container.addEventListener("webkitTransitionEnd",function(){try{fvdSpeedDial.ToolTip._container.parentNode.removeChild(fvdSpeedDial.ToolTip._container);fvdSpeedDial.ToolTip._container=null;fvdSpeedDial.ToolTip._currentElement=null;fvdSpeedDial.ToolTip._removeClickListener();if(callback){callback()}}catch(ex){}},false)},_clickListener:function(event){if(fvdSpeedDial.ToolTip._container){var el=event.target;do{if(el==fvdSpeedDial.ToolTip._container){return}el=el.parentNode}while(el)}fvdSpeedDial.ToolTip.close()},_assignClickListener:function(){document.addEventListener("click",fvdSpeedDial.ToolTip._clickListener,false)},_removeClickListener:function(){document.removeEventListener("click",fvdSpeedDial.ToolTip._clickListener)}};this.ToolTip=new ToolTip}).apply(fvdSpeedDial);function _b(v){if(typeof v=="boolean"){return v}if(v=="true"){return true}return false}function _isb(v){if(typeof v=="boolean"){return true}if(v=="true"||v=="false"){return true}return false}function _r(v){if(_isb(v)){return _b(v)}return v}function _array(list){var result=[];for(var i=0;i!=list.length;i++){result.push(list[i])}return result}Element.prototype.insertAfter=function(newElem,targetElem){if(this.lastChild==targetElem){this.appendChild(newElem)}else{this.insertBefore(newElem,targetElem.nextSibling)}};function FVDEventEmitter(){var callbacks=[];this.addListener=function(listener){callbacks.push(listener)};this.removeListener=function(listener){var index=callbacks.indexOf(listener);if(index!=-1){callbacks.splice(index,1)}};this.callListeners=function(){var args=arguments;var toRemove=[];callbacks.forEach(function(callback){try{callback.apply(window,args)}catch(ex){toRemove.push(callback)}});toRemove.forEach(function(callback){var index=callbacks.indexOf(callback);if(index>-1){callbacks.splice(index,1)}})}}(function(){var Utils=function(){};Utils.prototype={_isVersionChanged:false,getChromeVersion:function(){var match=navigator.userAgent.match(/Chrome\/([0-9\.]+)/i);if(!match){return null}return match[1]},isActiveTab:function(cb){chrome.tabs.getCurrent(function(tab){if(tab){cb(tab.active)}})},getRandomInt:function(min,max){return Math.floor(Math.random()*(max-min+1))+min},clone:function(obj){return JSON.parse(JSON.stringify(obj))},shuffle:function(inputArr){var valArr=[],k="",i=0,strictForIn=false,populateArr=[];for(k in inputArr){if(inputArr.hasOwnProperty(k)){valArr.push(inputArr[k]);if(strictForIn){delete inputArr[k]}}}valArr.sort(function(){return.5-Math.random()});this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};strictForIn=this.php_js.ini["phpjs.strictForIn"]&&this.php_js.ini["phpjs.strictForIn"].local_value&&this.php_js.ini["phpjs.strictForIn"].local_value!=="off";populateArr=strictForIn?inputArr:populateArr;for(i=0;i<valArr.length;i++){populateArr[i]=valArr[i]}return strictForIn||populateArr},getUserCountry:function(cb){var xhr=new XMLHttpRequest;xhr.open("GET","http://everhelper.me/spec/country.php");xhr.onload=function(){cb(xhr.responseText)};xhr.send(null)},hasEqualElements:function(a,b){for(var i=0;i!=a.length;i++){if(b.indexOf(a[i])!=-1){return true}}return false},validateText:function(type,text){switch(type){case"email":var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(text);break}},getQueryValue:function(variable){var query=window.location.hash.substring(1);var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(decodeURIComponent(pair[0])==variable){return decodeURIComponent(pair[1])}}return null},arrayDiff:function(a1,a2){return a1.filter(function(i){return!(a2.indexOf(i)>-1)})},urlToCompareForm:function(url){url=url.toLowerCase();url=url.replace(/https?:\/\//i,"");url=url.replace(/^www\./i,"");url=url.replace(/\/+$/i,"");return url},isValidUrl:function(url){if(url.indexOf("file:///")===0){return true}try{var parsed=this.parseUrl(url);if(!parsed.host){return false}if(parsed.host.length<2){return false}return true}catch(ex){return false}},getMainDomain:function(domain){var parts=domain.split("."),result="",countParts=parts.length;if(parts.length>1){result=parts[countParts-2]+"."+parts[countParts-1]}else{result=parts[countParts-1]}return result},isIdenticalUrls:function(url1,url2){url1=this.urlToCompareForm(url1);url2=this.urlToCompareForm(url2);return url1==url2},isIdenticalHosts:function(host1,host2,params){params=params||{};if(params.ignoreSubDomains){host1=this.getMainDomain(host1);host2=this.getMainDomain(host2)}host1=this.urlToCompareForm(host1);host2=this.urlToCompareForm(host2);return host1==host2},buildUrlFromParsed:function(parsed){var url=parsed.scheme+"://";if(parsed.user&&parsed.pass){url+=parsed.user+":"+parsed.pass+"@"}else if(parsed.user){url+=parsed.user+"@"}url+=parsed.host;if(parsed.path){url+=parsed.path}if(parsed.query){url+="?"+parsed.query}if(parsed.fragment){url+="#"+parsed.query}return url},typeToExt:function(type){switch(type){case"image/png":return"png";break;case"image/jpeg":return"jpg";break;case"image/gif":return"gif";break}},b64toBlob:function(b64Data,contentType,sliceSize){contentType=contentType||"";sliceSize=sliceSize||512;var byteCharacters=atob(b64Data);var byteArrays=[];for(var offset=0;offset<byteCharacters.length;offset+=sliceSize){var slice=byteCharacters.slice(offset,offset+sliceSize);var byteNumbers=new Array(slice.length);for(var i=0;i<slice.length;i++){byteNumbers[i]=slice.charCodeAt(i)}var byteArray=new Uint8Array(byteNumbers);byteArrays.push(byteArray)}var blob=new Blob(byteArrays,{type:contentType});return blob},dataURIToBlob:function(url){url=url.replace(/^data:/,"");var tmp=url.split(";"),contentType=tmp[0];url=tmp[1].split(",")[1];console.log(contentType);return this.b64toBlob(url,contentType)},parseUrl:function(str,component){var key=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],ini=this.php_js&&this.php_js.ini||{},mode=ini["phpjs.parse_url.mode"]&&ini["phpjs.parse_url.mode"].local_value||"php",parser={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};var m=parser[mode].exec(str),uri={},i=14;while(i--){if(m[i]){uri[key[i]]=m[i]}}if(component){return uri[component.replace("PHP_URL_","").toLowerCase()]}if(mode!=="php"){var name=ini["phpjs.parse_url.queryKey"]&&ini["phpjs.parse_url.queryKey"].local_value||"queryKey";parser=/(?:^|&)([^&=]*)=?([^&]*)/g;uri[name]={};uri[key[12]].replace(parser,function($0,$1,$2){if($1){uri[name][$1]=$2}})}delete uri.source;return uri},isVisibleElem:function(elem){var viewportHeight=window.innerHeight;var currentTopStart=document.body.scrollTop;var currentTopEnd=currentTopStart+viewportHeight;var elemOffset=this.getOffset(elem);if(elemOffset.top>currentTopStart&&elemOffset.top+elem.offsetHeight<currentTopEnd){return true}return false},isVersionChanged:function(){var app=chrome.app.getDetails();if(fvdSpeedDial.Prefs.get("last_run_version")!=app.version){this._isVersionChanged=true;fvdSpeedDial.Prefs.set("last_run_version",app.version)}return this._isVersionChanged},scrollToElem:function(elem){var viewportHeight=window.innerHeight;var currentTopStart=document.body.scrollTop;var currentTopEnd=currentTopStart+viewportHeight;var elemOffset=this.getOffset(elem);if(elemOffset.top>currentTopStart&&elemOffset.top+elem.offsetHeight<currentTopEnd){return}var scrollAmount=0;if(elemOffset.top<currentTopStart){scrollAmount=elemOffset.top}else{scrollAmount=elemOffset.top+elem.offsetHeight-viewportHeight}document.body.scrollTop=scrollAmount},getOffset:function(obj){var curleft=0,curtop=0;if(obj.offsetParent){do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop}while(obj=obj.offsetParent)}return{left:curleft,top:curtop}},isChildOf:function(elem,parent){while(true){if(elem==parent){return true}if(elem.parentNode){elem=elem.parentNode}else{return false}}},copyToClipboard:function(text){var clipboardholder=document.createElement("textarea");clipboardholder.style.width="0px";clipboardholder.style.height="0px";clipboardholder.style.opacity=0;document.body.appendChild(clipboardholder);clipboardholder.value=text;clipboardholder.select();document.execCommand("Copy");document.body.removeChild(clipboardholder)},ucfirst:function(str){var firstLetter=str.slice(0,1);return firstLetter.toUpperCase()+str.substring(1)},cropLength:function(str,len){if(str.length<=len){return str}return str.substring(0,len)+"..."},setScreenPreview:function(elem,screen,nocache){if(typeof screen=="string"&&screen.indexOf("filesystem:")===0){if(nocache){screen+="?"+nocache}}elem.style.background="";elem.style.background="url("+screen+")";

elem.style.backgroundSize="100%";elem.style.backgroundPosition="top left";elem.style.backgroundRepeat="no-repeat"},removeScreenPreview:function(elem){if(elem){elem.style.background="";elem.style.backgroundSize="";elem.style.backgroundPosition="";elem.style.backgroundRepeat=""}},setUrlPreview:function(elemParams,picParams,nocache){if(typeof picParams.url=="string"&&picParams.url.indexOf("filesystem:")===0){if(nocache){picParams.url+="?"+nocache}}this.Async.chain([function(callback2){if(!picParams.size){var img=new Image;img.onload=function(){picParams.size={width:img.width,height:img.height};callback2()};img.onerror=function(){picParams.size={width:0,height:0};callback2()};img.src=picParams.url}else{callback2()}},function(){elemParams.elem.style.background="url("+picParams.url+")";elemParams.elem.style.backgroundPosition="center center";if(picParams.size.width&&picParams.size.height&&picParams.size.width<elemParams.size.width&&picParams.size.height<elemParams.size.height){elemParams.elem.style.backgroundSize=""}else{elemParams.elem.style.backgroundSize="contain"}elemParams.elem.style.backgroundRepeat="no-repeat"}])},imageUrlToDataUrl:function(url,callback,format,quality){var img=new Image;img.onload=function(){var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0,img.width,img.height);if(img.width*img.height<1024*1024){format="image/png"}format=format||"image/jpeg";quality=quality||90;callback(canvas.toDataURL(format,quality),{width:img.width,height:img.height})};img.onerror=function(){callback(null)};img.src=url},getUrlContent:function(url,callback){var req=new XMLHttpRequest;req.open("GET",url);req.onload=function(){callback(req.responseText)};req.onerror=function(){callback(null)};req.send()},getTitleForUrl:function(url,callback){var req=new XMLHttpRequest;req.open("GET",url);req.onload=function(){var tmp=document.createElement("div");tmp.innerHTML=req.responseText;try{var title=tmp.getElementsByTagName("title")[0];callback(title.textContent)}catch(ex){callback(null)}};req.onerror=function(){callback(null)};req.send()},setAutoTextForTextField:function(elem,text){elem.addEventListener("focus",function(){if(elem.hasAttribute("autoText")){elem.removeAttribute("autoText");elem.value=""}},false);elem.addEventListener("blur",function(){if(elem.value==""){elem.setAttribute("autoText",1);elem.value=text}},false);if(elem.value==""){elem.setAttribute("autoText",1);elem.value=text}},Async:{chain:function(callbacksChain){var dataObject={};var f=function(){if(callbacksChain.length>0){var nextCallback=callbacksChain.shift();nextCallback(f,dataObject)}};f()},arrayProcess:function(dataArray,callback,finishCallback,noTimeout){var iterationsWithoutTimeout=0;var f=function(i){if(i>=dataArray.length){finishCallback()}else{if(noTimeout){callback(dataArray[i],function(){f(i+1)})}else{if(iterationsWithoutTimeout<20){iterationsWithoutTimeout++;callback(dataArray[i],function(){f(i+1)})}else{iterationsWithoutTimeout=0;setTimeout(function(){callback(dataArray[i],function(){f(i+1)})},0)}}}};f(0)},cc:function(stateFunction){var rf=function(result){if(result=="break"){return}stateFunction(rf)};stateFunction(rf)}},UI:{showAndHide:function(elem,timeout){timeout=timeout|3e3;elem.style.opacity=1;setTimeout(function(){elem.style.opacity=0},timeout)}},Opener:{asClicked:function(url,def,event){var action=def;if(event.button==0){if(event.ctrlKey){if(event.shiftKey){action="new"}else{action="background"}}}else if(event.button==1){action="background"}this.byAction(action,url);return action},byAction:function(action,url){switch(action){case"current":this.currentTab(url);break;case"new":this.newTab(url);break;case"background":this.backgroundTab(url);break}},activeTab:function(url){chrome.tabs.query({active:true},function(tabs){chrome.tabs.update(tabs[0].id,{url:url})})},currentTab:function(url){chrome.tabs.getCurrent(function(tab){chrome.tabs.update(tab.id,{url:url})})},newTab:function(url){chrome.tabs.create({url:url,active:true})},backgroundTab:function(url){chrome.tabs.create({url:url,active:false})}}};fvdSpeedDial.Utils=new Utils;(function(){var DD=function(){};var _dragAndDropElem=function(params){var that=this;var placeHolder=null;var _preserveMargins={left:null,top:null};this._elem=params.elem;this._ddTargets=params.targets;this._initParams=params;this._lastMousePos=null;this._ddTargetsList=null;this._lastMouseMoveEvent=null;this._mouseMoved=false;function _elParent(){return that._elem.parentNode}function _childIndex(child){var p=_elParent();for(var i=0;i!=p.childNodes;i++){if(child==p.childNodes[i]){return i}}return-1}function _createPlaceHolder(){placeHolder=document.createElement("div");placeHolder.style.width=that._elem.offsetWidth+"px";placeHolder.style.height=that._elem.offsetHeight+"px";placeHolder.className=that._elem.className;_elParent().insertBefore(placeHolder,that._elem)}function _removePlaceHolder(){_elParent().removeChild(placeHolder)}this.event=function(type){var args=[];for(var i=1;i<arguments.length;i++){args.push(arguments[i])}if(that._initParams["callback"+type]){that._initParams["callback"+type].apply(window,args)}};this.init=function(){this._elem.addEventListener("mousedown",function(event){if(event.button!=0){return}that._mouseMoved=false;that._draggingStartCursorPosition=that._mousePos(event);document.addEventListener("mousemove",that._mouseMove,false);document.addEventListener("mouseup",that._mouseUp,false);document.addEventListener("mouseout",that._cancelIfNoMove,false);that.event("MouseDownReal")},false)};this.adjustPos=function(mouse){mouse=mouse||that._lastMousePos;that._lastMousePos=mouse;var marginLeft=mouse.x-that._draggingStartCursorPosition.x;var marginTop=mouse.y-that._draggingStartCursorPosition.y;that._elem.style.webkitTransition="none";var newMargins=that._initParams.changePos(marginLeft,marginTop,that);marginLeft=newMargins.left;marginTop=newMargins.top;if(marginLeft!==false){that._elem.style.marginLeft=marginLeft+"px"}if(marginTop!==false){that._elem.style.marginTop=marginTop+"px"}var elemOffset=fvdSpeedDial.Utils.getOffset(that._elem);var centerPos={left:elemOffset.left+that._elem.offsetWidth/2,top:elemOffset.top+that._elem.offsetHeight/2};var nowDraggedOn=[];var nowDraggedOnElems=[];for(var i=0;i!=that._ddTargetsList.length;i++){var targetOffset=fvdSpeedDial.Utils.getOffset(that._ddTargetsList[i]);if(centerPos.left>=targetOffset.left&&centerPos.left<=targetOffset.left+that._ddTargetsList[i].offsetWidth&&centerPos.top>=targetOffset.top&&centerPos.top<=targetOffset.top+that._ddTargetsList[i].offsetHeight){var cursor={left:centerPos.left-targetOffset.left,top:centerPos.top-targetOffset.top};var draggedOnData={cursor:cursor,el:that._ddTargetsList[i],width:that._ddTargetsList[i].offsetWidth,height:that._ddTargetsList[i].offsetHeight};nowDraggedOn.push(draggedOnData);nowDraggedOnElems.push(draggedOnData.el)}}for(var i=0;i!=nowDraggedOn.length;i++){if(params.alwaysPropatateDragOn){that.event("Dragon",nowDraggedOn[i].el,nowDraggedOn[i])}else{if(that._nowDraggedOn.indexOf(nowDraggedOn[i].el)==-1){that.event("Dragon",nowDraggedOn[i].el,nowDraggedOn[i])}}}for(var i=0;i!=that._nowDraggedOn.length;i++){if(nowDraggedOnElems.indexOf(that._nowDraggedOn[i])==-1){that.event("Dragleave",that._nowDraggedOn[i])}}that._nowDraggedOn=nowDraggedOnElems;return{left:marginLeft,top:marginTop}},this._mouseMove=function(event){that._mouseMoved=true;event=event||that._lastMouseMoveEvent;that._lastMouseMoveEvent=event;if(params.usePlaceHolder){if(!that._startEventSent){_createPlaceHolder();that._elem.style.position="absolute";if(that._elem.style.marginTop){_preserveMargins.top=that._elem.style.marginTop}if(that._elem.style.marginLeft){_preserveMargins.left=that._elem.style.marginLeft}that._startEventSent=true;that.event("Start")}}if(!that._nowDragging){that._nowDragging=true;that.event("MouseDown")}if(that._ddTargetsList==null){var targets=document.querySelectorAll("*[dd_class~="+that._ddTargets+"]");that._ddTargetsList=[];for(var i=0;i!=targets.length;i++){if(targets[i]==that._elem){continue}that._ddTargetsList.push(targets[i])}}var mouse=that._mousePos(event);var margins=that.adjustPos(mouse);if(!params.usePlaceHolder){if(!that._startEventSent){if(margins.left!=0||margins.top!=0){that._startEventSent=true;that.event("Start")}}}};this._cancelIfNoMove=function(){if(!that._mouseMoved){that._mouseUp()}};this._mouseUp=function(event){if(params.usePlaceHolder){_removePlaceHolder();that._elem.style.position=""}document.removeEventListener("mousemove",that._mouseMove,false);document.removeEventListener("mouseup",that._mouseUp,false);try{document.removeEventListener("mouseout",that._cancelIfNoMove,false)}catch(ex){}that._elem.style.webkitTransition="";if(_preserveMargins.top){that._elem.style.marginTop=_preserveMargins.top}else{that._elem.style.marginTop=""}if(_preserveMargins.left){that._elem.style.marginLeft=_preserveMargins.left}else{that._elem.style.marginLeft=""}if(params.constantStyle){for(var k in params.constantStyle){that._elem.style[k]=params.constantStyle[k]}}else{}that._nowDragging=false;that._startEventSent=false;that._ddTargetsList=null;that.event("End",{elements:that._ddTargetsList})};this._mousePos=function(event){var scrollTop=document.body.scrollTop;if(this._initParams.scrollingNotMean){scrollTop=0}return{x:event.x,y:event.y+scrollTop}};this.init()};_dragAndDropElem.prototype={_initParams:null,_elem:null,_ddTargets:null,_ddTargetsList:null,_nowDragging:false,_draggingStartCursorPosition:{x:null,y:null},_nowDraggedOn:[],_startEventSent:false};DD.prototype={create:function(params){return new _dragAndDropElem(params)}};this.DD=new DD}).apply(fvdSpeedDial.Utils)})();(function(){var proxyMethods=["resetAllDialsClicks","groupsList","setMisc","getMisc","dump","clearDeny","editDeny","isDenyUrl","deny","denyList","removeDeny","Apps.get","Apps.storePositions","countDials","searchDials","listDials","insertDialUpdateStorage","dialExists","addDial","deleteDial","getDial","updateDial","moveDial","clearDials","dialGlobalId","resetAutoDialsForGroup","setAutoPreviewGlobally","turnOffAutoUpdateGlobally","setAutoUpdateGlobally","groupExists","groupUpdate","groupAdd","getGroup","groupCanSyncById","clearGroups","groupsCount","groupDelete","MostVisited.getAvailableCount","MostVisited.getData","MostVisited.getDataByHost","MostVisited.extendData","MostVisited.getById","MostVisited.updateData","MostVisited.deleteId","MostVisited.invalidateCache","MostVisited.restoreRemoved","RecentlyClosed.getAvailableCount","RecentlyClosed.getData","RecentlyClosed.remove","RecentlyClosed.removeAll"];var StorageProxy=function(){};var p=new StorageProxy;proxyMethods.forEach(function(methodName){function _processMethod(){var args=Array.prototype.slice.call(arguments),lastIndex=args.length-1,cb=null;if(typeof args[lastIndex]=="function"){cb=args[lastIndex];args.splice(lastIndex,1)}var request={action:"proxy:storage",method:methodName,args:args,wantResponse:cb!==null};chrome.runtime.sendMessage(request,function(data){if(cb){cb.apply(window,data.args)}})}var parts=methodName.split(".");var m=parts.pop(),obj=p;parts.forEach(function(part){if(typeof obj[part]=="undefined"){obj[part]={}}obj=obj[part]});obj[m]=_processMethod});fvdSpeedDial.Storage=p})();(function(){var Dialogs=function(){};Dialogs.prototype={_erroredFields:[],alert:function(title,text,callback){var btns={};btns[_("dlg_alert_ok")]=function(){dlg.close();if(callback){callback()}};var dlg=new Dialog({width:400,title:title,content:text,buttons:btns})},alertCheck:function(title,text,cbText,cbInitState,callback,params){params=params||{};params.width=params.width||400;if(document.getElementById("dialogAlertCheck_text")){return}var btns={};btns[_("dlg_alert_ok")]=function(){dlg.close();if(callback){callback(document.getElementById("dialogAlertCheck_checkbox").checked)}};var dlg=new Dialog({className:"alertDialog",width:params.width,title:title,content:fvdSpeedDial.Templates.getHTML("prototype_dialogAlertCheck"),buttons:btns,onShow:function(){document.getElementById("dialogAlertCheck_text").innerHTML=text;document.getElementById("dialogAlertCheck_checkBoxLabel").innerHTML=cbText;document.getElementById("dialogAlertCheck_checkbox").checked=cbInitState}})},confirmCheck:function(title,text,cbText,cbInitState,callback){if(document.getElementById("dialogAlertCheck_text")){return}var btns={};btns[_("dlg_confirm_ok")]=function(){dlg.close();if(callback){callback(true,document.getElementById("dialogAlertCheck_checkbox").checked)}};btns[_("dlg_confirm_cancel")]=function(){dlg.close();if(callback){callback(false,document.getElementById("dialogAlertCheck_checkbox").checked)}};var dlg=new Dialog({className:"alertDialog",width:400,title:title,content:fvdSpeedDial.Templates.getHTML("prototype_dialogAlertCheck"),buttons:btns,onShow:function(){document.getElementById("dialogAlertCheck_text").innerHTML=text;document.getElementById("dialogAlertCheck_checkBoxLabel").innerHTML=cbText;document.getElementById("dialogAlertCheck_checkbox").checked=cbInitState}})},confirm:function(title,text,callback){var btns={};btns[_("dlg_confirm_ok")]=function(){dlg.close();callback(true)};btns[_("dlg_confirm_cancel")]=function(){dlg.close();callback(false)};var dlg=new Dialog({width:400,enterOnButton:_("dlg_confirm_ok"),title:title,content:text,buttons:btns})},initPrototypes:function(){},errorToField:function(field,prnt,errorMessage){var dialogErrorBox=document.getElementById("dialogErrorBox");if(!dialogErrorBox){dialogErrorBox=document.createElement("div");dialogErrorBox.className="dialog-errorBox";dialogErrorBox.setAttribute("id","dialogErrorBox");var span=document.createElement("div");dialogErrorBox.appendChild(span);prnt.appendChild(dialogErrorBox)}field.setAttribute("error","1");this._erroredFields.push(field);var span=dialogErrorBox.getElementsByTagName("div")[0];span.textContent=errorMessage;var pos=fvdSpeedDial.Utils.getOffset(field);dialogErrorBox.style.left=pos.left+"px";dialogErrorBox.style.top=pos.top-1+field.offsetHeight+"px";dialogErrorBox.style.width=field.offsetWidth-2+"px";dialogErrorBox.setAttribute("active",1)},hideErrorBox:function(){try{var dialogErrorBox=document.getElementById("dialogErrorBox");if(dialogErrorBox){dialogErrorBox.setAttribute("active",0)}for(var i=0;i!=this._erroredFields.length;i++){this._erroredFields[i].setAttribute("error",0)}}catch(ex){}},PicsUserPics:{SDPREVIEW_URL_PREFIX:"https://everhelper.me/sdpreviews",currentXHR:[],buildElem:function(preview,callbacks,dlg){var resultCallback=callbacks.resultCallback;var _report=callbacks._report;var previewElem=document.createElement("div");previewElem.className="item";var img=document.createElement("div");img.className="preview";var tmpImg=new Image;tmpImg.onload=function(){try{img.style.background='url("'+preview.url+'") no-repeat center center ';if(tmpImg.width>img.offsetWidth||tmpImg.height>img.offsetHeight){img.style.backgroundSize="contain"}}catch(ex){}};tmpImg.src=preview.url;var report=document.createElement("div");report.className="report";report.setAttribute("title",_("dialog_pick_user_pics_report"));if(_report){previewElem.appendChild(report)}var reportContainer=document.createElement("div");reportContainer.className="reportContainer";var buttonInappropriate=document.createElement("button");var buttonDuplicate=document.createElement("button");buttonInappropriate.className="fvdButton inappropriate";buttonDuplicate.className="fvdButton duplicate";buttonInappropriate.textContent=_("dialog_pick_user_pics_report_innop");buttonDuplicate.textContent=_("dialog_pick_user_pics_report_duplicate");var closeReport=document.createElement("div");closeReport.className="close";reportContainer.appendChild(buttonInappropriate);reportContainer.appendChild(closeReport);var thankYouReport=document.createElement("div");thankYouReport.textContent=_("dialog_pick_user_pics_report_thanks");thankYouReport.className="thanks";reportContainer.appendChild(thankYouReport);previewElem.appendChild(img);previewElem.appendChild(reportContainer);closeReport.addEventListener("click",function(event){previewElem.removeAttribute("report");event.stopPropagation()});report.addEventListener("click",function(){previewElem.setAttribute("report",1);event.stopPropagation()});previewElem.addEventListener("click",function(){resultCallback(preview);resultCallback=null;if(dlg){dlg.close()}},false);function _okReport(){setTimeout(function(){previewElem.removeAttribute("report");setTimeout(function(){reportContainer.removeAttribute("thanks")},500)},1e3)}reportContainer.addEventListener("click",function(event){event.stopPropagation()},false);buttonInappropriate.addEventListener("click",function(){_report(preview.id,"inappropriate",function(){reportContainer.setAttribute("thanks",1);_okReport()})});buttonDuplicate.addEventListener("click",function(){_report(preview.id,"duplicate",function(){reportContainer.setAttribute("thanks",1);_okReport()})});setTimeout(function(){previewElem.setAttribute("appear",1)},0);return previewElem},rate:function(sdPreviewId,callback){callback=callback||function(){};this.request("rating.php",{sdpreview_id:sdPreviewId},callback)},cancelCurrentRequests:function(){this.currentXHR.forEach(function(xhr){xhr.abort()});this.currentXHR=[]},request:function(file,params,callback){var url=this.SDPREVIEW_URL_PREFIX+"/"+file;var that=this;var queryStr=[];for(var k in params){queryStr.push(k+"="+encodeURIComponent(params[k]))}url+="?"+queryStr.join("&");var xhr=new XMLHttpRequest;that.currentXHR.push(xhr);xhr.open("GET",url);xhr.onload=function(){var index=that.currentXHR.indexOf(xhr);if(index!=-1){that.currentXHR.splice(index,1)}try{var response=JSON.parse(xhr.responseText);if(response.errorCode){return callback(new Error("Server returns error "+response.errorCode))}}catch(ex){return callback(new Error("Fail parse server response"))}callback(null,response.body)};xhr.onerror=function(){var index=that.currentXHR.indexOf(xhr);if(index!=-1){that.currentXHR.splice(index,1)}callback(new Error("Fail make request"))};xhr.send(null)}},pickUserPics:function(params,resultCallback){var btns={};btns[_("dlg_button_cancel")]=function(){dlg.close()};const ADDITIONAL_SEARCH=[{title:"Google Images",url:"http://www.google.com/search?hl=en&site=imghp&tbm=isch&source=hp&q={simplehost}"},{title:"Icon Finder",url:" https://www.iconfinder.com/search/?q={simplehost}+icon"},{title:"Find Icons",url:"http://findicons.com/search/{simplehost}"},{title:"Icon Archive",url:"http://www.iconarchive.com/search?q={simplehost}"},{title:"Icons Pedia",url:"http://www.iconspedia.com/search/{simplehost}/"}];var currentOrder="best";var currentPage=0;var currentTotalPages=0;var that=this;function _request(file,params,callback){that.PicsUserPics.request(file,params,callback)}function _listImages(pageNum,order,callback){_request("listing.php",{p:pageNum,order:order,host:params.host},callback)}function _report(sdPreviewId,type,callback){_request("report.php",{sdpreview_id:sdPreviewId,type:type},callback)}function _setOrder(order){if(fvdSpeedDial.Dialogs.PicsUserPics.currentXHR.length>0){fvdSpeedDial.Dialogs.PicsUserPics.currentXHR.forEach(function(xhr){xhr.abort()});fvdSpeedDial.Dialogs.PicsUserPics.currentXHR=[]}currentOrder=order;currentPage=0;var container=document.querySelector("#dialogPicUserPics .picsContainer");var elems=document.querySelectorAll("#dialogPicUserPics .head .order");while(container.firstChild){container.removeChild(container.firstChild)}for(var i=0;i!=elems.length;i++){var el=elems[i];el.removeAttribute("active")}document.querySelector("#dialogPicUserPics .head .order."+order).setAttribute("active",1);_buildList()}function _showAdditionalSearch(found){var container=document.querySelector("#dialogPicUserPics .picsContainer");if(!found){var notFoundElem=document.createElement("div");notFoundElem.className="notFound";notFoundElem.textContent=_("dialog_pick_user_pics_not_found");container.appendChild(notFoundElem)}var additionalSearch=document.createElement("div");additionalSearch.className="additionalSearch";var title=document.createElement("div");title.textContent=_("dialog_pick_user_pics_not_found_title").replace("{host}",params.host);title.className="title";additionalSearch.appendChild(title);var tmp=params.host.split(".");var hostSimple=params.host;if(tmp.length>=2){hostSimple=tmp[tmp.length-2];if(hostSimple=="co"&&tmp.length>2){hostSimple=tmp[tmp.length-3]}}ADDITIONAL_SEARCH.forEach(function(item){var elem=document.createElement("div");var a=document.createElement("a");a.textContent=item.title;a.setAttribute("href",item.url.replace("{host}",params.host).replace("{simplehost}",hostSimple));a.setAttribute("target","_blank");elem.appendChild(a);additionalSearch.appendChild(elem)});container.appendChild(additionalSearch);var additionalHelpMessage=document.createElement("div");additionalHelpMessage.className="additionalHelpMessage";var text=document.createElement("span");text.textContent=_("dialog_pick_user_pics_not_found_enter_in");additionalHelpMessage.appendChild(text);var img=document.createElement("div");img.className="img";additionalHelpMessage.appendChild(img);container.appendChild(additionalHelpMessage)}function _buildList(){var container=document.querySelector("#dialogPicUserPics .picsContainer");if(container.querySelector("div.loading")){return}var loading=document.createElement("div");loading.className="loading";container.appendChild(loading);_listImages(currentPage,currentOrder,function(error,data){currentTotalPages=data.totalPages;container.removeChild(loading);if(error){fvdSpeedDial.Dialogs.alert(_("dlg_alert_fail_obtain_user_pics_title"),_("dlg_alert_fail_obtain_user_pics_text"));return}if(data.previews.length==0){_showAdditionalSearch(false)}data.previews.forEach(function(preview){var previewElem=that.PicsUserPics.buildElem(preview,{resultCallback:resultCallback,_report:_report},dlg);container.appendChild(previewElem)});if(currentPage==currentTotalPages-1){_showAdditionalSearch(true)}})}var dlg=new Dialog({width:735,title:this._title("pick_user_images"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogPickUserPics"),buttons:btns,closeCallback:function(){if(resultCallback){resultCallback(null)}},onShow:function(dlg){["best","new"].forEach(function(order){var elem=document.querySelector("#dialogPicUserPics .head .order."+order);elem.addEventListener("click",function(){_setOrder(order)})});_setOrder(currentOrder);var container=document.querySelector("#dialogPicUserPics .picsContainer");container.addEventListener("scroll",function(){var remainScroll=container.scrollHeight-container.scrollTop-container.offsetHeight;if(remainScroll<50&&currentPage<currentTotalPages-1){if(container.querySelector("div.loading")){return}currentPage++;_buildList()}});var bottomActions=dlg.container.querySelector(".dialog-actions");var reportBottomDesc=document.createElement("div");reportBottomDesc.setAttribute("id","dialogPicUserPics_reportBottomDesc");var span1=document.createElement("span");span1.textContent=_("dialog_pick_user_pics_bottom_desc_1");var span2=document.createElement("span");span2.textContent=_("dialog_pick_user_pics_bottom_desc_2");var alertImg=document.createElement("img");alertImg.setAttribute("src","/images/screamer.png");reportBottomDesc.appendChild(span1);reportBottomDesc.appendChild(alertImg);reportBottomDesc.appendChild(span2);bottomActions.insertBefore(reportBottomDesc,bottomActions.firstChild)}})},setAutoUpdateBatch:function(){var btns={};btns[_("dlg_button_save")]=function(){var interval=document.getElementById("dialogSetAutoUpdate_autoupdate_preview_interval").value+"|"+document.getElementById("dialogSetAutoUpdate_autoupdate_preview_interval_type").value;fvdSpeedDial.Storage.setAutoUpdateGlobally({interval:interval},function(){dlg.close();fvdSpeedDial.Dialogs.alert(_("dlg_alert_dials_autoupdate_updated_title"),_("dlg_alert_dials_autoupdate_updated_text"))})};btns[_("dlg_button_cancel")]=function(){dlg.close()};var dlg=new Dialog({width:300,title:this._title("set_autoupdate_batch"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogSetAutoUpdate"),buttons:btns})},manageDeny:function(){var that=this;var btns={};btns[_("dlg_button_add_deny_rule")]=function(){that.deny()};btns[_("dlg_button_close")]=function(){dlg.close()};var dlg=new Dialog({width:600,title:that._title("manage_deny"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogManageDeny"),buttons:btns,onShow:function(){that.ManageDeny.refresh()}})},ManageDeny:{refresh:function(){var oldContainer=document.getElementById("denyUrlsContainer");if(!oldContainer){return}var container=oldContainer.cloneNode(true);while(container.firstChild){container.removeChild(container.firstChild)}fvdSpeedDial.Storage.denyList(function(data){for(var i=0;i!=data.length;i++){var d=data[i];var tr=document.createElement("tr");var tdSign=document.createElement("td");var divSign=document.createElement("div");var tdType=document.createElement("td");var divType=document.createElement("div");var tdActions=document.createElement("td");var divActions=document.createElement("div");divSign.textContent=d.sign;tdType.textContent=d.type=="host"?"domain":d.type;var iconEdit=document.createElement("div");var iconRemove=document.createElement("div");iconEdit.className="icon edit";iconRemove.className="icon remove";divActions.className="speedDialIcons";divActions.appendChild(iconEdit);divActions.appendChild(iconRemove);tdSign.appendChild(divSign);tdType.appendChild(divType);tdActions.appendChild(divActions);tr.appendChild(tdSign);tr.appendChild(tdType);tr.appendChild(tdActions);(function(d){iconRemove.addEventListener("click",function(){fvdSpeedDial.Storage.removeDeny(d.id)},false);iconEdit.addEventListener("click",function(){fvdSpeedDial.Dialogs.deny(d)},false)})(d);container.appendChild(tr)}oldContainer.parentNode.replaceChild(container,oldContainer)})}},importExport:function(params){var that=this;if(params.type=="export"){var btns={};btns[_("dlg_button_copy_to_clipboard")]=function(){fvdSpeedDial.Utils.copyToClipboard(document.getElementById("importExportTextArea").value);dlg.showActionMessage(_("sah_copied"))};btns[_("dlg_button_close")]=function(){dlg.close()};var dlg=new Dialog({width:400,title:that._title("export"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogExport"),buttons:btns,onShow:function(){document.getElementById("dialogImportExportContainer").setAttribute("type","export");fvdSpeedDial.Utils.Async.chain([function(callback,dataObject){fvdSpeedDial.Storage.dump(function(data){dataObject.db=data;callback()})},function(callback,dataObject){fvdSpeedDial.Prefs.dump(function(data){dataObject.prefs=data;callback()})},function(callback,dataObject){document.getElementById("importExportTextArea").value=JSON.stringify(dataObject)}])}})}else if(params.type=="import"){var btns={};var importInProcess=false;btns[_("dlg_button_import")]=function(){that.confirm(_("dlg_confirm_import_title"),_("dlg_confirm_import_text"),function(r){if(r){var importExportTextArea=document.getElementById("importExportTextArea");var text=importExportTextArea.value.trim();if(text==""){that.errorToField(importExportTextArea,document.body,_("error_must_be_filled"));return}var importData=null;try{importData=JSON.parse(text);importData.db.dials;importData.db.groups;importData.db.deny;if(!importData.prefs){throw""}}catch(ex){try{importData=fvdSpeedDial.importTranslate.translate(JSON.parse(text));if(!importData){throw""}}catch(ex){that.errorToField(importExportTextArea,document.body,_("error_wrong_import_data"));return}}var importContainer=document.getElementById("dialogImportExportContainer");importContainer.setAttribute("type","importing");var statusTextContainer=document.getElementById("importingProcessState");var groupsRelations={};var countGroupsImported=0;var countDialsImported=0;fvdSpeedDial.RuntimeStore.set("importing_in_process",true);fvdSpeedDial.Utils.Async.chain([function(callback){importInProcess=true;statusTextContainer.textContent=_("dlg_importing_step1");fvdSpeedDial.Utils.Async.chain([function(callback2){fvdSpeedDial.Storage.clearDials(callback2)},function(callback2){fvdSpeedDial.Storage.clearDeny(callback2)},function(callback2){fvdSpeedDial.Storage.clearGroups(callback2)},function(){callback()}])},function(callback){statusTextContainer.textContent=_("dlg_importing_step2");for(var k in importData.prefs){fvdSpeedDial.Prefs.set(k,importData.prefs[k])}fvdSpeedDial.Options.refreshOptionValues(function(){fvdSpeedDial.Options.applyChanges(function(){callback()})})},function(callback){statusTextContainer.textContent=_("dlg_importing_step3");if(importData.db.deny.length==0){callback();return}fvdSpeedDial.Utils.Async.arrayProcess(importData.db.deny,function(denyData,callback2){try{fvdSpeedDial.Storage.deny(denyData.type,denyData.sign,function(){callback2()})}catch(ex){callback2()}},function(){callback()})},function(callback){statusTextContainer.textContent=_("dlg_importing_step4");fvdSpeedDial.Utils.Async.arrayProcess(importData.db.groups,function(group,callback2){try{fvdSpeedDial.Storage.groupExists({name:group.name},function(exists){if(exists){callback2()}else{if(group.name&&group.position){fvdSpeedDial.Storage.groupAdd({name:group.name,position:group.position,sync:1,global_id:group.global_id},function(result){if(result.result){countGroupsImported++;groupsRelations[group.id]=result.id}callback2()})}else{callback2()}}})}catch(ex){callback2()}},function(){callback()})},function(callback){statusTextContainer.textContent=_("dlg_importing_step5");fvdSpeedDial.Utils.Async.arrayProcess(importData.db.dials,function(dial,callback2){if(dial.url&&dial.thumb_source_type&&dial.group_id&&dial.position&&groupsRelations[dial.group_id]){try{var dialData={};dial.group_id=groupsRelations[dial.group_id];if(dial.screen_maked==1){dial.screen_maked=0}fvdSpeedDial.Storage.addDial(dial,function(result){if(result.result){countDialsImported++;if(dial.thumb_source_type=="url"&&dial.thumb_url){fvdSpeedDial.ThumbMaker.getImageDataPath({imgUrl:dial.thumb_url,screenWidth:fvdSpeedDial.SpeedDial.getMaxCellWidth()},function(dataUrl){fvdSpeedDial.Storage.updateDial(result.id,{thumb:dataUrl},function(){callback2()})})}else{callback2()}}else{callback2()}})}catch(ex){callback2()}}else{callback2()}},function(){callback()})},function(){statusTextContainer.textContent=_("dlg_importing_finished").replace("%groups%",countGroupsImported).replace("%dials%",countDialsImported);importContainer.setAttribute("type","success");importInProcess=false;fvdSpeedDial.RuntimeStore.set("importing_in_process",false);fvdSpeedDial.Sync.importFinished()}])}})};btns[_("dlg_button_close")]=function(){if(!importInProcess){dlg.close()}else{fvdSpeedDial.Dialogs.alert(_("dlg_alert_wait_importing_title"),_("dlg_alert_wait_importing_text"))}};var dlg=new Dialog({width:400,title:that._title("import"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogExport"),buttons:btns,onShow:function(){document.getElementById("dialogImportExportContainer").setAttribute("type","import")},clickCallback:function(){that.hideErrorBox()},closeCallback:function(){that.hideErrorBox()}})}},viewGroup:function(host){var that=this;that.ViewGroup.currentHost=host;var btns={};btns[_("dlg_button_close")]=function(){dlg.close()};var dlg=new Dialog({width:400,title:that._title("view_group"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogViewGroup"),buttons:btns,onShow:function(){that.ViewGroup.rebuild();document.getElementById("dialogViewGroup_typeTitle").addEventListener("click",function(){fvdSpeedDial.Dialogs.ViewGroup.changeType()},false);document.getElementById("dialogViewGroup_typeUrl").addEventListener("click",function(){fvdSpeedDial.Dialogs.ViewGroup.changeType()},false)}});that.ViewGroup.currentDlg=dlg},ViewGroup:{currentHost:null,currentDlg:null,rebuild:function(){var that=this;fvdSpeedDial.Storage.MostVisited.getDataByHost(fvdSpeedDial.SpeedDial.currentGroupId(),this.currentHost,function(data){var container=document.getElementById("dialogViewGroup_urlContainer");

while(container.firstChild){container.removeChild(container.firstChild)}for(var i=0;i!=data.length;i++){var url=document.createElement("a");url.setAttribute("class","url");url.setAttribute("_url",data[i].url);url.setAttribute("href",data[i].url);url.setAttribute("_title",data[i].title);url.setAttribute("id","mostvisitedInGroupUrl_"+data[i].id);var favicon=document.createElement("img");favicon.setAttribute("src","chrome://favicon/"+data[i].url);favicon.setAttribute("width",16);var divText=document.createElement("div");divText.className="text";divText.textContent=data[i].title;var divHits=document.createElement("div");divHits.className="hits";divHits.textContent=data[i].visitCount;url.appendChild(favicon);url.appendChild(divText);url.appendChild(divHits);fvdSpeedDial.ContextMenus.assignToElem(url,"mostvisitedGroupUrl");container.appendChild(url)}document.querySelector("[name=dialogViewGroup_viewType][value="+fvdSpeedDial.Prefs.get("sd.most_visited.group_view_type")+"]").checked=true;that.changeType()})},changeType:function(){var container=document.getElementById("dialogViewGroup_urlContainer");var type=document.querySelector("[name=dialogViewGroup_viewType]:checked").value;var altType=type=="url"?"title":"url";fvdSpeedDial.Prefs.set("sd.most_visited.group_view_type",type);var elems=container.getElementsByClassName("url");for(var i=0;i!=elems.length;i++){var textItem=elems[i].getElementsByClassName("text")[0];var item=elems[i];textItem.textContent=item.getAttribute("_"+type);item.setAttribute("title",item.getAttribute("_"+altType))}}},deny:function(settings){settings=settings||{type:"host",sign:""};var that=this;var btns={};btns[_("dlg_button_deny")]=function(){var type=that.Deny.currentType();var signBox=document.getElementById("dialogDeny_sign");var sign=signBox.value;if(!sign){that.errorToField(signBox,document.body,_("error_must_be_filled"));return false}if(type=="url"){if(!fvdSpeedDial.Utils.isValidUrl(sign)){sign="http://"+sign}}if(settings.id){fvdSpeedDial.Storage.editDeny(settings.id,{sign:sign,type:type},function(result){if(result.result){dlg.close()}else{if(result.error=="deny_already_exists"){that.errorToField(signBox,document.body,_("error_already_exists"))}}})}else{fvdSpeedDial.Storage.deny(type,sign,function(result){if(result.result){dlg.close()}else{if(result.error=="deny_already_exists"){that.errorToField(signBox,document.body,_("error_already_exists"))}}})}};btns[_("dlg_button_cancel")]=function(){dlg.close()};var historyComplete=null;var dlg=new Dialog({width:400,title:settings.id?that._title("edit_deny"):that._title("deny"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogDeny"),buttons:btns,enterOnButton:_("dlg_button_deny"),clickCallback:function(){that.hideErrorBox()},closeCallback:function(){historyComplete.destroy();that.hideErrorBox()},onShow:function(){var denyHostRadio=document.getElementById("dialogDeny_denyHost");var denyURLRadio=document.getElementById("dialogDeny_denyURL");var signBox=document.getElementById("dialogDeny_sign");historyComplete=fvdSpeedDial.HistoryComplete.create(signBox);if(settings.type=="host"){denyHostRadio.setAttribute("checked",true)}else if(settings.type=="url"){denyURLRadio.setAttribute("checked",true)}signBox.setAttribute("value",settings.sign);that.Deny.changeType();document.getElementById("dialogDeny_denyHost").addEventListener("click",function(){fvdSpeedDial.Dialogs.Deny.changeType()},false);document.getElementById("dialogDeny_denyURL").addEventListener("click",function(){fvdSpeedDial.Dialogs.Deny.changeType()},false);document.getElementById("dialogDeny_sign").focus()}})},Deny:{currentType:function(){var denyHostRadio=document.getElementById("dialogDeny_denyHost");var denyURLRadio=document.getElementById("dialogDeny_denyURL");var currentType=null;if(denyHostRadio.checked){currentType="host"}else if(denyURLRadio.checked){currentType="url"}return currentType},changeType:function(){var currentType=this.currentType();var signBox=document.getElementById("dialogDeny_sign");var currUrl=signBox.value;if(currentType=="url"){if(signBox.hasAttribute("urlValue")&&signBox.getAttribute("urlValue")){currUrl=signBox.getAttribute("urlValue")}signBox.value=currUrl}else if(currentType=="host"){signBox.setAttribute("urlValue",currUrl);var host=fvdSpeedDial.Utils.parseUrl(currUrl,"host");if(!host){host=signBox.value}signBox.value=host}}},manageGroups:function(dialogParams){dialogParams=dialogParams||{};var that=this;var btns={};btns[_("dlg_button_save")]=function(){dlg.getMainButton().setAttribute("loading",1);var groups=fvdSpeedDial.Dialogs.ManageGroups.currentGroupsList();var groupIds=[];for(var i=0;i!=groups.length;i++){groupIds.push(parseInt(groups[i].id))}fvdSpeedDial.Storage.groupsList(function(currentGroups){var positionsFunction=function(){fvdSpeedDial.Utils.Async.arrayProcess(groups,function(group,arrayProcessCallback){if(group.id.toString().indexOf("new_")==0){console.log("add group",group);fvdSpeedDial.Storage.groupAdd({name:group.name,sync:group.sync,position:group.position},function(result){console.log("added group",group);if(result.result){fvdSpeedDial.Sync.addDataToSync({category:["groups","newGroups"],data:result.id,translate:"group"})}arrayProcessCallback()})}else{fvdSpeedDial.Storage.groupUpdate(group.id,{position:group.position,name:group.name,sync:group.sync},function(){fvdSpeedDial.Sync.addDataToSync({category:"groups",data:group.id,translate:"group"});arrayProcessCallback()})}},function(){fvdSpeedDial.SpeedDial.sheduleRebuildGroupsList();if(dialogParams.callback){dialogParams.callback(true)}dlg.getMainButton().setAttribute("loading",0);dlg.close()})};var groupsIdsToRemove=[];for(var i=0;i!=currentGroups.length;i++){var currentGroup=currentGroups[i];if(groupIds.indexOf(currentGroup.id)==-1){groupsIdsToRemove.push(currentGroup.id)}}if(groupsIdsToRemove.length>0){for(var i=0;i!=groupsIdsToRemove.length;i++){(function(i){fvdSpeedDial.SpeedDial.removeGroup(groupsIdsToRemove[i],function(){if(i==groupsIdsToRemove.length-1){positionsFunction()}},{noConfirmIfHaveDials:true})})(i)}}else{positionsFunction()}})};btns[_("dlg_button_cancel")]=function(){if(dialogParams.callback){dialogParams.callback(false)}dlg.close()};var leftBtns={};leftBtns[_("dlg_manage_groups_add_group")]=function(){fvdSpeedDial.Dialogs.ManageGroups.addGroup()};var dlg=new Dialog({width:400,title:that._title("manage_groups"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogManageGroups"),buttons:btns,leftButtons:leftBtns,clickCallback:function(){that.hideErrorBox()},closeCallback:function(){that.hideErrorBox()},onShow:function(){fvdSpeedDial.Storage.groupsList(function(groups){var container=document.getElementById("dialogManageGroups_groupsList");for(var i=0;i!=groups.length;i++){var dbGroup=groups[i];var group=fvdSpeedDial.Dialogs.ManageGroups.buildGroupItem(dbGroup);container.appendChild(group)}setTimeout(function(){fvdSpeedDial.Dialogs.ManageGroups.refreshGroupsListDrag()},0)})}})},ManageGroups:{newIdNum:0,buildGroupItem:function(dbGroup){var group=document.createElement("div");var textDiv=document.createElement("div");var spanName=document.createElement("span");spanName.className="groupName";spanName.textContent=dbGroup.name;var spanCount=document.createElement("span");spanCount.className="groupDialsCount";spanCount.textContent=" ("+dbGroup.count_dials+")";textDiv.appendChild(spanName);textDiv.appendChild(spanCount);textDiv.className="text";group.appendChild(textDiv);var divIcons=document.createElement("div");divIcons.className="icons";var iconRemove=document.createElement("div");iconRemove.className="iconRemove";var iconEdit=document.createElement("div");iconEdit.className="iconEdit";divIcons.appendChild(iconRemove);divIcons.appendChild(iconEdit);group.appendChild(divIcons);(function(group,dbGroup){iconRemove.addEventListener("mousedown",function(event){fvdSpeedDial.Dialogs.ManageGroups.removeFromList(group);event.stopPropagation()},false);iconEdit.addEventListener("mousedown",function(event){fvdSpeedDial.Dialogs.ManageGroups.editGroupById(dbGroup.id);event.stopPropagation()},false)})(group,dbGroup);group.id="group_"+dbGroup.id;group.setAttribute("sync",dbGroup.sync);group.className="group";fvdSpeedDial.ContextMenus.assignToElem(group,"speeddialManageGroups");return group},addGroup:function(){var currentGroups=fvdSpeedDial.Dialogs.ManageGroups.currentGroupsList();var groupsNames=[];for(var i=0;i!=currentGroups.length;i++){groupsNames.push(currentGroups[i].name)}fvdSpeedDial.Dialogs.addGroup(null,{commitToCallback:function(dialogResult){if(dialogResult.result){fvdSpeedDial.Dialogs.ManageGroups.addGroupToList(dialogResult.data)}},existsGroupsNames:groupsNames})},addGroupToList:function(dbGroup){this.newIdNum++;dbGroup.count_dials=0;dbGroup.id="new_"+this.newIdNum;var group=this.buildGroupItem(dbGroup);var container=document.getElementById("dialogManageGroups_groupsList");container.appendChild(group);this.refreshGroupsListDrag()},refreshGroupsListDrag:function(){var container=document.getElementById("dialogManageGroups_groupsList");var items=[];var els=document.querySelectorAll("#dialogManageGroups_groupsList .group");for(var i=0;i!=els.length;i++){var el=els[i];items.push(el)}fvdSpeedDial.DragLists.startDragFor(container,items,null,"group")},editGroupById:function(groupId){var currentGroups=fvdSpeedDial.Dialogs.ManageGroups.currentGroupsList();var groupsNames=[];var initData={};for(var i=0;i!=currentGroups.length;i++){if(currentGroups[i].id!=groupId){groupsNames.push(currentGroups[i].name)}else{initData=currentGroups[i]}}fvdSpeedDial.Dialogs.addGroup(groupId,{commitToCallback:function(dialogResult){if(dialogResult.result){fvdSpeedDial.Dialogs.ManageGroups.setGroup(groupId,dialogResult.data)}},existsGroupsNames:groupsNames,initData:initData})},setGroup:function(groupId,group){var groupElem=document.getElementById("group_"+groupId);var spanName=groupElem.getElementsByClassName("groupName")[0];spanName.textContent=group.name;groupElem.setAttribute("sync",group.sync)},removeFromList:function(group){var groups=group.parentNode.getElementsByClassName("group");if(groups.length==1){fvdSpeedDial.Dialogs.alert(_("dlg_alert_cannot_remove_group_title"),_("dlg_alert_cannot_remove_group_text"));return false}function hide(){group.style.webkitTransitionDuration="200ms";group.style.webkitTransitionProperty="opacity";group.style.opacity=0;group.addEventListener("webkitTransitionEnd",function(event){group.parentNode.removeChild(group)},false)}var groupId=group.getAttribute("id").replace("group_","");fvdSpeedDial.Storage.getGroup(groupId,function(group){if(group!=null){if(group.count_dials==0){hide()}else{fvdSpeedDial.Dialogs.confirm(_("dlg_confirm_remove_group_title"),_("dlg_confirm_remove_group_text").replace("%count%",group.count_dials),function(result){if(result){hide()}})}}else{hide()}})},currentGroupsList:function(){var groups=[];var elems=document.getElementById("dialogManageGroups_groupsList").getElementsByClassName("group");for(var i=0;i!=elems.length;i++){var id=elems[i].getAttribute("id").replace("group_","");var name=elems[i].getElementsByClassName("groupName")[0].textContent;var position=i+1;groups.push({id:id,name:name,position:position,sync:elems[i].getAttribute("sync")})}return groups}},setGroupNoSyncDialog:function(callback){if(_b(fvdSpeedDial.Prefs.get("sd.display_nosync_group_dialog"))){fvdSpeedDial.Dialogs.confirmCheck(_("dlg_nosync_group_title"),_("dlg_nosync_group_text"),_("dlg_dont_show_it_again"),false,function(r,state){if(r){if(state){fvdSpeedDial.Prefs.set("sd.display_nosync_group_dialog",false)}}callback(r)})}else{callback(true)}},moveDialToNoSyncGroupDialog:function(callback){fvdSpeedDial.Utils.Async.chain([function(chainCallback){fvdSpeedDial.Sync.syncAddonExists(function(exists){if(exists){chainCallback()}else{callback(true)}})},function(){if(_b(fvdSpeedDial.Prefs.get("sd.display_move_to_nosync_group_dialog"))){fvdSpeedDial.Dialogs.confirmCheck(_("dlg_move_to_nosync_group_title"),_("dlg_move_to_nosync_group_text"),_("dlg_dont_show_it_again"),false,function(r,state){if(r){if(state){fvdSpeedDial.Prefs.set("sd.display_move_to_nosync_group_dialog",false)}}callback(r)})}else{callback(true)}}])},addGroup:function(groupId,dialogParams){var btns={};var initData={};var buttonAddModifyText=_("dlg_button_add_group");if(groupId){var buttonAddModifyText=_("dlg_button_modify_group")}btns[buttonAddModifyText]=function(){var nameElem=document.getElementById("addGroup_name");var name=nameElem.value.trim();if(!name){that.errorToField(nameElem,document.body,_("error_must_be_filled"));return false}var sync=document.getElementById("addGroup_sync").checked?1:0;if(dialogParams&&dialogParams.commitToCallback){if(dialogParams.existsGroupsNames){var nameLC=name.toLowerCase();for(var i=0;i!=dialogParams.existsGroupsNames.length;i++){if(dialogParams.existsGroupsNames[i].toLowerCase()==nameLC){that.errorToField(nameElem,document.body,_("error_already_exists"));return false}}}dialogParams.commitToCallback({result:true,data:{name:name,sync:sync}});dlg.close()}else{fvdSpeedDial.Storage.groupExists({name:name,excludeIds:groupId?[groupId]:null},function(exists){if(exists){that.errorToField(nameElem,document.body,_("error_already_exists"));return false}else{if(groupId){fvdSpeedDial.Utils.Async.chain([function(chainCallback){if(sync==1||initData.sync==0){chainCallback();return}fvdSpeedDial.Dialogs.setGroupNoSyncDialog(function(set){if(set){chainCallback()}})},function(){fvdSpeedDial.Storage.groupUpdate(groupId,{name:name,sync:sync},function(){fvdSpeedDial.SpeedDial.sheduleRebuildGroupsList();dlg.close()});fvdSpeedDial.Sync.addDataToSync({category:"groups",data:groupId,translate:"group"})}])}else{fvdSpeedDial.Storage.groupAdd({name:name,sync:sync},function(result){if(result.result){fvdSpeedDial.Sync.addDataToSync({category:["groups","newGroups"],data:result.id,translate:"group"});fvdSpeedDial.SpeedDial.setCurrentGroupId(result.id);dlg.close()}})}}})}};btns[_("dlg_button_cancel")]=function(){if(dialogParams&&dialogParams.commitToCallback){dialogParams.commitToCallback({result:false})}dlg.close()};var that=this;var dlg=new Dialog({width:400,title:groupId?this._title("modify_group"):this._title("add_group"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogAddGroup"),buttons:btns,clickCallback:function(){that.hideErrorBox()},closeCallback:function(){that.hideErrorBox()},onShow:function(){if(groupId){fvdSpeedDial.Utils.Async.chain([function(chainCallback){if(dialogParams&&dialogParams.initData){initData=dialogParams.initData;chainCallback()}else{fvdSpeedDial.Storage.getGroup(groupId,function(group){initData=group;chainCallback()})}},function(){document.getElementById("addGroup_name").value=initData.name;if(initData.sync==1){document.getElementById("addGroup_sync").checked=true}}])}document.getElementById("addGroup_name").focus()},enterOnButton:buttonAddModifyText})},AddGroup:{clickSync:function(){fvdSpeedDial.Sync.syncAddonExists(function(exists){if(!exists){var cb=document.getElementById("addGroup_sync");cb.checked=!cb.checked;fvdSpeedDial.Dialogs.installFVDSync()}})}},installFVDSync:function(){var btns={};btns[_("dlg_button_close")]=function(){dlg.close()};var dlg=new Dialog({width:400,title:this._title("install_fvd_sync"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogInstallSync"),buttons:btns,enterOnButton:_("dlg_button_close")})},addDial:function(dialData,type,forceAdd,_callback){var dialId=null;type=type||"speeddial";if(type=="speeddial"&&!forceAdd&&dialData){dialId=dialData.id}if(type=="mostvisited"&&!forceAdd){dialId=dialData.id}var btns={};var that=this;var buttonAddModifyText=_("dlg_button_add_dial");if(dialId){var buttonAddModifyText=_("dlg_button_modify_dial")}function setupPickFrom(){function buildUrlsListing(urls){var listingContianer=document.createElement("div");listingContianer.className="toolTipUrlsList";urls.forEach(function(item){var u=document.createElement("div");u.className="elem";var uUrl=document.createElement("div");uUrl.className="url";var uTitle=document.createElement("div");uTitle.className="title";uTitle.textContent=item.title;uUrl.textContent=item.url;u.appendChild(uTitle);u.appendChild(uUrl);u.addEventListener("click",function(){document.getElementById("addDialog_url").value=item.url;document.getElementById("addDialog_title").value=item.title;document.getElementById("addDialog_title").removeAttribute("autotext");fvdSpeedDial.ToolTip.close()});listingContianer.appendChild(u)});return listingContianer}var pickFromTabs=document.getElementById("addDialog_pickFromOpenedTabs");var pickFromMostvisited=document.getElementById("addDialog_pickFromMostVisited");var pickFromMostPopular=document.getElementById("addDialog_pickFromMostPopular");pickFromMostPopular.addEventListener("click",function(event){that.PicsUserPics.request("country_top.php",{},function(error,data){if(error){return}var items=[];data.domains.forEach(function(domain){items.push({url:"http://"+domain,title:domain})});fvdSpeedDial.ToolTip.display(pickFromMostPopular,buildUrlsListing(items),event)})});pickFromTabs.addEventListener("click",function(event){chrome.tabs.query({},function(_tabs){var tabs=[];_tabs.forEach(function(tab){if(tab.url.indexOf("http")!==0){return}if(!tab.title){tab.title="..."}tabs.push(tab)});if(tabs.length>0){fvdSpeedDial.ToolTip.display(pickFromTabs,buildUrlsListing(tabs),event)}})});pickFromMostvisited.addEventListener("click",function(event){fvdSpeedDial.Storage.MostVisited.getData({interval:"month",type:"host",count:25},function(_tabs){var tabs=[];_tabs.forEach(function(tab){if(!tab.title){return}tabs.push(tab)});if(tabs.length>0){fvdSpeedDial.ToolTip.display(pickFromMostvisited,buildUrlsListing(tabs),event)}})})}btns[buttonAddModifyText]=function(){var backgroundUrl="";if(!document.getElementById("addDialog_image_url").hasAttribute("autoText")){backgroundUrl=document.getElementById("addDialog_image_url").value}var url=document.getElementById("addDialog_url").value.trim();var title=document.getElementById("addDialog_title").value.trim();var groupValue=document.getElementById("addDialog_group").value;var groupNameNode=document.getElementById("addDialog_groupName");var groupName=groupNameNode.value.trim();var customPreviewCheckbox=document.getElementById("addDialog_useCustomPreview");var manualPreviewRadio=document.getElementById("addDialog_useManualPreview");var autoPreviewRadio=document.getElementById("addDialog_useAutoPreview");var autoPreviewUpdateEnabled=document.getElementById("addDialog_autoupdate_preview_enable").checked;var autoPreviewUpdateInterval=parseInt(document.getElementById("addDialog_autoupdate_preview_interval").value,10);var autoPreviewUpdateIntervalType=document.getElementById("addDialog_autoupdate_preview_interval_type").value;var updateInterval="";if(!autoPreviewRadio.checked||isNaN(autoPreviewUpdateInterval)){autoPreviewUpdateEnabled=false}if(autoPreviewUpdateEnabled){updateInterval=autoPreviewUpdateInterval+"|"+autoPreviewUpdateIntervalType}var screenDelay=0;if(!url){that.errorToField(document.getElementById("addDialog_url"),document.body,_("error_must_be_filled"));return false}if(!fvdSpeedDial.Utils.isValidUrl(url)){url="http://"+url;if(!fvdSpeedDial.Utils.isValidUrl(url)){that.errorToField(document.getElementById("addDialog_url"),document.body,_("error_invalid_url"));return false}}var getScreenMethod="auto";if(customPreviewCheckbox.checked){getScreenMethod="custom"}else if(manualPreviewRadio.checked){getScreenMethod="manual"}function sdUserPicsPreviewsAfterAdd(){if(getScreenMethod=="custom"&&fvdSpeedDial.Dialogs.AddDial.pickedUserPreview){if(fvdSpeedDial.Dialogs.AddDial.pickedUserPreview.url==backgroundUrl){fvdSpeedDial.Dialogs.PicsUserPics.rate(fvdSpeedDial.Dialogs.AddDial.pickedUserPreview.id)}}}var afterTitle=function(){if(type=="speeddial"){if(groupValue==0&&!groupName){that.errorToField(groupNameNode,document.body,_("error_must_be_filled"));return false}var getGroupValue=function(callback){if(groupValue==0){fvdSpeedDial.Storage.groupExists({name:groupName},function(exists){if(exists){that.errorToField(groupNameNode,document.body,_("error_already_exists"))}else{fvdSpeedDial.Storage.groupAdd({name:groupName,sync:1},function(result){if(result.result){fvdSpeedDial.Sync.addDataToSync({category:["groups","newGroups"],data:result.id,translate:"group"});callback(result.id)}})}})}else{callback(groupValue)}};fvdSpeedDial.Storage.isDenyUrl(url,function(deny,denyDetails){if(deny){that.errorToField(document.getElementById("addDialog_url"),document.body,_("error_url_deny_"+denyDetails.deny.type))}else{fvdSpeedDial.Storage.dialExists({url:url,excludeIds:dialId?[dialId]:null},function(exists){function afterCheck(){var thumb_source_type="screen";var addDial=function(dataUrl,thumbSize,need_sync_screen){need_sync_screen=need_sync_screen?1:0;dataUrl=dataUrl||"";if(dialId){fvdSpeedDial.Storage.getDial(dialId,function(dialDataOld){getGroupValue(function(groupValue){var updateData={title:title,url:url,thumb_source_type:thumb_source_type,thumb_url:backgroundUrl,group_id:groupValue,screen_delay:screenDelay,get_screen_method:getScreenMethod,need_sync_screen:need_sync_screen,update_interval:updateInterval};if(thumbSize){updateData.thumb_width=thumbSize.width;updateData.thumb_height=thumbSize.height}if(dialDataOld.url!=url){updateData.auto_title=""}if(dialDataOld.thumb_source_type=="url"){if(thumb_source_type=="screen"){dataUrl="";updateData.screen_maked=0}}else if(thumb_source_type=="screen"){if(dialDataOld.url!=url){updateData.screen_maked=0}else if(getScreenMethod!=dialDataOld.get_screen_method){dataUrl="";updateData.screen_maked=0}else{dataUrl=dialDataOld.thumb}}else if(thumb_source_type=="local_file"){}updateData.thumb=dataUrl;fvdSpeedDial.Storage.updateDial(dialId,updateData,function(){fvdSpeedDial.Sync.addDataToSync({category:"dials",data:dialId,translate:"dial"});fvdSpeedDial.SpeedDial.sheduleFullRebuild();sdUserPicsPreviewsAfterAdd();if(_callback){_callback()}dlg.close()})})})}else{getGroupValue(function(groupValue){if(!dataUrl){var screen=document.getElementById("addDialog_previewCell");if(screen.hasAttribute("screen")){dataUrl=screen.getAttribute("screen")}}var addData={url:url,title:title,thumb_source_type:thumb_source_type,thumb_url:backgroundUrl,group_id:groupValue,thumb:dataUrl,screen_delay:screenDelay,get_screen_method:getScreenMethod,need_sync_screen:need_sync_screen,update_interval:updateInterval};if(thumbSize){addData.thumb_width=thumbSize.width;addData.thumb_height=thumbSize.height}fvdSpeedDial.Storage.addDial(addData,function(result){if(result.result){fvdSpeedDial.Sync.addDataToSync({category:["dials","newDials"],data:result.id,translate:"dial"});fvdSpeedDial.SpeedDial.justAddedId=result.id;setTimeout(function(){if(fvdSpeedDial.SpeedDial.currentDisplayType()!="speeddial"){fvdSpeedDial.SpeedDial.setCurrentDisplayType("speeddial")}if(fvdSpeedDial.SpeedDial.currentGroupId()!=groupValue){fvdSpeedDial.SpeedDial.setCurrentGroupId(groupValue)}fvdSpeedDial.SpeedDial.sheduleFullRebuild()},200)}sdUserPicsPreviewsAfterAdd();dlg.close();if(_callback){_callback()}})})}};if(backgroundUrl&&customPreviewCheckbox.checked){thumb_source_type="url";if(backgroundUrl!=fvdSpeedDial.Const.LOCAL_FILE_URL){fvdSpeedDial.ThumbMaker.getImageDataPath({imgUrl:backgroundUrl,screenWidth:fvdSpeedDial.SpeedDial.getMaxCellWidth()},function(dataUrl,thumbSize){addDial(dataUrl,thumbSize)})}else{thumb_source_type="local_file";var previewCell=document.getElementById("addDialog_previewCell");var dataUrl=previewCell.getAttribute("syncScreen");var thumbSize={width:previewCell.getAttribute("syncScreenWidth"),height:previewCell.getAttribute("syncScreenHeight")};addDial(dataUrl,thumbSize,fvdSpeedDial.Dialogs.AddDial.localFileChanged())}}else{addDial()}}if(exists&&!dialId){if(_b(fvdSpeedDial.Prefs.get("sd.display_dial_already_exists_dialog"))){that.confirmCheck(_("dlg_confirm_dial_exists_title"),_("dlg_confirm_dial_exists_text"),_("newtab_do_not_display_migrate"),false,function(result,cbResult){if(cbResult){fvdSpeedDial.Prefs.set("sd.display_dial_already_exists_dialog",false)}if(result){afterCheck()}})}else{afterCheck()}}else{afterCheck()}})}})}else if(type=="mostvisited"){if(dialId){var thumb_source_type="screen";var screen=document.getElementById("addDialog_previewCell");var modifyMostVisited=function(dataUrl,thumbSize){if(typeof dataUrl=="undefined"){if(screen.hasAttribute("screen")){dataUrl=screen.getAttribute("screen")}}dataUrl=dataUrl||"";var updateData={thumb:dataUrl,title:title,thumb_source_type:thumb_source_type,thumb_url:backgroundUrl,screen_delay:screenDelay,get_screen_method:getScreenMethod};if(thumbSize){updateData.thumb_width=thumbSize.width;updateData.thumb_height=thumbSize.height}if(thumb_source_type=="screen"&&!dataUrl){updateData.screen_maked=0}fvdSpeedDial.Storage.MostVisited.updateData(dialId,updateData,function(){fvdSpeedDial.SpeedDial.sheduleFullRebuild();sdUserPicsPreviewsAfterAdd();dlg.close()})};if(backgroundUrl&&customPreviewCheckbox.checked){thumb_source_type="url";if(backgroundUrl==fvdSpeedDial.Const.LOCAL_FILE_URL&&screen.hasAttribute("syncscreen")){thumb_source_type="local_file";backgroundUrl=screen.getAttribute("syncscreen")}fvdSpeedDial.ThumbMaker.getImageDataPath({imgUrl:backgroundUrl,screenWidth:fvdSpeedDial.SpeedDial.getMaxCellWidth()},function(dataUrl,thumbSize){modifyMostVisited(dataUrl,thumbSize)})}else{modifyMostVisited()}}}};if(document.getElementById("addDialog_title").hasAttribute("autoText")){title="";afterTitle()}else{if(!title){that.errorToField(document.getElementById("addDialog_title"),document.body,_("error_must_be_filled"));return false}afterTitle()}};btns[_("dlg_button_cancel")]=function(){dlg.close()};var historyComplete=null;fvdSpeedDial.Dialogs.AddDial.pickedUserPreview=null;var _testInputUrlValue={oldValue:"",interval:null,listener:null,start:function(){var that=this;this.interval=setInterval(function(){var value=document.getElementById("addDialog_url").value;if(value!=that.oldValue){that.oldValue=value;if(that.listener){that.listener()}}},100)},end:function(){clearInterval(this.interval)}};var dlg=new Dialog({width:414,title:dialId?this._title("modify_dial"):this._title("add_dial"),content:fvdSpeedDial.Templates.getHTML("prototype_dialogAddDial"),buttons:btns,enterOnButton:buttonAddModifyText,clickCallback:function(){that.hideErrorBox()},closeCallback:function(){_testInputUrlValue.end();if(historyComplete){historyComplete.destroy()}that.hideErrorBox()},onShow:function(){var pickLocalFile=document.querySelector("#addDialog_PickLocalFileContainer a");pickLocalFile.addEventListener("click",function(event){var text=_("bg_dialog_adddial_pick_local_file_desc");if(navigator.userAgent.toLowerCase().indexOf("windows")!=-1){text=text.replace("{examples}",_("bg_dialog_adddial_pick_local_file_desc_win"))}else{text=text.replace("{examples}",_("bg_dialog_adddial_pick_local_file_desc_linux"))}fvdSpeedDial.ToolTip.display(pickLocalFile,text,event,true);event.preventDefault()},false);_testInputUrlValue.listener=function(){setTimeout(function(){fvdSpeedDial.Dialogs.AddDial.showFastUserPics()},0)};_testInputUrlValue.start();setTimeout(function(){dlg._wrapper.setAttribute("id","addDialog_wrapper")},0);setupPickFrom();document.querySelector("#addDialogPickImages .showMoreContainer button").addEventListener("click",function(){document.getElementById("addDialog_pickUserPic").click()},false);document.getElementById("addDialog_pickUserPic").addEventListener("click",function(){var url=document.getElementById("addDialog_url").value.toLowerCase();if(url.indexOf("http")!==0){url="http://"+url}var host=fvdSpeedDial.Utils.parseUrl(url,"host");dlg.container.style.display="none";fvdSpeedDial.Dialogs.pickUserPics({host:host},function(result){dlg.container.style.display="";if(result){fvdSpeedDial.Dialogs.AddDial.setPickedUserPreview(result)}})},false);document.getElementById("addDialog_autoupdate_preview_enable").addEventListener("change",function(){fvdSpeedDial.Dialogs.AddDial.applyAutoPreviewEnabled()});if(!dialData&&type=="speeddial"){document.getElementById("addDialog_PickFromContainer").removeAttribute("hidden")}var afterAll=function(){fvdSpeedDial.Utils.setAutoTextForTextField(document.getElementById("addDialog_title"),_("dialog_add_dial_dynamic_title"));fvdSpeedDial.Utils.setAutoTextForTextField(document.getElementById("addDialog_image_url"),_("dialog_add_dial_enter_image_url"))};if(type=="speeddial"){historyComplete=fvdSpeedDial.HistoryComplete.create(document.getElementById("addDialog_url"));var fillGroups=function(selectGroup){fvdSpeedDial.Storage.groupsList(function(groups){var selectGroups=document.getElementById("addDialog_group");selectGroups.options.length=0;for(var i=0;i!=groups.length;i++){var option=document.createElement("option");option.textContent=groups[i].name;option.value=groups[i].id;selectGroups.appendChild(option)}var option=document.createElement("option");option.textContent=_("dlg_adddial_create_group");option.value=0;option.className="createNewGroup";selectGroups.appendChild(option);if(selectGroup){selectGroups.value=selectGroup}else{selectGroups.selectedIndex=0}that.AddDial.changeGroup()})};document.getElementById("addDialog_url").focus()}if(dialData){document.getElementById("addDialog_url").value=dialData.url;document.getElementById("addDialog_title").value=dialData.title;var customPreviewCheckbox=document.getElementById("addDialog_useCustomPreview");if(dialData.thumb_source_type=="url"){var isDefaultPreview=false;var select=document.getElementById("addDialog_default_image");for(var i=0;i!=select.options.length;i++){var option=select.options[i];if(option.value.indexOf(dialData.thumb_url)!=-1){isDefaultPreview=true;select.value=option.value;that.AddDial.selectDefaultPreview(select);if(select.value.indexOf("|")!=-1){var extSelect=document.getElementById("addDialog_default_image_ext");extSelect.value=dialData.thumb_url;that.AddDial.selectDefaultPreview(extSelect)}break}}if(!isDefaultPreview){document.getElementById("addDialog_image_url").value=dialData.thumb_url;that.AddDial.refreshPreview()}customPreviewCheckbox.checked=true}else if(dialData.thumb_source_type=="local_file"){document.getElementById("addDialog_image_url").value=fvdSpeedDial.Const.LOCAL_FILE_URL;customPreviewCheckbox.checked=true;document.getElementById("addDialog_previewCell").setAttribute("syncScreen",dialData.thumb);document.getElementById("addDialog_previewCell").setAttribute("syncScreenWidth",dialData.thumb_width);document.getElementById("addDialog_previewCell").setAttribute("syncScreenHeight",dialData.thumb_height);that.AddDial.refreshPreview()}else if(dialData.thumb_source_type=="screen"){if(dialData.screen_maked==1){document.getElementById("addDialog_previewCell").setAttribute("screen",dialData.thumb);that.AddDial.refreshPreview()}customPreviewCheckbox.checked=false;if(dialData.get_screen_method=="manual"){document.getElementById("addDialog_useManualPreview").checked=true}else{document.getElementById("addDialog_useAutoPreview").checked=true}}if(type=="speeddial"){fillGroups(dialData.group_id);if(dialData.update_interval){var tmp=dialData.update_interval.split("|");if(tmp.length==2){document.getElementById("addDialog_autoupdate_preview_enable").checked=true;document.getElementById("addDialog_autoupdate_preview_interval").value=tmp[0];document.getElementById("addDialog_autoupdate_preview_interval_type").value=tmp[1]}}}else if(type=="mostvisited"){var selectGroups=document.getElementById("addDialog_group");selectGroups.parentNode.parentNode.setAttribute("hidden",true);document.getElementById("addDialog_url").setAttribute("disabled",true)}afterAll()}else{var groupId=fvdSpeedDial.SpeedDial.currentGroupId();if(groupId==0){groupId=fvdSpeedDial.Prefs.get("sd.default_group");if(groupId==0||groupId==-1){fvdSpeedDial.Storage.groupsList(function(groups){if(groups.length>0){groupId=groups[0].id}fillGroups(groupId);afterAll()})}else{fillGroups(groupId);afterAll()}}else{fillGroups(groupId);afterAll()}}fvdSpeedDial.Dialogs.AddDial.refreshCustomPreviewState();document.getElementById("addDialog_title").addEventListener("focus",function(){
fvdSpeedDial.Dialogs.AddDial.focusTitle()},false);document.getElementById("addDialog_group").addEventListener("change",function(){fvdSpeedDial.Dialogs.AddDial.changeGroup()},false);var radioButtonsPreviewType=document.querySelectorAll(".addDialog_selectPreviewTypeBlock input");for(var i=0;i!=radioButtonsPreviewType.length;i++){radioButtonsPreviewType[i].addEventListener("click",function(){fvdSpeedDial.Dialogs.AddDial.refreshCustomPreviewState()},false)}document.getElementById("addDialog_uploadFile").addEventListener("change",function(){fvdSpeedDial.Dialogs.AddDial.selectLocalFile()},false);document.getElementById("addDialog_default_image").addEventListener("change",function(){fvdSpeedDial.Dialogs.AddDial.selectDefaultPreview(document.getElementById("addDialog_default_image"))},false);document.getElementById("addDialog_default_image_ext").addEventListener("change",function(){fvdSpeedDial.Dialogs.AddDial.selectDefaultPreview(document.getElementById("addDialog_default_image_ext"))},false);document.getElementById("addDialog_uploadFileContainer").addEventListener("click",function(){document.getElementById("addDialog_uploadFileContainer").getElementsByTagName("input")[0].click()},false);document.getElementById("addDialog_refreshPreview").addEventListener("click",function(){fvdSpeedDial.Dialogs.AddDial.refreshPreview()},false);that.AddDial.applyAutoPreviewEnabled()}})},AddDial:{pickedUserPreview:null,setPickedUserPreview:function(pickedUserPreview){var cb=document.getElementById("addDialog_useCustomPreview");if(!cb.checked){cb.click()}this.pickedUserPreview=pickedUserPreview;document.getElementById("addDialog_image_url").value=pickedUserPreview.url;document.getElementById("addDialog_image_url").removeAttribute("autotext");this.refreshPreview()},applyAutoPreviewEnabled:function(){var enabled=document.getElementById("addDialog_autoupdate_preview_enable").checked;var interval=document.getElementById("addDialog_autoupdate_preview_interval");var intervalType=document.getElementById("addDialog_autoupdate_preview_interval_type");if(enabled){interval.removeAttribute("disabled");intervalType.removeAttribute("disabled")}else{interval.setAttribute("disabled",1);intervalType.setAttribute("disabled",1)}},showFastUserPics:function(){var wrapper=document.getElementById("addDialog_wrapper");if(!wrapper){return}wrapper.removeAttribute("withPreview");var that=fvdSpeedDial.Dialogs;var url=document.getElementById("addDialog_url").value;var urlLower=url.toLowerCase();if(urlLower.indexOf("http://")==-1&&urlLower.indexOf("https://")==-1){url="http://"+url}var parsed=fvdSpeedDial.Utils.parseUrl(url);if(!parsed||!parsed.host){return}var tmp=parsed.host.split(".");if(tmp.length<2){return}var zone=tmp[tmp.length-1];if(zone.length<2){return}that.PicsUserPics.cancelCurrentRequests();that.PicsUserPics.request("listing.php",{p:0,order:"rating",host:parsed.host,on_page:10},function(error,data){if(error){console.log("Fail get preview pics",error);return}if(data.previews.length>0){wrapper.setAttribute("withPreview",1);document.getElementById("addDialogPickImages").scrollTop=0;var container=document.querySelector("#addDialogPickImages .picsContainer");while(container.firstChild){container.removeChild(container.firstChild)}data.previews.forEach(function(preview){var previewElem=that.PicsUserPics.buildElem(preview,{resultCallback:function(preview){fvdSpeedDial.Dialogs.AddDial.setPickedUserPreview(preview)}},{close:function(){wrapper.removeAttribute("withPreview")}});container.appendChild(previewElem)})}else{console.log("Not found previews")}})},refreshCustomPreviewState:function(){var useCustomPreview=document.getElementById("addDialog_useCustomPreview").checked;var useAutoPreview=document.getElementById("addDialog_useAutoPreview").checked;var customPreviewBlock=document.getElementById("addDialog_customPreviewBlock");var autoPreviewBlock=document.getElementById("addDialog_autoPreviewBlock");if(useCustomPreview){customPreviewBlock.removeAttribute("hidden")}else{customPreviewBlock.setAttribute("hidden",true)}if(useAutoPreview&&fvdSpeedDial.Config.AUTOUPDATE_PREVIEW_ENABLED&&fvdSpeedDial.SpeedDial.currentDisplayType()=="speeddial"){autoPreviewBlock.removeAttribute("hidden")}else{autoPreviewBlock.setAttribute("hidden",true)}},getTitle:function(callback){var link=document.getElementById("addDialog_getTitle");link.setAttribute("loading",1);link.getElementsByTagName("div")[0].textContent=_("bg_dialog_loading");var url=document.getElementById("addDialog_url").value;if(!fvdSpeedDial.Utils.isValidUrl(url)){url="http://"+url}fvdSpeedDial.Utils.getTitleForUrl(url,function(title){if(title){document.getElementById("addDialog_title").value=title;document.getElementById("addDialog_title").removeAttribute("autoText")}link.getElementsByTagName("div")[0].textContent=_("bg_dialog_adddial_click_to_get_title");link.removeAttribute("loading");if(callback){callback(title)}})},changeGroup:function(){var groupValue=document.getElementById("addDialog_group").value;var groupName=document.getElementById("addDialog_groupName").parentNode.parentNode;if(groupValue==0){groupName.removeAttribute("hidden");document.getElementById("addDialog_groupName").focus()}else{groupName.setAttribute("hidden",true)}},focusTitle:function(){try{var title=document.getElementById("addDialog_title").value;if(!title){var url=document.getElementById("addDialog_url").value;var host=fvdSpeedDial.Utils.parseUrl(url,"host");if(host){host=host.charAt(0).toUpperCase()+host.slice(1);document.getElementById("addDialog_title").value=host}}}catch(ex){}},localFileChanged:function(){return document.querySelector("#addDialog_uploadFileContainer input").getAttribute("fvdsd-changed")},selectLocalFile:function(){var that=this;try{var file=document.querySelector("#addDialog_uploadFileContainer input").files[0];if(file.type.indexOf("image/")!==0){fvdSpeedDial.Dialogs.errorToField(document.getElementById("addDialog_image_url"),document.body,_("error_not_image"))}else{document.querySelector("#addDialog_uploadFileContainer input").setAttribute("fvdsd-changed",1);var reader=new FileReader;reader.onload=function(){fvdSpeedDial.ThumbMaker.getImageDataPath({imgUrl:reader.result,screenWidth:fvdSpeedDial.SpeedDial.getMaxCellWidth()},function(dataUrl,thumbSize){var img=new Image;img.onload=function(){var previewCell=document.getElementById("addDialog_previewCell");previewCell.setAttribute("syncScreen",dataUrl);previewCell.setAttribute("syncScreenWidth",img.width);previewCell.setAttribute("syncScreenHeight",img.height);that.refreshPreview()};img.src=dataUrl;document.getElementById("addDialog_image_url").removeAttribute("autoText");document.getElementById("addDialog_image_url").value=fvdSpeedDial.Const.LOCAL_FILE_URL})};reader.readAsDataURL(file)}}catch(ex){}},refreshPreview:function(){var previewCell=document.getElementById("addDialog_previewCell");var screen=previewCell.getElementsByClassName("preview-image")[0];var backgroundUrl=document.getElementById("addDialog_image_url").value;if(backgroundUrl==fvdSpeedDial.Const.LOCAL_FILE_URL){var screen=previewCell.getElementsByClassName("preview-image")[0];previewCell.setAttribute("filled",1);fvdSpeedDial.Utils.setUrlPreview({elem:screen,size:{width:screen.offsetWidth,height:screen.offsetHeight}},{url:previewCell.getAttribute("syncScreen")})}else if(backgroundUrl){previewCell.setAttribute("filled",1);var screen=previewCell.getElementsByClassName("preview-image")[0];fvdSpeedDial.Utils.setUrlPreview({elem:screen,size:{width:screen.offsetWidth,height:screen.offsetHeight}},{url:backgroundUrl})}else{if(previewCell.hasAttribute("screen")){fvdSpeedDial.Utils.setScreenPreview(document.getElementById("addDialog_previewCell").getElementsByClassName("preview-image")[0],previewCell.getAttribute("screen"));previewCell.setAttribute("filled",1)}else{previewCell.setAttribute("filled",0);screen.style.background=""}}},selectDefaultPreview:function(fromSelect){var url=fromSelect.value;var extSelectContainer=document.getElementById("addDialog_default_image_extContainer");var extSelect=document.getElementById("addDialog_default_image_ext");var select=document.getElementById("addDialog_default_image");if(url.indexOf("|")==-1){document.getElementById("addDialog_image_url").removeAttribute("autoText");document.getElementById("addDialog_image_url").value=url;if(fromSelect!=extSelect){extSelectContainer.setAttribute("hidden",true)}this.refreshPreview()}else{var selectedText=select.options[select.selectedIndex].text;var urls=url.split("|");extSelect.options.length=0;for(var i=0;i!=urls.length;i++){extSelect.options[extSelect.options.length]=new Option(selectedText+" #"+(i+1),urls[i])}extSelectContainer.removeAttribute("hidden");this.selectDefaultPreview(extSelect)}}},_title:function(code){return _("dialog_title_"+code)}};fvdSpeedDial.Dialogs=new Dialogs;Broadcaster.onMessage.addListener(function(msg){if(msg.action=="deny:changed"){fvdSpeedDial.Dialogs.ManageDeny.refresh(msg.data)}})})();var _enMessages=null;function _(msg){var text=chrome.i18n.getMessage(msg);if(!text){text=""}return text}(function(){var Localizer=function(){};Localizer.prototype={localizeCurrentPage:function(){this.localizeElem(document)},localizeElem:function(el){var elements=el.querySelectorAll("*[msg]");for(var i=0,len=elements.length;i!=len;i++){var element=elements[i];if(element.hasAttribute("msg_target")){element.setAttribute(element.getAttribute("msg_target"),_(element.getAttribute("msg")))}else{element.innerHTML=_(element.getAttribute("msg"))}element.removeAttribute("msg")}}};this.Localizer=new Localizer}).apply(fvdSpeedDial);(function(){var el=document.createElement("div");var xhr=new XMLHttpRequest;xhr.open("GET",chrome.runtime.getURL("/templates.html"),false);xhr.send(null);el.innerHTML=xhr.responseText;fvdSpeedDial.Localizer.localizeElem(el);fvdSpeedDial.Templates={getHTML:function(id){return el.querySelector("#"+id).innerHTML},clone:function(id){return el.querySelector("#"+id).cloneNode(true)},get:function(templateName,options,cb){if(typeof options==="function"){cb=options;options={}}options=options||{};var xhr=new XMLHttpRequest;xhr.open("GET",chrome.runtime.getURL("/templates/"+templateName+".html"));xhr.onload=function(){var res=xhr.responseText;if(options.fragment){var tmp=document.createElement("template");tmp.innerHTML=res;res=tmp.content}cb(null,res)};xhr.onerror=function(err){cb(err)};xhr.send(null)},loadStyleSheet:function(location,cb){cb=cb||function(){};var link=document.createElement("link");link.setAttribute("href",location);link.setAttribute("rel","stylesheet");link.addEventListener("load",function(){cb()},false);document.head.appendChild(link)}}})();(function(){var Prefs=function(){};Prefs.prototype={_prefsPrefix:"prefs.",_changeListeners:[],_themeDefaults:{fancy:{"sd.background_url":"/images/newtab/fancy_bg.jpg","sd.background_color":"000000","sd.background_color_enabled":true,"sd.background_url_type":"parallax","sd.text.cell_title.color":"FFFFFF","sd.text.list_elem.color":"FFFFFF","sd.text.list_show_url_title.color":"FFFFFF","sd.text.list_link.color":"EEEEEE","sd.text.other.color":"FFFFFF","sd.text.cell_url.color":"FFFFFF"},standard:{"sd.background_url":"","sd.background_color":"FFFFFF","sd.background_color_enabled":true,"sd.background_url_type":"noimage","sd.text.cell_title.color":"000000","sd.text.list_elem.color":"000000","sd.text.list_show_url_title.color":"000000","sd.text.list_link.color":"0551AF","sd.text.other.color":"000000","sd.text.cell_url.color":"000000"}},_defaults:{"surfcanyon.enabled":true,"apps.opened":true,"widgets.enabled":true,"widgets.locked":true,"widgets.opened":true,"widgets.opacity":100,"widgets.bgcolor":"000000","widgets.autoscroll":false,"widgets.autoscroll.speed":1,"poweroff.enabled":false,"poweroff.hidden":false,"poweroff.password":"","poweroff.restore_email":"","poweroff.idle.interval":0,"collapsed_message.with_poweroff.display":true,"collapsed_message.without_poweroff.display":true,display_themes_message:true,"sd.no3d_first":true,"sd.global_ids_setuped":false,"sd.first_dial_page_open":true,"sd.tables_created":false,"sd.install_time":null,"sd.dont_display_rate_message":false,"sd.custom_dial_size":200,"sd.custom_dial_size_fancy":200,"sd.custom_dial_size_setuped":false,"sd.enable_dials_search":true,"sd.enable_search":true,"sd.enable_search_preview":true,"sd.synced_after_install":false,"sd.display_move_to_nosync_group_dialog":true,"sd.display_nosync_group_dialog":true,"sd.display_can_turn_off_newtab_popup":true,"sd.display_dial_already_exists_dialog":true,"sd.display_dial_borders":true,"sd.last_opened_settings":"global","sd.display_in_new_tab":true,"sd.display_superfish":false,"sd.display_mirror":true,"sd.fancy_init_min_columns":6,"sd.fancy_size_adjusted":false,"sd.display_mode":"fancy","sd.rotate_angle_max":10,"sd.display_quick_menu_and_clicks":true,"sd.dials_opacity":100,"sd.background_color":"FFFFFF","sd.background_color_enabled":false,"sd.background_url":"","sd.background_source":"url","sd.background_url_type":"noimage","sd.background_parallax_depth":30,"sd.text.cell_title.color":"000000","sd.text.cell_title.bolder":false,"sd.text.cell_title.size":"12","sd.text.cell_url.color":"888888","sd.text.cell_url.bolder":false,"sd.text.cell_url.size":"10","sd.text.list_elem.color":"000000","sd.text.list_elem.bolder":false,"sd.text.list_elem.size":"12","sd.text.list_show_url_title.color":"000000","sd.text.list_show_url_title.bolder":false,"sd.text.list_show_url_title.size":"12","sd.text.list_link.color":"0551AF","sd.text.list_link.bolder":false,"sd.text.list_link.size":"12","sd.text.other.color":"000000","sd.text.other.bolder":false,"sd.text.other.size":"12","sd.display_dial_background":true,"sd.show_urls_under_dials":true,"sd.show_icons_and_titles_above_dials":true,"sd.display_plus_cells":true,"sd.display_popular_group":true,"sd.recentlyclosed_columns":"auto","sd.scrolling":"vertical","sd.show_in_context_menu":true,"sd.disable_custom_search":false,"sd.preview_creation_delay_default":1200,"sd.main_menu_displayed":true,"sd.all_groups_limit_dials":20,"sd.enable_top_sites":true,"sd.thumbs_type":"medium","sd.top_sites_columns":"auto","sd.default_group":-1,"sd.last_opened_group":1,"sd.list_view_type":"title","sd.enable_most_visited":true,"sd.max_most_visited_records":30,"sd.thumbs_type_most_visited":"list","sd.most_visited_columns":"auto","sd.most_visited_cache_life_time":36e5,"sd.most_visited.group_view_type":"title","sd.enable_recently_closed":true,"sd.max_recently_closed_records":20,"sd.most_visited_interval":"month","sd.display_type":"last_selected","sd.last_selected_display_type":"speeddial","sd.default_open_in":"current","sd.search_bar_expanded":true,"sd.speeddial_expanded":true,"sd.mostvisited_expanded":true,"sd.recentlyclosed_expanded":true,"sd.need_to_offer_parallax":true,"sd.light_collapsed_message_show":true},dump:function(callback){var result={};for(var k in this._defaults){result[k]=this.get(k)}callback(result)},toggle:function(name){var newVal=!_b(this.get(name));this.set(name,newVal)},defaultValue:function(settingName){if(typeof this._defaults[settingName]!="undefined"){return this._defaults[settingName]}else{return null}},restore:function(settingName){if(typeof this._defaults[settingName]!="undefined"){this.set(settingName,this._defaults[settingName])}else{}},get:function(name,defaultValue){if(typeof defaultValue=="undefined"){if(typeof this._defaults[name]!="undefined"){defaultValue=this._defaults[name]}else{defaultValue=null}}var name=this._name(name);if(typeof localStorage[name]=="undefined"){return defaultValue}return localStorage[name]},sSet:function(name,value){localStorage[this._name(name)]=value},set:function(name,value){var oldValue=this.get(name);var badListeners=[];if(_r(oldValue)!=_r(value)){localStorage[this._name(name)]=value;Broadcaster.sendMessage({action:"pref:changed",name:name,value:value})}},_name:function(name){return this._prefsPrefix+name}};this.Prefs=new Prefs}).apply(fvdSpeedDial);(function(){var _HistoryComplete=function(elem){this._elem=elem;this._init()};_HistoryComplete.prototype={_elem:null,_completionContainer:null,_maxResults:25,_focusedIndex:-1,_completeElements:[],_document:null,_bodyClickListener:null,destroy:function(){try{this._completionContainer.parentNode.removeChild(this._completionContainer)}catch(ex){}},_displayed:function(){if(this._completionContainer&&this._completionContainer.getAttribute("appear")==1){return true}return false},_init:function(){this._document=this._elem.ownerDocument;var that=this;this._elem.addEventListener("blur",function(){that._hideContainer()},false);this._elem.addEventListener("keydown",function(event){if(event.keyCode==40){if(that._displayed()){that._focusedIndex++;if(that._focusedIndex>=that._completeElements.length){that._focusedIndex=0}that._refreshFocus();event.stopPropagation();event.preventDefault();that._applyFocused(true)}else{var v=that._elem.value.trim();if(!v){v=null}that._searchInHistory(v,function(results){if(results.set.length==0){that._hideContainer()}else{that._displayContainer(results.set)}})}}else if(event.keyCode==38){if(that._displayed()){that._focusedIndex--;if(that._focusedIndex<0){that._focusedIndex=that._completeElements.length-1}that._refreshFocus();event.stopPropagation();event.preventDefault();that._applyFocused(true)}}else if(event.keyCode==13){if(that._displayed()&&that._focusedIndex!=-1){that._applyFocused();event.stopPropagation();event.preventDefault()}}});this._elem.addEventListener("keyup",function(event){if([13,38,40].indexOf(event.keyCode)!=-1){event.stopPropagation();return}var text=that._elem.value.trim();if(!text){that._hideContainer()}else{that._searchInHistory(text,function(results){if(results.set.length==0){that._hideContainer()}else{that._displayContainer(results.set)}})}})},_focusElement:function(index){this._focusedIndex=index;this._refreshFocus()},_dropElementsFocus:function(){this._focusedIndex=-1;this._refreshFocus()},_applyFocused:function(preventHide){try{var focused=this._completeElements[this._focusedIndex];var url=focused.getAttribute("suggestion");this._elem.value=url;if(!preventHide){this._hideContainer()}}catch(ex){}},_refreshFocus:function(){var focusedElem=null;for(var i=0;i!=this._completeElements.length;i++){if(this._focusedIndex==i){this._completeElements[i].setAttribute("focused",1);focusedElem=this._completeElements[i]}else{this._completeElements[i].removeAttribute("focused")}}if(focusedElem){var visbleStart=this._getContainer().scrollTop;var visibleEnd=visbleStart+this._getContainer().offsetHeight;var needScrollDelta=0;var startElem=focusedElem.offsetTop;var endElem=startElem+focusedElem.offsetHeight;if(endElem>visibleEnd){needScrollDelta=endElem-visibleEnd}if(startElem<visbleStart){needScrollDelta=startElem-visbleStart}if(needScrollDelta!=0){this._getContainer().scrollTop+=needScrollDelta}}},_searchInHistory:function(query,callback){var that=this;fvdSpeedDial.HistoryComplete.searchInHistory(query,that._maxResults,function(results){callback({query:query,set:results})})},_getContainer:function(){if(this._completionContainer==null){this._completionContainer=this._document.createElement("div");this._completionContainer.className="historyComplete";var elemPos=fvdSpeedDial.Utils.getOffset(this._elem);this._completionContainer.style.left=elemPos.left+"px";this._completionContainer.style.top=elemPos.top+this._elem.offsetHeight+"px";this._completionContainer.style.width=this._elem.offsetWidth-2+"px";this._completionContainer.setAttribute("appear",0);this._document.body.appendChild(this._completionContainer)}return this._completionContainer},_displayContainer:function(results){var that=this;that._focusedIndex=-1;var tmp=this._getContainer().cloneNode(true);while(tmp.firstChild){tmp.removeChild(tmp.firstChild)}this._completeElements=[];for(var i=0;i!=results.length;i++){var favicon=this._document.createElement("img");favicon.setAttribute("src","chrome://favicon/"+results[i].url);var elem=this._document.createElement("div");elem.className="elem";var urlDiv=this._document.createElement("div");urlDiv.className="url";var titleDiv=this._document.createElement("div");titleDiv.className="title";urlDiv.innerHTML=results[i].url;titleDiv.appendChild(favicon);var titleTextDiv=this._document.createElement("div");titleTextDiv.innerHTML=results[i].title;titleDiv.appendChild(titleTextDiv);elem.appendChild(titleDiv);elem.appendChild(urlDiv);elem.setAttribute("suggestion",results[i].rawurl);(function(i){elem.addEventListener("mousedown",function(){that._applyFocused()},false);elem.addEventListener("mouseover",function(){that._focusElement(i)},false);elem.addEventListener("mouseout",function(){that._dropElementsFocus()},false)})(i);this._completeElements.push(elem);tmp.appendChild(elem)}var oldContainer=this._getContainer();oldContainer.parentNode.replaceChild(tmp,oldContainer);this._completionContainer=tmp;tmp.setAttribute("appear",1);if(!this._bodyClickListener){this._bodyClickListener=function(){that._hideContainer()};this._document.body.addEventListener("click",this._bodyClickListener,false)}},_hideContainer:function(){this._getContainer().setAttribute("appear",0);if(this._bodyClickListener){this._document.body.removeEventListener("click",this._bodyClickListener);this._bodyClickListener=null}}};var HistoryComplete=function(){};HistoryComplete.prototype={get _cache(){var c=localStorage["historycomplete:history_cache"];if(c&&typeof c=="string"){c=JSON.parse(c)}c=c||null;return c},set _cache(v){localStorage["historycomplete:history_cache"]=JSON.stringify(v)},_maxCacheRecords:2e3,create:function(elem){this.clearHistoryCache();return new _HistoryComplete(elem)},clearHistoryCache:function(){this._cache=null},getHistory:function(callback){var that=this;if(this._cache==null){chrome.history.search({text:"",maxResults:that._maxCacheRecords*2,startTime:0,endTime:(new Date).getTime()},function(_results){var results=[];for(var i=0;i!=_results.length&&results.length<that._maxCacheRecords;i++){var r=_results[i];var urllower=r.url.toLowerCase();if(urllower.indexOf("chrome")==0||urllower.indexOf("file:///")===0||urllower.indexOf("data:")===0){continue}var host="";try{host=fvdSpeedDial.Utils.parseUrl(urllower,"host").replace(/^www\./,"")}catch(ex){}results.push({url:r.url,title:r.title,_lurl:urllower,_ltitle:r.title.toLowerCase(),host:host,visitCount:r.visitCount})}results.sort(function(a,b){return b.visitCount-a.visitCount});that._cache=results;callback(results)})}else{callback(this._cache)}},searchInHistory:function(query,maxResults,callback){this.getHistory(function(data){var results=[];if(query==null){for(var i=0;i!=data.length&&results.length<maxResults;i++){results.push({url:data[i].url,title:data[i].title,rawurl:data[i].url})}callback(results);return}query=query.toLowerCase();var queryHost=query;queryHost=queryHost.replace(/^https:\/\//,"").replace(/^http:\/\//,"").replace(/www\./,"");var preMatches=[];for(var i=0;i!=data.length;i++){var points=0;var foundByQueryHost=false;if(data[i]._lurl.indexOf(query)!=-1){points=1;if(data[i].host&&data[i].host.indexOf(query)===0){points+=1}}else if(data[i]._ltitle.indexOf(query)!=-1){points=1}else if(data[i].host.indexOf(queryHost)==0){points=1;foundByQueryHost=true}if(points){var item={};item.rawurl=data[i].url;item.points=points;item.visitCount=data[i].visitCount;if(foundByQueryHost){item.title=data[i].title;item.url=data[i].url.replace(new RegExp("^(https?://(?:www.)?)("+queryHost+")","ig"),function(full,pre,match){return pre+"<b>"+match+"</b>"})}else{item.url=data[i].url.replace(new RegExp(query,"ig"),function(match){return"<b>"+match+"</b>"});item.title=data[i].title.replace(new RegExp(query,"ig"),function(match){return"<b>"+match+"</b>"})}preMatches.push(item)}}preMatches.sort(function(a,b){if(b.points==a.points){return b.visitCount-a.visitCount}return b.points-a.points});results=preMatches.slice(0,maxResults);callback(results)})}};this.HistoryComplete=new HistoryComplete}).apply(fvdSpeedDial);(function(){fvdSpeedDial.ThumbMaker={getImageDataPath:function(params,cb){chrome.runtime.sendMessage({action:"thumbmaker:getimagedatapath",params:params},function(res){cb(res.imgUrl,res.size)})},screenTab:function(params){chrome.runtime.sendMessage({action:"thumbmaker:screentab",params:params})}}})();(function(){fvdSpeedDial.Sync={addDataToSync:function(params,cb){var req={action:"sync:adddatatosync",params:params};if(cb){req.wantResponse=true}chrome.runtime.sendMessage(req,function(){if(cb){cb()}})},removeSyncData:function(params,cb){cb=cb||function(){};chrome.runtime.sendMessage({action:"sync:removesyncdata",params:params},function(){cb()})},isActive:function(cb){chrome.runtime.sendMessage({action:"sync:isactive"},function(active){cb(active)})},hasDataToSync:function(cb){chrome.runtime.sendMessage({action:"sync:hasdatatosync"},function(has){cb(has)})},startSync:function(type,cb){cb=cb||function(){};chrome.runtime.sendMessage({action:"sync:start",type:type},cb)},syncAddonOptionsUrl:function(cb){chrome.runtime.sendMessage({action:"sync:addonoptionsurl"},cb)},importFinished:function(){chrome.runtime.sendMessage({action:"sync:importfinish"})},syncAddonExists:function(cb){chrome.runtime.sendMessage({action:"sync:syncaddonexists"},cb)}}})();fvdSpeedDial.RuntimeStore=new function(){var PREFIX="__runtime_storage:";for(var k in localStorage){if(k.indexOf(PREFIX)===0){delete localStorage[k]}}function _key(k){return PREFIX+k}this.set=function(k,v){localStorage[_key(k)]=JSON.stringify({value:v,type:typeof v});Broadcaster.sendMessage({action:"runtimestore:itemchanged",name:k,value:v})};this.get=function(k){var t=localStorage[_key(k)];if(!t){return}t=JSON.parse(t);var v=t.value;switch(t){case"boolean":v=v==="true";break;case"number":v=parseInt(v,10);break}return v}};fvdSpeedDial.PremiumForShare=new function(){function isAuthorizedOnServer(cb){var xhr=new XMLHttpRequest;xhr.open("POST","http://everhelper.me/shareforpremium/can.php");xhr.onload=function(){var resp=JSON.parse(xhr.responseText);if(!resp.can){cb(false)}else{cb(true)}};xhr.send(JSON.stringify({action:"user:authstate"}))}this.canDisplay=function(params,cb){if(typeof params=="function"){cb=params;params={}}if(document.location.hash=="#premiumforshare"){return cb(true)}if(!params.ignoreDisplayed&&fvdSpeedDial.Prefs.get("premiumforshare.displayed")){return}var installTime=parseInt(fvdSpeedDial.Prefs.get("sd.install_time"));if((new Date).getTime()-installTime<3600*24*7*1e3){return cb(false)}fvdSpeedDial.Sync.syncAddonExists(function(exists){if(!exists){return cb(false)}isAuthorizedOnServer(function(authorized){if(!authorized){return cb(false)}var introductionOverlay=document.getElementById("introductionOverlay");if(introductionOverlay&&introductionOverlay.hasAttribute("appear")){return cb(false)}cb(true)})})}};(function(){var ChromeThemeClient=function(){var _theme=null;function displayChangeBgWindow(themeId){chrome.runtime.sendMessage({action:"chrometheme:getthemedata",themeId:themeId},function(theme){_theme=theme;fvdSpeedDial.SpeedDialMisc.showOptions("offerAdjustBgToTheme",null,null,{top:20,left:document.body.clientWidth/2-document.getElementById("offerAdjustBgToTheme").offsetWidth/2},true);document.getElementById("themeBackgroundAdjustPreview").setAttribute("src",theme.thumbUrl)})}function _onThemeBgAvailable(themeId){displayChangeBgWindow(themeId)}this.setPrefsForCurrentAppliedTheme=function(){chrome.runtime.sendMessage("chrometheme:setprefsforcurrentappliedtheme")};chrome.runtime.onMessage.addListener(function(msg){if(msg.action=="chrometheme:themebgavailable"){_onThemeBgAvailable(msg.themeId)}});window.addEventListener("load",function(){var btnApply=document.getElementById("applyThemeBg");var btnCancel=document.getElementById("cancelThemeBg");var thumb=document.getElementById("themeBackgroundAdjustPreview");var thumbContainer=document.getElementById("themeBackgroundAdjustPreviewContainer");if(btnApply){btnApply.addEventListener("click",function(){btnApply.setAttribute("hidden",true);btnCancel.setAttribute("hidden",true);thumbContainer.setAttribute("loading",1);chrome.runtime.sendMessage({action:"chrometheme:usebg",theme:_theme},function(){fvdSpeedDial.SpeedDial.refreshBackground();fvdSpeedDial.SpeedDialMisc.hideOptions();setTimeout(function(){thumbContainer.removeAttribute("loading");btnApply.removeAttribute("hidden");btnCancel.removeAttribute("hidden")},500)})})}if(btnCancel){btnCancel.addEventListener("click",function(){chrome.runtime.sendMessage({action:"chrometheme:donotshowcurrentthemeoffer"});fvdSpeedDial.SpeedDialMisc.hideOptions()})}if(btnApply&&btnCancel){chrome.runtime.sendMessage({action:"chrometheme:needofferthemebg"},function(resp){if(resp.need){setTimeout(function(){displayChangeBgWindow(resp.themeId)},3e3)}})}})};fvdSpeedDial.ChromeThemeClient=new ChromeThemeClient})();(function(){var Roller=function(){};var _Roller=function(elem,elemWidth){this._elem=elem;this.elemWidth=elemWidth};_Roller.prototype={_elem:null,rollTo:function(itemNumber){var that=this;var firstNode=this._elem.querySelector("div:first-child");var width=this.elemWidth||firstNode.offsetWidth;var offset=-itemNumber*width;firstNode.style.marginLeft=offset+"px"}};Roller.prototype={create:function(elem,elemWidth){return new _Roller(elem,elemWidth)}};this.Roller=new Roller}).apply(fvdSpeedDial);(function(){const CUSTOM_BG_URL="<customFile>";const ROLLER_ELEM_WIDTH=615;const DONATE_FRAME_URL="https://everhelper.me/paypal-donate/donate.php";var Options=function(){};Options.prototype={_roller:null,_settingsTypesIndexes:{global:0,speeddial:1,mostvisited:2,recentlyclosed:3,bg:4,fonts:5,sync:6,poweroff:7,widgets:8},_typesButtons:{global:"settings",speeddial:"speedDial",mostvisited:"mostVisited",recentlyclosed:"recentlyClosed",bg:"sdBackground",fonts:"sdFontColors",sync:"sdSync",poweroff:"sdPowerOff",widgets:"sdWidgets"},turnOffAutoUpdateGlobally:function(){fvdSpeedDial.Dialogs.confirm(_("dlg_confirm_turn_off_autoupdate_globally_title"),_("dlg_confirm_turn_off_autoupdate_globally_text"),function(allow){if(allow){fvdSpeedDial.Storage.turnOffAutoUpdateGlobally(function(){fvdSpeedDial.Dialogs.alert(_("dlg_alert_dials_autoupdate_updated_title"),_("dlg_alert_dials_autoupdate_updated_text"))})}})},setAutoUpdateGlobally:function(){fvdSpeedDial.Dialogs.setAutoUpdateBatch()},setAutoPreviewGlobally:function(){fvdSpeedDial.Dialogs.confirm(_("dlg_confirm_set_auto_preview_global_title"),_("dlg_confirm_set_auto_preview_global_text"),function(allow){if(allow){fvdSpeedDial.Storage.setAutoPreviewGlobally({},function(){fvdSpeedDial.Dialogs.alert(_("dlg_alert_set_auto_preview_global_title"),_("dlg_alert_set_auto_preview_global_text"))})}})},refreshThemeSpecials:function(){var notActiveOptionsForFancyStyle=["show_urls_under_dials","show_icons_and_titles_above_dials","display_quick_menu_and_clicks","scrollSelect"];var notActiveForStandardStyle=[];if(document.getElementById("themeSelect").value=="fancy"){notActiveOptionsForFancyStyle.forEach(function(option){document.getElementById(option).setAttribute("disabled",1)});notActiveForStandardStyle.forEach(function(option){document.getElementById(option).removeAttribute("disabled")})}else{notActiveOptionsForFancyStyle.forEach(function(option){document.getElementById(option).removeAttribute("disabled")});notActiveForStandardStyle.forEach(function(option){document.getElementById(option).setAttribute("disabled",1)})}},refreshImportingButtons:function(){var buttonImport=document.getElementById("importExport_import");var buttonExport=document.getElementById("importExport_export");if(fvdSpeedDial.RuntimeStore.get("importing_in_process")){buttonImport.setAttribute("disabled",true);buttonExport.setAttribute("disabled",true)}else{buttonImport.removeAttribute("disabled");buttonExport.removeAttribute("disabled")}},runtimeStoreChangeCallback:function(key){if(key=="importing_in_process"){fvdSpeedDial.Options.refreshImportingButtons()}},destroy:function(){},init:function(){this.refreshImportingButtons();var that=this;this._roller=fvdSpeedDial.Roller.create(document.getElementById("rollerContent"),ROLLER_ELEM_WIDTH);

this._listenOptions();this.refreshOptionValues();chrome.tabs.onActiveChanged.addListener(function(tabId){chrome.tabs.getCurrent(function(tab){if(tab.id==tabId){that.refreshOptionValues()}})});Broadcaster.onMessage.addListener(function(msg){if(msg.action=="runtimestore:itemchanged"){that.runtimeStoreChangeCallback(msg.name)}});this.Tabs.init();function changeCDSize(){var cdRange=document.getElementById("cdSizeRange_"+document.getElementById("themeSelect").value);var width=cdRange.value;var height=Math.round(width/fvdSpeedDial.SpeedDial._cellsSizeRatio);document.getElementById("customDialSizePreview").textContent=width+"x"+height}changeCDSize();var options=document.getElementById("themeSelect").options;for(var i=0;i!=options.length;i++){document.getElementById("cdSizeRange_"+options[i].value).addEventListener("change",changeCDSize,false)}function refreshParallaxStrengthPreviewValue(){document.querySelector("#bg_parallaxDepthContainer .value").textContent=document.querySelector("#bg_parallaxDepth").value+"%"}document.querySelector("#bg_parallaxDepth").addEventListener("change",function(){refreshParallaxStrengthPreviewValue();that.refreshBg()},false);refreshParallaxStrengthPreviewValue();function refreshWidgets(){var enabled=document.querySelector('[sname="widgets.enabled"]').checked;var els=document.querySelectorAll("#widgetsSettings input");for(var i=0;i!=els.length;i++){if(els[i].getAttribute("sname")=="widgets.enabled"){continue}if(enabled){els[i].removeAttribute("disabled")}else{els[i].setAttribute("disabled",true)}}if(!enabled){return}try{var input=document.getElementById("widgetsAutoScrollSpeed");if(document.getElementById("enableWidgetsAutoscroll").checked){input.removeAttribute("disabled")}else{input.setAttribute("disabled",true)}}catch(ex){}}refreshWidgets();try{document.getElementById("enableWidgetsAutoscroll").addEventListener("click",function(){refreshWidgets()},false);document.querySelector('[sname="widgets.enabled"]').addEventListener("click",function(){refreshWidgets()},false)}catch(ex){}this.refreshBgSource();var hash=document.location.hash;var setType;if(hash){if(hash=="#setup-custom-size"){this.Tabs.tabs[0].setActiveTab(1);setTimeout(function(){document.getElementById("customDialSizeWrapper").setAttribute("highlight",1)},0)}else if(hash=="#display-in-new-tab"){this.Tabs.tabs[0].setActiveTab(1);document.getElementById("displayInNewTabLabel").className+=" highlight"}else if(hash=="#sync"){setType="sync"}else if(hash=="#poweroff"){setType="poweroff"}else if(hash=="#widgets"){setType="widgets"}}else{var lastType=fvdSpeedDial.Prefs.get("sd.last_opened_settings");if(lastType=="sync"){this.syncOptionsOpen(true)}else{setType=lastType}}if(setType){that.setType(setType)}this.displayActualSizeSetupRange();document.getElementById("themeSelect").addEventListener("change",function(){that.refreshThemeSpecials();that.displayActualSizeSetupRange();changeCDSize()},false);this.refreshThemeSpecials();var els=document.querySelectorAll("[enteron]");for(var i=0;i!=els.length;i++){(function(el){el.addEventListener("keypress",function(event){if(event.keyCode==13){document.getElementById(el.getAttribute("enteron")).click()}},false)})(els[i])}document.getElementById("bg_imageURL").addEventListener("input",function(){that.bgDeactivateColor()},false);fvdSpeedDial.PremiumForShare.canDisplay({ignoreDisplayed:true},function(can){if(!can){return}var btnContainer=document.getElementById("premiumForShareButton");btnContainer.style.display="block";setTimeout(function(){btnContainer.style.opacity=1},100);btnContainer.querySelector("button").addEventListener("click",function(){chrome.tabs.create({url:chrome.runtime.getURL("newtab.html")+"#premiumforshare",active:true})},false)});this._changeOption(document.querySelector('[sname="sd.display_dial_background"]'),{showApply:false});if(fvdSpeedDial.Donate.canShow()){var startDonateButton=document.querySelector("#startDonateButton");var donateContainer=document.querySelector("#donate-container");startDonateButton.setAttribute("show",1);document.querySelector("#donate-container .close-donate").addEventListener("click",function(){donateContainer.removeAttribute("show");setTimeout(function(){donateContainer.setAttribute("hidden",true)},200)},false);startDonateButton.addEventListener("click",function(){donateContainer.removeAttribute("hidden");var donateFrame=donateContainer.querySelector("iframe");donateFrame.setAttribute("src",DONATE_FRAME_URL);donateFrame.addEventListener("load",function _dnFrameLoadListener(){donateFrame.removeEventListener("load",_dnFrameLoadListener);donateContainer.setAttribute("show",1)},false)},false)}},bgDeactivateColor:function(){document.getElementById("bg_useColor").checked=false},bgRestoreDefault:function(){var value;var currentTheme=document.getElementById("themeSelect").value;if(currentTheme=="fancy"){document.getElementById("bg_color").value=fvdSpeedDial.Prefs._themeDefaults["fancy"]["sd.background_color"];document.getElementById("bg_useColor").checked=fvdSpeedDial.Prefs._themeDefaults["fancy"]["sd.background_color_enabled"];document.getElementById("bg_imageURL").value=fvdSpeedDial.CSS.getFancyBackgroundUrl();document.getElementById("bg_imageType").value=fvdSpeedDial.Prefs._themeDefaults["fancy"]["sd.background_url_type"]}else if(currentTheme=="standard"){document.getElementById("bg_color").value=fvdSpeedDial.Prefs._themeDefaults["standard"]["sd.background_color"];document.getElementById("bg_useColor").checked=value=fvdSpeedDial.Prefs._themeDefaults["standard"]["sd.background_color_enabled"];document.getElementById("bg_imageType").value=fvdSpeedDial.Prefs._themeDefaults["standard"]["sd.background_url_type"]}this.refreshBgViewType();this.bgLoadAndPreview();this._changeOption(document.getElementById("bg_color"))},selectLocalBackground:function(){var that=this;try{var file=document.getElementsByClassName("uploadButton")[0].getElementsByTagName("input")[0].files[0];if(file.type.indexOf("image/")!==0){}else{var reader=new FileReader;reader.onload=function(){var urlField=document.getElementById("bg_imageURL");urlField.setAttribute("localFileContents",reader.result);urlField.value=CUSTOM_BG_URL;that._changeOption(urlField);that.refreshBg();that.bgDeactivateColor()};reader.readAsDataURL(file)}}catch(ex){}},displayActualSizeSetupRange:function(){var options=document.getElementById("themeSelect").options;var selected=document.getElementById("themeSelect").value;for(var i=0;i!=options.length;i++){if(options[i].value==selected){document.getElementById("cdSizeRange_"+options[i].value).style.display=""}else{document.getElementById("cdSizeRange_"+options[i].value).style.display="none"}}},currentBgSource:function(){return"url";var currentSource=document.querySelector("input[name=backgroundSource]:checked").value;return currentSource},refreshBgSource:function(){var currentSource=this.currentBgSource();var backgroundUrlContainer=document.getElementById("bg_imageURL");if(currentSource=="url"){backgroundUrlContainer.removeAttribute("disabled")}else{backgroundUrlContainer.setAttribute("disabled",true)}},Tabs:{tabs:[],tabsA:{},_createInstance:function(tabsBox){var TabBox=function(tabsBox){function tabsContent(){return tabsBox.getElementsByClassName("tabContent")}function tabsHeads(){return tabsBox.getElementsByClassName("tabHead")}function setActiveTab(tabNum){var heads=tabsHeads();var contents=tabsContent();for(var i=0;i!=heads.length;i++){if(i==tabNum){heads[i].setAttribute("active",1)}else{heads[i].removeAttribute("active",1)}}for(var i=0;i!=contents.length;i++){if(i==tabNum){contents[i].style.display="block"}else{contents[i].style.display="none"}}}this.setActiveTab=function(tabNum){setActiveTab(tabNum)};var heads=tabsHeads();for(var i=0;i!=heads.length;i++){(function(i){heads[i].addEventListener("click",function(event){if(event.button!=0){return}setActiveTab(i)},false)})(i)}setActiveTab(0)};return new TabBox(tabsBox)},init:function(){var tabs=document.getElementsByClassName("tabs");for(var i=0;i!=tabs.length;i++){var inst=this._createInstance(tabs[i]);this.tabs.push(inst);if(tabs[i].hasAttribute("id")){this.tabsA[tabs[i].getAttribute("id")]=inst}}}},toGetSatisfaction:function(){window.open("https://getsatisfaction.com/fvd_suite/topics/")},openDonateMessage:function(event){fvdSpeedDial.ToolTip.display(document.getElementsByClassName("buttonBig sdDonate")[0],document.getElementById("donateMessageContent").innerHTML,event)},openGetSatisfactionSuggestions:function(){var button=document.getElementsByClassName("buttonBig sdGetSatisfaction")[0];var offset=fvdSpeedDial.Utils.getOffset(button);var menu=document.getElementById("getSatisfactionSuggestSelect");menu.setAttribute("active",1);menu.style.left=offset.left-button.offsetWidth+"px";menu.style.top=offset.top+"px";function close(){menu.removeAttribute("active");menu.style.left="";menu.style.top="";document.removeEventListener("click",close,false)}setTimeout(function(){document.addEventListener("click",close,false)},0)},rebuildGroupsList:function(callback){fvdSpeedDial.Storage.groupsList(function(groups){var container=document.getElementById("speeddial_defaultGroup");container.options.length=0;var optionLastUsedGroup=new Option(_("newtab_last_used_group"),-1);optionLastUsedGroup.className="lastUsedGroup";container.options[container.options.length]=optionLastUsedGroup;container.options[container.options.length]=new Option(_("newtab_popular_group_title"),0);for(var i=0;i!=groups.length;i++){container.options[container.options.length]=new Option(fvdSpeedDial.Utils.cropLength(groups[i].name,20),groups[i].id)}container.value=fvdSpeedDial.Prefs.get("sd.default_group");if(callback){callback()}})},close:function(){document.location="newtab.html"},setType:function(type){var page=document.getElementById(type+"Settings");var bottomButtons=document.querySelector(".bottomButtons");bottomButtons.removeAttribute("hidden");if(page){if(page.getAttribute("data-no-buttons")==="1"){bottomButtons.setAttribute("hidden",1)}}fvdSpeedDial.Prefs.set("sd.last_opened_settings",type);var index=this._settingsTypesIndexes[type];this._roller.rollTo(index);var buttons=document.getElementsByClassName("buttonBig");for(var i=0;i!=buttons.length;i++){buttons[i].setAttribute("active",0)}var button=document.getElementsByClassName(this._typesButtons[type])[0];button.setAttribute("active",1)},applyChanges:function(applyChangesCallback){var settedOptions=[];var options=document.querySelectorAll("[sname]");for(var i=0;i!=options.length;i++){var name=options[i].getAttribute("sname");if(settedOptions.indexOf(name)!=-1){continue}settedOptions.push(name);fvdSpeedDial.Prefs.set(name,this._getOptionValue(options[i]))}var imageUrl=document.getElementById("bg_imageURL").value;var imageType=document.getElementById("bg_imageType").value;var applyChangesButton=document.getElementById("applyChangesButton");applyChangesButton.setAttribute("loading",1);var doneCallback=function(){document.getElementById("mainContainer").setAttribute("havechanges",0);applyChangesButton.setAttribute("loading",0);document.getElementById("closeButton").setAttribute("active",1);if(applyChangesCallback){applyChangesCallback()}};if(imageUrl&&imageType!="noimage"){var dataUrl="";fvdSpeedDial.Utils.Async.chain([function(chainCallback){if(imageUrl==CUSTOM_BG_URL){dataUrl=document.getElementById("bg_imageURL").getAttribute("localFileContents");chainCallback()}else{fvdSpeedDial.Utils.imageUrlToDataUrl(imageUrl,function(du){if(!du){du=""}dataUrl=du;chainCallback()})}},function(){fvdSpeedDial.Storage.setMisc("sd.background",dataUrl,function(){doneCallback()})}])}else{doneCallback()}},refreshBgViewType:function(){var parallaxDepthContainer=document.getElementById("bg_parallaxDepthContainer");parallaxDepthContainer.style.display="none";var imageType=document.getElementById("bg_imageType").value;document.getElementById("bg_UrlContainer").style.display=imageType=="noimage"?"none":"block";if(imageType==="parallax"){parallaxDepthContainer.style.display="block"}this.refreshBg()},bgLoadAndPreview:function(){var btn=document.getElementById("btnLoadAndPreview");btn.setAttribute("loading",1);var that=this;that.refreshBg(function(){btn.setAttribute("loading",0)})},refreshBg:function(callback){var elem=document.getElementById("backgroundPreview");var url=null;switch(this.currentBgSource()){case"url":var urlField=document.getElementById("bg_imageURL");url=urlField.value;if(url==CUSTOM_BG_URL){url=urlField.getAttribute("localFileContents")}break;case"theme":url=fvdSpeedDial.Background.CURRENT_CHROME_THEME_BACKGROUND_URL;break;case"local_file":break}var bgData={color:document.getElementById("bg_color").value,useColor:document.getElementById("bg_useColor").checked,imageUrl:url,imageType:document.getElementById("bg_imageType").value,adaptiveSize:{width:window.screen.width,height:window.screen.height},callback:callback,parallaxDepth:document.getElementById("bg_parallaxDepth").value};fvdSpeedDial.Background.setToElem(bgData,elem)},refreshOptionValues:function(callback){var that=this;var options=document.querySelectorAll("[sname]");for(var i=0;i!=options.length;i++){var option=options[i];this._setOptionVal(option,fvdSpeedDial.Prefs.get(option.getAttribute("sname")))}fvdSpeedDial.Utils.Async.chain([function(chainCallback){var bgUrlField=document.getElementById("bg_imageURL");if(bgUrlField.value==CUSTOM_BG_URL){fvdSpeedDial.Storage.getMisc("sd.background",function(data){bgUrlField.setAttribute("localFileContents",data);chainCallback()})}else{chainCallback()}},function(){that.refreshBgViewType();that._refreshEnableTypes();that.rebuildGroupsList(callback)}]);this.refreshThemeSpecials()},fontsRestoreDefaults:function(){var defaultValues={fancy:{"sd.text.cell_title.color":"FFFFFF","sd.text.list_elem.color":"FFFFFF","sd.text.list_link.color":"EEEEEE","sd.text.cell_url.color":"888888","sd.text.list_show_url_title.color":"FFFFFF","sd.text.other.color":"FFFFFF"}};var themeName=document.getElementById("themeSelect").value;var elems=document.querySelectorAll("#fontsSettings [sname]");for(var i=0;i!=elems.length;i++){var elem=elems[i];var settingName=elem.getAttribute("sname");var setV=null;try{setV=defaultValues[themeName][settingName]}catch(ex){}if(setV===null||typeof setV=="undefined"){setV=fvdSpeedDial.Prefs.defaultValue(settingName)}this._setOptionVal(elem,setV)}document.getElementById("mainContainer").setAttribute("havechanges",1);document.getElementById("closeButton").setAttribute("active",0)},syncOptionsOpen:function(dontOpenSynchronizerOptions){var that=this;fvdSpeedDial.Sync.syncAddonOptionsUrl(function(url){if(url){if(!dontOpenSynchronizerOptions){chrome.tabs.create({url:url,active:true})}}else{try{that.setType("sync")}catch(ex){}}})},dontAllowIfLocked:function(){if(fvdSpeedDial.PowerOff.isHidden()){fvdSpeedDial.Dialogs.alert(_("dlg_alert_sd_locked_action_title"),_("dlg_alert_sd_locked_action_text"));return false}else{return true}},_refreshEnableTypes:function(){var types=fvdSpeedDial.SpeedDial._displayModesList;var sdEnabledElem=document.getElementById("enableSpeedDial");var mvEnabledElem=document.getElementById("enableMostVisited");var rcEnabledElem=document.getElementById("enableRecentlyClosed");var elems=[sdEnabledElem,mvEnabledElem,rcEnabledElem];for(var i=0;i!=elems.length;i++){elems[i].removeAttribute("disabled")}var disabledTypes=[];var sdEnabled=sdEnabledElem.checked;if(!sdEnabled){disabledTypes.push("speeddial")}var mvEnabled=mvEnabledElem.checked;if(!mvEnabled){disabledTypes.push("mostvisited")}var rcEnabled=rcEnabledElem.checked;if(!rcEnabled){disabledTypes.push("recentlyclosed")}var enabledTypes=fvdSpeedDial.Utils.arrayDiff(types,disabledTypes);if(enabledTypes.length<=1){for(var i=0;i!=elems.length;i++){if(elems[i].checked){elems[i].setAttribute("disabled",true)}}}var currentValue=null;var radioElems=document.getElementsByName("global_defaultDial");for(var i=0;i!=radioElems.length;i++){radioElems[i].removeAttribute("disabled");if(radioElems[i].checked){currentValue=radioElems[i].value}}if(disabledTypes.indexOf(currentValue)!=-1){var newValue=enabledTypes[0];for(var i=0;i!=radioElems.length;i++){if(radioElems[i].value==newValue){radioElems[i].checked=true}}}for(var i=0;i!=disabledTypes.length;i++){for(var j=0;j!=radioElems.length;j++){if(radioElems[j].value==disabledTypes[i]){radioElems[j].setAttribute("disabled",true)}}}},_changeOption:function(option,params){params=params||{};if(typeof params.showApply=="undefined"){params.showApply=true}var settingName=option.getAttribute("sname");var newValue=this._getOptionValue(option);if(params.showApply){document.getElementById("mainContainer").setAttribute("havechanges",1);document.getElementById("closeButton").setAttribute("active",0)}if(["sd.enable_top_sites","sd.enable_most_visited","sd.enable_recently_closed"].indexOf(settingName)!=-1){this._refreshEnableTypes()}if(settingName=="sd.display_dial_background"){if(newValue){document.getElementById("display_dial_borders_container").style.display="none"}else{document.getElementById("display_dial_borders_container").style.display=""}}},_listenOptions:function(){var options=document.querySelectorAll("[sname]");var that=this;for(var i=0;i!=options.length;i++){var option=options[i];(function(option){option.addEventListener("change",function(event){that._changeOption(option)},false)})(option)}},_setOptionVal:function(option,value){try{if(option.tagName=="INPUT"){if(option.className=="color"){if(option.color){option.color.fromString(value)}else{option.value=value}return}else if(option.type=="checkbox"){option.checked=_b(value);return}else if(option.type=="radio"){var name=option.name;document.querySelector("[name="+name+"][value="+value+"]").checked=true;return}}option.value=value}catch(ex){}},_getOptionValue:function(option){if(option.tagName=="INPUT"){if(option.type=="checkbox"){return option.checked}else if(option.type=="radio"){var name=option.name;return document.querySelector("[name="+name+"]:checked").value}}return option.value}};this.Options=new Options}).apply(fvdSpeedDial);fvdSpeedDial.Options.PowerOff=new function(){var self=this;function refresh(){var tabChangePass=document.getElementById("poweroffTabChangePassCode");var tabRestore=document.getElementById("poweroffTabRestorePassCode");var setupForm=document.querySelector(".tabCreate .createPassCode");var setupedMessage=document.querySelector(".tabCreate .setuped");if(!fvdSpeedDial.PowerOff.isEnabled()){tabChangePass.style.display="none";tabRestore.style.display="none";if(fvdSpeedDial.Options.Tabs.tabsA["powerOffTabs"]){fvdSpeedDial.Options.Tabs.tabsA["powerOffTabs"].setActiveTab(0)}setupForm.style.display="block";setupedMessage.style.display="none"}else{tabChangePass.style.display="";tabRestore.style.display="";setupForm.style.display="none";setupedMessage.style.display="block";document.getElementById("currentPassCodeEmail").textContent=fvdSpeedDial.PowerOff.getEmail()}}function hideErrors(){var errors=document.querySelectorAll("#poweroffSettings .error");for(var i=0;i!=errors.length;i++){errors[i].style.display="none"}}function showError(id,text){var error=document.getElementById(id);console.log(id,error);error.textContent=text;error.style.display="block"}this.createPassCode=function(){hideErrors();var passCode=document.getElementById("passcodeValue").value;var repeatPasscode=document.getElementById("repeatPasscodeValue").value;var email=document.getElementById("reserveEmailValue").value;if(!passCode){return showError("createPassCodeError",_("options_poweroff_error_empty_passcode"))}if(passCode!=repeatPasscode){return showError("createPassCodeError",_("options_poweroff_error_passcode_dont_match"))}if(!fvdSpeedDial.Utils.validateText("email",email)){return showError("createPassCodeError",_("options_poweroff_error_email_wrong_format"))}document.getElementById("passcodeValue").value="";document.getElementById("repeatPasscodeValue").value="";document.getElementById("reserveEmailValue").value="";fvdSpeedDial.PowerOff.setup(email,passCode);refresh()};this.changePassCode=function(){hideErrors();var oldPassCode=document.getElementById("oldPasscodeValue").value;var newPassCode=document.getElementById("newPasscodeValue").value;if(!fvdSpeedDial.PowerOff.checkPassword(oldPassCode)){return showError("changePassCodeError",_("options_poweroff_error_wrong_pass_code"))}document.getElementById("oldPasscodeValue").value="";document.getElementById("newPasscodeValue").value="";if(!newPassCode){fvdSpeedDial.PowerOff.removePassword();refresh();return}fvdSpeedDial.PowerOff.changePassword(newPassCode);fvdSpeedDial.Dialogs.alert(_("options_poweroff_passcode_changed_title"),_("options_poweroff_passcode_changed_text"))};this.restorePassCode=function(){fvdSpeedDial.PowerOff.restorePassword(function(){fvdSpeedDial.Dialogs.alert(_("options_powerof_password_restore_title"),_("options_powerof_password_restore_text")+":<br>"+fvdSpeedDial.PowerOff.getEmail())})};window.addEventListener("load",function(){document.getElementById("createPassCode").addEventListener("click",function(){self.createPassCode()},false);document.getElementById("changePassCode").addEventListener("click",function(){self.changePassCode()},false);document.getElementById("resorePassCode").addEventListener("click",function(){self.restorePassCode()},false);refresh()},false)};(function(){var Background=function(){var self=this;this.currentParallaxScene=null;window.addEventListener("resize",function(){self.adoptParallaxLayer()},false)};Background.prototype={CURRENT_CHROME_THEME_BACKGROUND_URL:"chrome://theme/IDR_THEME_NTP_BACKGROUND",setToElem:function(bgData,elem){var that=this;function _set(){that._setToElem(bgData,elem)}if(bgData.imageUrl&&bgData.imageType!="noimage"){var img=new Image;img.onload=function(){bgData.imgInst=img;_set()};img.onerror=function(){_set()};img.src=bgData.imageUrl}else{_set()}},_setToElem:function(bgData,elem){bgData.parallaxDepth=bgData.parallaxDepth||fvdSpeedDial.Prefs.get("sd.background_parallax_depth");var self=this;elem.style.background="none";var parallaxScene=elem.querySelector(".parallax-bg-scene");if(parallaxScene){parallaxScene.parentNode.removeChild(parallaxScene)}if(this.currentParallaxScene){this.currentParallaxScene.disable();this.currentParallaxScene=null}if(bgData.imgInst){if(bgData.imageType==="parallax"){parallaxScene=document.createElement("div");parallaxScene.classList.add("parallax-bg-scene");var layer=document.createElement("div");layer.classList.add("layer");layer.style.backgroundImage="url("+bgData.imageUrl.replace("(","\\(").replace(")","\\)")+")";layer.style.backgroundSize="cover";layer.setAttribute("data-depth",bgData.parallaxDepth/100);parallaxScene.appendChild(layer);var appendTo=elem==document.documentElement?document.body:elem;appendTo.appendChild(parallaxScene);this.currentParallaxScene=new Parallax(parallaxScene);self.adoptParallaxLayer()}else{var elemWidth,elemHeight;if(elem.clientWidth){elemWidth=elem.clientWidth;elemHeight=elem.clientHeight}else{elemWidth=elem.offsetWidth;elemHeight=elem.offsetHeight}elem.style.backgroundImage="url("+bgData.imageUrl.replace("(","\\(").replace(")","\\)")+")";if(bgData.adaptiveSize){var ratio=elemWidth/bgData.adaptiveSize.width;var bgWidth=Math.round(ratio*bgData.imgInst.width);var bgHeight=Math.round(ratio*bgData.imgInst.height);elem.style.backgroundSize=bgWidth+"px "+bgHeight+"px"}switch(bgData.imageType){case"fill":elem.style.backgroundPosition="center center";elem.style.backgroundSize="cover";elem.style.backgroundRepeat="no-repeat";break;case"fit":elem.style.backgroundPosition="center center";elem.style.backgroundSize="contain";elem.style.backgroundRepeat="no-repeat";break;case"stretch":elem.style.backgroundSize="100% 100%";elem.style.backgroundRepeat="no-repeat";break;case"tile":break;case"center":elem.style.backgroundPosition="center center";elem.style.backgroundRepeat="no-repeat";break}if(!bgData.adaptiveSize){elem.style.backgroundAttachment="fixed"}if(bgData.useColor){elem.style.backgroundColor="#"+bgData.color}}}else{if(bgData.useColor){elem.style.backgroundColor="#"+bgData.color}else{}}if(bgData.callback){bgData.callback(bgData)}},adoptParallaxLayer:function(){var scene=document.querySelector(".parallax-bg-scene");var layer=scene.querySelector(".layer");if(!scene||!this.currentParallaxScene){return}var depth=this.currentParallaxScene.depths[0];var xMotion=scene.offsetWidth*(10/100)*depth;var yMotion=scene.offsetHeight*(10/100)*depth;layer.style.left=-xMotion+"px";layer.style.top=-yMotion+"px";layer.style.width=scene.offsetWidth+xMotion*2+"px";layer.style.height=scene.offsetHeight+yMotion*2+"px"}};this.Background=new Background}).apply(fvdSpeedDial);(function(){var SpeedDial=function(){};SpeedDial.prototype=new FVDEventEmitter;SpeedDial.prototype={_displayType:null,_nowOpenedGroup:null,_cellsSizes:{big:364,medium:210,small:150},_mostVisitedIntervals:["all_time","month","week"],_displayModesList:["speeddial","mostvisited","recentlyclosed"],_topLineHeight:3,_dialBodyPadding:5,_cellsSizeRatio:1.6,_cellsMarginX:20,_cellsMarginY:{standard_speeddial:70,fancy_speeddial:30,standard_mostvisited:70,fancy_mostvisited:50},_groupElemMaxWidth:150,_groupElemMargin:5,_groupElemXPadding:6,_groupElemLetterWidth:6,_listElemMarginX:15,_listElemMarginY:15,_listElemSize:{height:15,width:522},_listElemSizeMostVisited:{height:29,width:522},_needRebuild:false,_needRebuildGroupsList:false,_needCSSRefresh:false,_needBackgroundRefresh:false,_rebuildCheckerIntervalInst:null,_cellsRebuildCallback:null,_firstRebuildDone:false,justAddedId:null,fancySpecialDecrementCount:0,onBuildCompleted:new FVDEventEmitter,cellsMarginY:function(){return this._cellsMarginY[fvdSpeedDial.Prefs.get("sd.display_mode")+"_"+this.currentDisplayType()]},has3D:function(){var has="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix;if(!has){return false}if(document.getElementById("test3d").offsetLeft==0){return false}return true},refreshEnableMirrors:function(){var sdContent=document.getElementById("speedDialContent");if(_b(fvdSpeedDial.Prefs.get("sd.display_mirror"))){sdContent.setAttribute("enablemirrors","1")}else{sdContent.setAttribute("enablemirrors","0")}},init:function(){var that=this;this.refreshEnableMirrors();if(!_b(fvdSpeedDial.Prefs.get("sd.fancy_size_adjusted"))){if(fvdSpeedDial.Prefs.get("sd.display_mode")=="fancy"){fvdSpeedDial.CSS._updateThemeActions("fancy")}var min=this.getMinCellWidth();var max=this.getMaxCellWidth();var v=max;var minCols=fvdSpeedDial.Prefs.get("sd.fancy_init_min_columns");while(v>=min){fvdSpeedDial.Prefs.set("sd.custom_dial_size_fancy",v);if(fvdSpeedDial.SpeedDial.cellsInRowMax("auto","fancy").cols>=minCols){break}v--}fvdSpeedDial.Prefs.set("sd.fancy_size_adjusted",true)}fvdSpeedDial.CSS.stylesheets.push(document.styleSheets[0]);this.refreshExpandState();this.refreshBackground();this.refreshCSS();this._rebuildCheckerIntervalInst=setInterval(this._needRebuildChecker,100);window.addEventListener("resize",function(event){that.sheduleRebuild();that.sheduleRebuildGroupsList()},true);this.DragAndDrop.init();setTimeout(function(){fvdSpeedDial.ContextMenus.setGlobalMenu(that.currentDisplayType())},0);chrome.tabs.onActivated.addListener(function(info){chrome.tabs.getCurrent(function(tab){if(tab.id==info.tabId){if(document.body.hasAttribute("dial-search-show-results")){return}that.sheduleFullRebuild()}})});if(_b(fvdSpeedDial.Prefs.get("sd.first_dial_page_open"))){setTimeout(function(){},0);fvdSpeedDial.Prefs.set("sd.first_dial_page_open",false)}this.correctPerspectiveOrigin();document.addEventListener("scroll",function(){that.correctPerspectiveOrigin()},false);document.getElementById("cbNotDisplayCollapsedWithPowerOff").addEventListener("click",function(){setTimeout(function(){fvdSpeedDial.Prefs.set("collapsed_message.with_poweroff.display",false)},0)},false);document.getElementById("cbNotDisplayCollapsedWithoutPowerOff").addEventListener("click",function(){setTimeout(function(){fvdSpeedDial.Prefs.set("collapsed_message.without_poweroff.display",false)},0)},false);document.querySelector("#searchBar .rightMenu .showHide").addEventListener("click",function(){that.toggleExpand()},false);document.querySelector("#speedDialCollapsedContent .aboutPowerOff").addEventListener("click",function(){window.open(chrome.extension.getURL("/options.html#poweroff"))},false);this.refreshCollapsedMessages();var forceShowGroupId=fvdSpeedDial.Utils.getQueryValue("show_group_id");if(forceShowGroupId){that.setCurrentGroupId(forceShowGroupId)}document.location.hash="#";Broadcaster.onMessage.addListener(function(message){switch(message.action){case"syncStartNotification":document.getElementById("buttonSync").setAttribute("sync",1);break;case"syncEndNotification":document.getElementById("buttonSync").removeAttribute("sync");break;case"pref:changed":that._prefsListener(message.name,message.value);break;case"forceRebuild":fvdSpeedDial.Utils.Async.chain([function(next){if(message.needDisplayType){if(message.needDisplayType!=fvdSpeedDial.SpeedDial.currentDisplayType()){return}}if(!message.needActiveTab){return next()}fvdSpeedDial.Utils.isActiveTab(function(active){if(!active){return}next()})},function(){fvdSpeedDial.SpeedDial.sheduleFullRebuild()}]);break;case"foundRecentlyClosed":fvdSpeedDial.Utils.Async.chain([function(next){if(!message.needActiveTab){return}fvdSpeedDial.Utils.isActiveTab(function(active){if(!active){return}next()})},function(){if(fvdSpeedDial.SpeedDial.currentDisplayType()=="recentlyclosed"){fvdSpeedDial.SpeedDial.sheduleFullRebuild()}else{fvdSpeedDial.SpeedDialMisc.sheduleRebuild()}}]);break}})},refreshCollapsedMessages:function(){if(!_b(fvdSpeedDial.Prefs.get("collapsed_message.with_poweroff.display"))){document.querySelector("#speedDialCollapsedContent .collapsedMessagePoweroffDisabled").style.display="none"}if(!_b(fvdSpeedDial.Prefs.get("collapsed_message.without_poweroff.display"))){document.querySelector("#speedDialCollapsedContent .collapsedMessagePoweroffEnabled").style.display="none"}},getMaxCellWidth:function(){var max=0;for(var k in this._cellsSizes){var size=this._cellsSizes[k];if(size>max){max=size}}return max},getMinCellWidth:function(){var min=9999;for(var k in this._cellsSizes){var size=this._cellsSizes[k];if(size<min){min=size}}return min},openSizeSetup:function(){window.open(chrome.extension.getURL("/options.html#setup-custom-size"))},dialRemoveAnimate:function(dialId){var cell=document.getElementById("dialCell_"+dialId);if(cell){var that=this;cell.addEventListener("webkitTransitionEnd",function(event){that.sheduleFullRebuild()},true);cell.style.opacity=0;cell.style.webkitTransform="scale(0.5)"}},dialMoveToGroup:function(dialId,groupId){fvdSpeedDial.Storage.moveDial(dialId,groupId,function(result){if(result.result){fvdSpeedDial.Sync.addDataToSync({category:"dials",data:dialId,translate:"dial"});if(fvdSpeedDial.SpeedDial.currentGroupId()==0){fvdSpeedDial.SpeedDial.sheduleFullRebuild()}else{fvdSpeedDial.SpeedDial.dialRemoveAnimate(dialId)}fvdSpeedDial.Storage.dialGlobalId(dialId,function(dialGlobalId){fvdSpeedDial.Sync.removeSyncData({category:["deleteDials"],data:dialGlobalId})})}})},setListViewType:function(){var selectedElem=document.querySelector("[name=listViewType]:checked");var type=null;if(selectedElem){type=selectedElem.value;fvdSpeedDial.Prefs.set("sd.list_view_type",type)}else{selectedElem=document.querySelector("[name=listViewType][value="+fvdSpeedDial.Prefs.get("sd.list_view_type")+"]");selectedElem.checked=true;type=selectedElem.value}var elements=document.getElementsByClassName("newtabListElem");var altType=null;if(type=="url"){altType="title"}else{altType="url"}for(var i=0;i!=elements.length;i++){var elem=elements[i];var textNode=elem.getElementsByClassName("text")[0];textNode.textContent=elem.getAttribute("_"+type);elem.setAttribute("title",elem.getAttribute("_"+altType))}},refreshSpeedDialWrapperHeight:function(){var wrapper=document.getElementById("speedDialWrapper");wrapper.style.height="";var currentHeight=wrapper.offsetHeight;var bodyHeight=document.body.offsetHeight;var speedDialHeight=bodyHeight-this._topLineHeight;var extraHeight=0;

if(wrapper.hasAttribute("extraheight")){extraHeight=parseInt(wrapper.getAttribute("extraheight"))}if(currentHeight>speedDialHeight){wrapper.style.height=currentHeight+20-extraHeight+"px"}else{wrapper.style.height=speedDialHeight-extraHeight+"px"}},correctPerspectiveOrigin:function(){var originValue=100;originValue+=document.body.scrollTop;document.getElementById("cellsContainer").style.webkitPerspectiveOrigin="50% "+originValue+"px"},correctPerspective:function(params){params=params||{};if(!params._correctAttempt){params._correctAttempt=1}if(params._correctAttempt>10){return}params._correctAttempt++;if(!this.getExpandState()){return}var that=this;var pers=600;var fixedPerspective=false;if(fvdSpeedDial.Prefs.get("sd.display_mode")!="fancy"){fixedPerspective=true}else if(this.currentDisplayType()=="mostvisited"){}else if(this._currentSettingsColumnsCount()!="auto"){var maxCols=that.cellsInRowMax("auto",null,{objects:document.getElementById("cellsContainer").childNodes.length}).cols;if(maxCols!=this._currentSettingsColumnsCount()){fixedPerspective=true}}if(fixedPerspective){document.getElementById("cellsContainer").style.webkitPerspective=pers+"px";return}var iter=0;var that=this;var els=document.querySelectorAll(".newtabCell[row='0']");var viewPortWidth=that._viewportWidth();console.log(viewPortWidth,els.length,that.cellsInRowMax("auto",null,{objects:document.getElementById("cellsContainer").childNodes.length}).cols);var el=els[els.length-1];var firstEl=els[0];var rect=el.getBoundingClientRect();if(rect.right==0){setTimeout(function(){that.correctPerspective(params)},0);return}var lastValueWhenInBorders=0;var alreadyCheckedPers={};var cellsContainer=document.getElementById("cellsContainer");cellsContainer.style.webkitPerspective=pers+"px";while(true){iter++;if(iter>100||alreadyCheckedPers[pers]>5){if(lastValueWhenInBorders){cellsContainer.style.webkitPerspective=lastValueWhenInBorders+"px"}break}if(!alreadyCheckedPers[pers]){alreadyCheckedPers[pers]=0}alreadyCheckedPers[pers]++;var delta=20;var width=0;var el=els[els.length-1];var rect=el.getBoundingClientRect();var normWDelta=25;var wDelta=viewPortWidth-rect.right;if(wDelta<normWDelta&&wDelta>0&&rect.left>0){break}var inBorders=false;if(wDelta<0){pers+=delta}else{if(firstEl.getBoundingClientRect().left>normWDelta){inBorders=true;lastValueWhenInBorders=pers}pers-=delta}var scaleRatio=rect.width/el.offsetWidth;if(inBorders&&scaleRatio<=fvdSpeedDial.Config.FANCY_SIDE_DIALS_MAX_SCALE&&scaleRatio>=fvdSpeedDial.Config.FANCY_SIDE_DIALS_MIN_SCALE){console.log("DONE#1");break}cellsContainer.style.webkitPerspective=pers+"px"}},rebuildCells:function(params){var l=new Log;l.profile.start("preparing tasks");l.profile.start("total");var that=this;params=params||{};var rebuildCellsParams=params;if(!params.doNotZeroFancySpecialDecrementCount){this.fancySpecialDecrementCount=0}var speedDialContent=document.getElementById("speedDialContent");speedDialContent.setAttribute("style",fvdSpeedDial.Prefs.get("sd.display_mode"));this.refreshExpandState({ifcollapsed:true});var displayType=this.currentDisplayType();var thumbsMode=this.currentThumbsMode();var cellSize=this._currentCellSize();document.body.setAttribute("thumbsmode",thumbsMode);document.body.setAttribute("displaymode",fvdSpeedDial.Prefs.get("sd.display_mode"));document.body.setAttribute("displaytype",displayType);var activeScrollingType=fvdSpeedDial.SpeedDial.Scrolling.activeScrollingType();var container=null;var containerId=null;var tmpContainer=null;function _getContainer(){var listContainer=that._listContainer();var cellsContainer=that._cellsContainer();var c;if(that.currentThumbsMode()=="list"){c=listContainer}else{c=cellsContainer}return c}container=_getContainer();tmpContainer=container.cloneNode(true);while(tmpContainer.firstChild){tmpContainer.removeChild(tmpContainer.firstChild)}containerId=container.getAttribute("id");var finishBuildCallback=function(params){speedDialContent.style.width="";tmpContainer.style.width="";l.profile.start("finishBuildCallback");document.body.setAttribute("scrollingtype",activeScrollingType);if(that.currentThumbsMode()!="list"){var containerSize=that._dialsAreaSize({objects:tmpContainer.childNodes.length});if(containerSize.width&&activeScrollingType=="vertical"){tmpContainer.style.width=containerSize.width+"px"}}if(that._cellsRebuildCallback){that._cellsRebuildCallback()}if(displayType=="recentlyclosed"){document.getElementById("groupsWidthSetter").setAttribute("hidden",true)}else{document.getElementById("groupsWidthSetter").removeAttribute("hidden")}if(thumbsMode=="list"){cellsContainer.setAttribute("hidden",true);document.getElementById("listContainerParent").removeAttribute("hidden")}else{listContainer.setAttribute("hidden",true);document.getElementById("listContainerParent").setAttribute("hidden",true)}container=_getContainer();container.parentNode.replaceChild(tmpContainer,container);tmpContainer.removeAttribute("hidden");setTimeout(function(){that.refreshExpandState()},0);if(thumbsMode=="list"){var listViewMenus=document.getElementsByClassName("listViewMenu");for(var i=0;i!=listViewMenus.length;i++){listViewMenus[i].setAttribute("hidden",true)}document.getElementById("listNoItemsToDisplay").setAttribute("hidden",true);if(params){if(params.noitems){document.getElementById("listNoItemsToDisplay").removeAttribute("hidden");document.getElementById("listViewTypeSelector").setAttribute("hidden",true);return}}document.getElementById("listViewTypeSelector").removeAttribute("hidden");var listContainerParent=document.getElementById("listContainerParent");var size=that.Builder.listViewContainerSize(tmpContainer,countInRow);tmpContainer.style.height=size.height+"px";tmpContainer.style.width=size.width+"px";if(size.width!=0){listContainerParent.style.width=size.width+"px"}that.setListViewType();var neededMenu=document.getElementById(displayType+"ListViewMenu");neededMenu.removeAttribute("hidden")}else{document.getElementById("listViewTypeSelector").setAttribute("hidden",true);that.correctPerspective();if(fvdSpeedDial.SpeedDial.Scrolling.activeScrollingType()=="vertical"){tmpContainer.style.height=fvdSpeedDial.SpeedDial.Builder.cellsContainerHeight(tmpContainer.childNodes.length,that.cellsInRowMax(null,null,{objects:tmpContainer.childNodes.length}).cols,cellSize)+"px"}if(activeScrollingType=="horizontal"){var rows=parseInt(tmpContainer.getAttribute("rows"),10);var cell=tmpContainer.childNodes[0];var cellWidth=cell.offsetWidth;var cellsPerRow=Math.ceil(tmpContainer.childNodes.length/rows);speedDialContent.style.width=cellWidth*cellsPerRow+"px"}}if(fvdSpeedDial.Prefs.get("sd.display_mode")=="fancy"&&!that.has3D()){if(_b(fvdSpeedDial.Prefs.get("sd.no3d_first"))){fvdSpeedDial.Prefs.set("sd.no3d_first",false);return fvdSpeedDial.Prefs.set("sd.display_mode","standard")}document.getElementById("cellsContainer").setAttribute("hidden",true);document.getElementById("listContainer").setAttribute("hidden",true);document.getElementById("no3dmessage").removeAttribute("hidden")}else{document.getElementById("no3dmessage").setAttribute("hidden",true)}that.Builder.refreshLastRow();l.profile.end("finishBuildCallback");l.profile.end("total");console.log("** rebuildCells **\n",l.toString());that.onBuildCompleted.callListeners(rebuildCellsParams)};if(thumbsMode=="list"){tmpContainer.style.height=""}else{}var countInRow=null;var gridParams=this.cellsInRowMax();countInRow=gridParams.cols;l.profile.end("preparing tasks");if(this.currentDisplayType()=="speeddial"){var groupId=this.currentGroupId();var order=null;var limit=null;if(parseInt(groupId,10)===0){order="`clicks` DESC";limit=fvdSpeedDial.Prefs.get("sd.all_groups_limit_dials")}fvdSpeedDial.Utils.Async.chain([function(next){if(params.dials){return next()}fvdSpeedDial.Storage.listDials(order,groupId,limit,function(data){params.dials=data;next()})},function(){var data=params.dials;if(that.currentThumbsMode()!="list"){var displayDialBg=fvdSpeedDial.Prefs.get("sd.display_dial_background");l.profile.start("fetch dials from db");l.profile.end("fetch dials from db");l.profile.start("build cells html");gridParams=that.cellsInRowMax(null,null,{objects:data.length});if(fvdSpeedDial.SpeedDial.Scrolling.activeScrollingType()=="horizontal"&&!gridParams.rows){activeScrollingType="vertical"}countInRow=gridParams.cols;if(gridParams.rows){countInRow=Math.ceil(data.length/gridParams.rows);if(_b(fvdSpeedDial.Prefs.get("sd.display_plus_cells"))){countInRow++}}var i=0;var countRowsFilled=Math.ceil(data.length/countInRow);tmpContainer.setAttribute("rows",countRowsFilled);var lastRow=[];var plusCellsCount=countRowsFilled*countInRow-data.length;for(;i!=data.length;i++){data[i].displayDialBg=displayDialBg;var cell=that.Builder.cell(data[i],i,countInRow,displayType,thumbsMode,cellSize,countRowsFilled);if(plusCellsCount!=0&&cell.getAttribute("row")==countRowsFilled-1){lastRow.push(cell)}var needAnimateAppear=false;if(data[i].id==that.justAddedId){cell.style.opacity=0;that.justAddedId=null;needAnimateAppear=true}tmpContainer.appendChild(cell);if(needAnimateAppear){(function(cell){setTimeout(function(){cell.style.webkitTransform=cell.style.webkitTransform.replace("scale(0)","");cell.style.opacity="";fvdSpeedDial.Utils.scrollToElem(cell)},0)})(cell)}}if(_b(fvdSpeedDial.Prefs.get("sd.display_plus_cells"))){if(plusCellsCount==0){plusCellsCount=countInRow}for(var j=0;j!=plusCellsCount;j++,i++){var cell=that.Builder.plusCell(i,countInRow,cellSize,countRowsFilled);cell.setAttribute("id","plus_cell_"+j);tmpContainer.appendChild(cell);lastRow.push(cell)}}l.profile.end("build cells html")}else{var countInCol=that.Builder.listElemCountInCol(countInRow,data.length);for(var i=0;i!=data.length;i++){var elem=that.Builder.listElem(i,countInCol,data[i],displayType);tmpContainer.appendChild(elem)}}finishBuildCallback()}])}else if(this.currentDisplayType()=="mostvisited"){var interval=this.currentGroupId();if(this.currentThumbsMode()!="list"){fvdSpeedDial.Storage.MostVisited.getData({interval:interval,type:"host",count:fvdSpeedDial.Prefs.get("sd.max_most_visited_records")},function(data){if(gridParams.rows){countInRow=Math.ceil(data.length/gridParams.rows)}for(var i=0;i!=data.length;i++){var row=data[i];(function(i){fvdSpeedDial.Storage.MostVisited.extendData(row,function(mvData){var cell=that.Builder.cell(mvData,i,countInRow,displayType,thumbsMode,cellSize);tmpContainer.appendChild(cell);if(i==data.length-1){finishBuildCallback()}})})(i)}if(!data.length){finishBuildCallback()}})}else{var t=(new Date).getTime();fvdSpeedDial.Storage.MostVisited.getData({interval:interval,type:"host",count:fvdSpeedDial.Prefs.get("sd.max_most_visited_records")},function(data){var countInCol=that.Builder.listElemCountInCol(countInRow,data.length);for(var i=0;i!=data.length;i++){var row=data[i];(function(i){fvdSpeedDial.Storage.MostVisited.extendData(row,function(mvData){var cell=that.Builder.listElem(i,countInCol,mvData,displayType);tmpContainer.appendChild(cell);if(i==data.length-1){finishBuildCallback()}})})(i)}if(!data.length){finishBuildCallback({noitems:true})}})}}else if(this.currentDisplayType()=="recentlyclosed"){fvdSpeedDial.Storage.RecentlyClosed.getData({count:fvdSpeedDial.Prefs.get("sd.max_recently_closed_records")},function(data){var countInCol=that.Builder.listElemCountInCol(countInRow,data.length);for(var i=0;i!=data.length;i++){var row=data[i];var cell=that.Builder.listElem(i,countInCol,data[i],displayType);tmpContainer.appendChild(cell)}finishBuildCallback({noitems:data.length==0})})}},removeGroup:function(groupId,callback,params){var removeFromBase=function(){fvdSpeedDial.Utils.Async.chain([function(chainCallback){fvdSpeedDial.Sync.addDataToSync({category:"deleteGroups",data:groupId,translate:"group"},function(){fvdSpeedDial.Storage.groupDelete(groupId,function(){chainCallback()})})},function(chainCallback){fvdSpeedDial.Storage.listDials(null,groupId,null,function(dials){fvdSpeedDial.Utils.Async.arrayProcess(dials,function(dial,apCallback){fvdSpeedDial.Storage.deleteDial(dial.id);apCallback()},function(){if(callback){callback(true)}})})}])};fvdSpeedDial.Storage.groupsCount(function(countGroups){if(countGroups==1){fvdSpeedDial.Dialogs.alert(_("dlg_alert_cannot_remove_group_title"),_("dlg_alert_cannot_remove_group_text"));if(callback){callback(false)}}else{fvdSpeedDial.Storage.getGroup(groupId,function(group){if(group!=null){if(group.count_dials==0||params&&params.noConfirmIfHaveDials){removeFromBase();if(callback){callback(true)}}else{fvdSpeedDial.Dialogs.confirm(_("dlg_confirm_remove_group_title"),_("dlg_confirm_remove_group_text").replace("%count%",group.count_dials),function(result){if(result){removeFromBase()}if(callback){callback(result)}})}}})}})},currentGroupId:function(){if(this.currentDisplayType()=="speeddial"){if(this._nowOpenedGroup!==null){return this._nowOpenedGroup}var id=fvdSpeedDial.Prefs.get("sd.default_group");if(id==-1){id=fvdSpeedDial.Prefs.get("sd.last_opened_group")}this._nowOpenedGroup=id;return id}else if(this.currentDisplayType()=="mostvisited"){return fvdSpeedDial.Prefs.get("sd.most_visited_interval")}else{return null}},setCurrentGroupId:function(id){if(this.currentDisplayType()=="speeddial"){if(this.currentGroupId()==id){return}this._nowOpenedGroup=id;fvdSpeedDial.Prefs.set("sd.last_opened_group",id)}else if(this.currentDisplayType()=="mostvisited"){if(this.currentGroupId()==id){return}fvdSpeedDial.Prefs.set("sd.most_visited_interval",id)}else{return}this.sheduleRebuild();this.sheduleRebuildGroupsList()},setCurrentThumbsMode:function(mode){switch(this.currentDisplayType()){case"speeddial":fvdSpeedDial.Prefs.set("sd.thumbs_type",mode);break;case"mostvisited":fvdSpeedDial.Prefs.set("sd.thumbs_type_most_visited",mode);break}},currentThumbsMode:function(){switch(this.currentDisplayType()){case"speeddial":return fvdSpeedDial.Prefs.get("sd.thumbs_type");break;case"mostvisited":return fvdSpeedDial.Prefs.get("sd.thumbs_type_most_visited");break;case"recentlyclosed":return"list";break}},cirlceDisplayType:function(direction){direction=direction||1;var list=this._displayModesList.slice();if(!_b(fvdSpeedDial.Prefs.get("sd.enable_top_sites"))){var index=list.indexOf("speeddial");list.splice(index,1)}if(!_b(fvdSpeedDial.Prefs.get("sd.enable_recently_closed"))){var index=list.indexOf("recentlyclosed");list.splice(index,1)}if(!_b(fvdSpeedDial.Prefs.get("sd.enable_most_visited"))){var index=list.indexOf("mostvisited");list.splice(index,1)}var mode=this.currentDisplayType();var modeIndex=list.indexOf(mode);var nextModeIndex=modeIndex+direction;if(nextModeIndex>=list.length){nextModeIndex=0}else if(nextModeIndex<0){nextModeIndex=list.length-1}var nextMode=list[nextModeIndex];this.setCurrentDisplayType(nextMode)},setCurrentDisplayType:function(type){this._displayType=type;fvdSpeedDial.Prefs.set("sd.last_selected_display_type",type);fvdSpeedDial.ContextMenus.setGlobalMenu(type);this.sheduleFullRebuild();this.refreshShowHideButton()},currentDisplayType:function(){if(this._displayType==null){if(fvdSpeedDial.Prefs.get("sd.display_type")=="last_selected"){this._displayType=fvdSpeedDial.Prefs.get("sd.last_selected_display_type")}else{this._displayType=fvdSpeedDial.Prefs.get("sd.display_type")}}return this._displayType},cellsInRowMax:function(settingsColumnsCount,displayMode,additional){displayMode=displayMode||fvdSpeedDial.Prefs.get("sd.display_mode");additional=additional||{};if(typeof additional.objects=="undefined"){additional.objects=-1}else if(typeof additional.objects=="function"){additional.objects=additional.objects()}settingsColumnsCount=settingsColumnsCount||this._currentSettingsColumnsCount();var countRows=null;if(this.currentThumbsMode()=="list"){if(settingsColumnsCount!="auto"){var autoCount=this.cellsInRowMax("auto").cols;if(settingsColumnsCount>autoCount){settingsColumnsCount=autoCount}return{cols:settingsColumnsCount}}var documentWidth=this._viewportWidth();var count=Math.floor(documentWidth/(this._listElemSize.width+this._listElemMarginX));if(count<=0){count=1}return{cols:count}}else{if(settingsColumnsCount!="auto"){if(fvdSpeedDial.SpeedDial.Scrolling.activeScrollingType()=="horizontal"){return{rows:settingsColumnsCount}}else{return{cols:settingsColumnsCount}}}var documentWidth=this._viewportWidth();var sdWrapper=document.getElementById("speedDialWrapper");var documentHeight=this._viewportHeightForHorizScroll();if(sdWrapper.hasAttribute("extraheight")){documentHeight-=parseInt(sdWrapper.getAttribute("extraheight"))}var cellSize=this._currentCellSize();var cellsMarginY=this.cellsMarginY();var effectiveCellSize=cellSize.height;effectiveCellSize+=34;effectiveCellSize+=21;countRows=Math.floor(documentHeight/(effectiveCellSize+this._cellsMarginX));var count=Math.floor(documentWidth/(cellSize.width+this._cellsMarginX));if(displayMode=="fancy"){count--;if(this.fancySpecialDecrementCount){count-=this.fancySpecialDecrementCount}}if(count<=0){count=1}if(fvdSpeedDial.SpeedDial.Scrolling.activeScrollingType()=="horizontal"){if(additional.objects>=0){if(countRows*count>additional.objects){countRows=null}}}else{countRows=null}}var result={cols:count,rows:countRows};if(displayMode=="fancy"&&!_b(fvdSpeedDial.Prefs.get("sd.display_plus_cells"))&&result.cols&&additional.objects>=0){if(result.cols>additional.objects){result.cols=additional.objects}}return result},sheduleRebuild:function(){this._needRebuild=true},sheduleFullRebuild:function(params){fvdSpeedDial.SpeedDialMisc.sheduleRebuild();this.sheduleRebuildGroupsList();this.sheduleRebuild()},makeThumb:function(dialId,url,type,delay,saveImage){if(typeof saveImage=="undefined"){saveImage=true}var that=this;chrome.tabs.getSelected(null,function(tab){fvdSpeedDial.ThumbMaker.screenTab({tabId:tab.id,type:type,dialId:dialId,width:that.getMaxCellWidth()*window.devicePixelRatio,url:url,delay:delay,saveImage:saveImage});chrome.tabs.update(tab.id,{url:url})})},openAllDialsInGrop:function(groupId){var that=this;fvdSpeedDial.Storage.listDials(null,groupId,null,function(dials){try{for(var i=0;i!=dials.length;i++){fvdSpeedDial.Utils.Opener.backgroundTab(dials[i].url);that.addDialClick(dials[i].id)}}catch(ex){}})},refreshAllDialsInGroup:function(groupId){var that=this;if(groupId==0){fvdSpeedDial.Storage.listDials("",groupId,fvdSpeedDial.Prefs.get("sd.all_groups_limit_dials"),function(dials){var ids=[];dials.forEach(function(dial){ids.push(dial.id)});fvdSpeedDial.Storage.resetAutoDialsForGroup({ids:ids},function(){that.sheduleRebuild()})})}else{fvdSpeedDial.Storage.resetAutoDialsForGroup({groupId:groupId},function(){that.sheduleRebuild()})}},addDialClick:function(dialId){var that=this;fvdSpeedDial.Storage.getDial(dialId,function(data){if(!data){return false}var newClicks=data.clicks+1;fvdSpeedDial.Storage.updateDial(dialId,{clicks:newClicks},function(){try{var cell=that._getSpeedDialCellById(dialId);var clicksCount=cell.getElementsByClassName("clicksCount")[0];clicksCount.textContent=newClicks}catch(ex){}})})},sheduleRebuildGroupsList:function(){this._needRebuildGroupsList=true},Groups:{rebuildGroupsList:function(){var l=new Log;l.profile.start("total");l.profile.start("preparations");var that=fvdSpeedDial.SpeedDial;var isAdditionalListOpened=false;try{if(document.getElementsByClassName("additionalGroupsList")[0].getAttribute("active")==1){isAdditionalListOpened=true}}catch(ex){}document.getElementById("speedDialGroupsWrapper").setAttribute("type",that.currentDisplayType());var groupsBox=document.getElementById("groupsBox");var tmpContainer=groupsBox.cloneNode(true);while(tmpContainer.firstChild){tmpContainer.removeChild(tmpContainer.firstChild)}l.profile.end("preparations");if(that.currentDisplayType()=="speeddial"){var countInPopularGroup=0;fvdSpeedDial.Utils.Async.chain([function(chainCallback){if(_b(fvdSpeedDial.Prefs.get("sd.display_popular_group"))){l.profile.start("fetch total count dials");fvdSpeedDial.Storage.countDials({uniqueUrl:true},function(count){l.profile.end("fetch total count dials");countInPopularGroup=Math.min(fvdSpeedDial.Prefs.get("sd.all_groups_limit_dials"),count);chainCallback()})}else{chainCallback()}},function(){l.profile.start("fetch groups list");fvdSpeedDial.Storage.groupsList(function(groups){l.profile.end("fetch groups list");var currentGroupId=fvdSpeedDial.SpeedDial.currentGroupId();var groupFound=false;for(var i=0;i!=groups.length;i++){if(groups[i].id==currentGroupId){groupFound=true;break}}if(currentGroupId==0){groupFound=true}if(!groupFound){if(!groups.length){return}fvdSpeedDial.SpeedDial.setCurrentGroupId(groups[0].id);fvdSpeedDial.SpeedDial.sheduleFullRebuild();return}l.profile.start("building groups html");if(_b(fvdSpeedDial.Prefs.get("sd.display_popular_group"))){var item=fvdSpeedDial.SpeedDial.Builder.Groups.item(_("newtab_popular_group_title")+" ("+countInPopularGroup+")",0);fvdSpeedDial.ContextMenus.assignToElem(item,"speeddialGroup");tmpContainer.appendChild(item)}var groupsBoxMaxWidth=that._viewportWidth()-430;var groupsActiveWidth=0;var maxGroupsInMainList=0;if(_b(fvdSpeedDial.Prefs.get("sd.display_popular_group"))){groupsActiveWidth+=that._groupElemXPadding*2+that._groupElemLetterWidth*item.textContent.length+that._groupElemMargin}for(var i=0;i!=groups.length;i++){var groupSize=(groups[i].name+"("+groups[i].count_dials+")").length*that._groupElemLetterWidth+that._groupElemXPadding*2+ +that._groupElemMargin;if(groupSize>that._groupElemMaxWidth){groupSize=that._groupElemMaxWidth}groupsActiveWidth+=groupSize;if(groupsActiveWidth>=groupsBoxMaxWidth){break}maxGroupsInMainList++}var groupsInMainListCount=maxGroupsInMainList;var groupsInMainList=groups.splice(0,groupsInMainListCount);var groupsInAdditionalList=groups;for(var i=0;i!=groupsInMainList.length;i++){item=fvdSpeedDial.SpeedDial.Builder.Groups.item(groupsInMainList[i].name,groupsInMainList[i].id,groupsInMainList[i].count_dials);fvdSpeedDial.ContextMenus.assignToElem(item,"speeddialGroup");tmpContainer.appendChild(item)}if(groupsInAdditionalList.length>0){var additionalGroupsButton=fvdSpeedDial.SpeedDial.Builder.Groups.additionalGroupsButton();tmpContainer.appendChild(additionalGroupsButton);var additionalList=fvdSpeedDial.SpeedDial.Builder.Groups.additionalList(groupsInAdditionalList);additionalList.setAttribute("active",0);tmpContainer.appendChild(additionalList)}item=document.createElement("div");item.setAttribute("class","group add");var image=document.createElement("div");image.setAttribute("class","image");item.appendChild(image);item.addEventListener("click",function(event){fvdSpeedDial.Dialogs.addGroup()},true);tmpContainer.appendChild(item);groupsBox=document.getElementById("groupsBox");groupsBox.parentNode.replaceChild(tmpContainer,groupsBox);l.profile.end("building groups html");if(isAdditionalListOpened){that.Groups.displayAdditionalList({disableAnimation:true})}setTimeout(function(){fvdSpeedDial.ContextMenus.rebuildSpeedDialCellMenu()},0);try{var currentGroupId=that.currentGroupId();var item=document.getElementById("group_select_"+currentGroupId);document.getElementById("groupsBoxContainer").scrollLeft=item.offsetLeft}catch(ex){}l.profile.end("total");console.log("**Groups**\n",l.toString());if(_loadLog){_loadLog.profile.end("Total Loading");console.log("** Total Loading **\n",_loadLog.toString());_loadLog=null}})}])}else if(that.currentDisplayType()=="mostvisited"){for(var i=0;i!=that._mostVisitedIntervals.length;i++){var interval=that._mostVisitedIntervals[i];var item=fvdSpeedDial.SpeedDial.Builder.Groups.item(_("newtab_mostvisited_interval_"+interval),interval);tmpContainer.appendChild(item)}groupsBox.parentNode.replaceChild(tmpContainer,groupsBox)}else{groupsBox.parentNode.replaceChild(tmpContainer,groupsBox)}},displayAdditionalList:function(params){params=params||{};var that=this;try{var listElem=document.getElementsByClassName("additionalGroupsList")[0];if(listElem.getAttribute("active")==1){this.closeAdditionalList();return}var btn=document.getElementsByClassName("additionalGroupsButton")[0];var pos=fvdSpeedDial.Utils.getOffset(btn);listElem.style.left=pos.left+"px";if(params.disableAnimation){listElem.setAttribute("disableanim",1);setTimeout(function(){listElem.removeAttribute("disableanim")},500)}listElem.setAttribute("active",1);document.addEventListener("click",that.closeAdditionalList,false)}catch(ex){}},closeAdditionalList:function(){try{var listElem=document.getElementsByClassName("additionalGroupsList")[0];listElem.setAttribute("active",0);document.removeEventListener("click",fvdSpeedDial.SpeedDial.Groups.closeAdditionalList)}catch(ex){}}},syncMostVisited:function(){fvdSpeedDial.Storage.MostVisited.invalidateCache(true);if(this.currentDisplayType()=="mostvisited"){this.sheduleFullRebuild()}},mostVisitedRestoreRemoved:function(){var that=this;fvdSpeedDial.Storage.MostVisited.restoreRemoved(function(){if(that.currentDisplayType()=="mostvisited"){that.sheduleFullRebuild()}})},openAllCurrentMostVisitedLinks:function(){fvdSpeedDial.Storage.MostVisited.getData({interval:fvdSpeedDial.SpeedDial.currentGroupId(),count:fvdSpeedDial.Prefs.get("sd.max_most_visited_records")},function(data){for(var i=0;i!=data.length;i++){fvdSpeedDial.Utils.Opener.backgroundTab(data[i].url)}})},removeAllCurrentMostVisitedLinks:function(){fvdSpeedDial.Dialogs.confirm(_("dlg_confirm_remove_links_all_title"),_("dlg_confirm_remove_links_all_text"),function(r){if(r){fvdSpeedDial.Storage.MostVisited.getData({interval:fvdSpeedDial.SpeedDial.currentGroupId(),count:fvdSpeedDial.Prefs.get("sd.max_most_visited_records")},function(data){for(var i=0;i!=data.length;i++){(function(i){fvdSpeedDial.Storage.MostVisited.deleteId(data[i].id,function(result){if(i==data.length-1){fvdSpeedDial.SpeedDial.sheduleFullRebuild()}})})(i)}})}})},openAllCurrentRecentlyClosedLinks:function(){fvdSpeedDial.Storage.RecentlyClosed.getData({count:fvdSpeedDial.Prefs.get("sd.max_recently_closed_records")},function(data){for(var i=0;i!=data.length;i++){fvdSpeedDial.Utils.Opener.backgroundTab(data[i].url)}})},removeAllCurrentRecentlyClosedLinks:function(){fvdSpeedDial.Dialogs.confirm(_("dlg_confirm_remove_links_all_title"),_("dlg_confirm_remove_links_all_text"),function(r){if(r){fvdSpeedDial.Storage.RecentlyClosed.removeAll(function(){fvdSpeedDial.SpeedDial.sheduleFullRebuild()})}})},wrapperDblClick:function(event){this.toggleExpand()},getExpandState:function(){var currentState=_b(fvdSpeedDial.Prefs.get("sd."+this.currentDisplayType()+"_expanded"));if(fvdSpeedDial.PowerOffClient.isHidden()){return false}return currentState},toggleExpand:function(){if(fvdSpeedDial.PowerOffClient.isHidden()){return}var newVal=!_b(fvdSpeedDial.Prefs.get("sd."+fvdSpeedDial.SpeedDial.currentDisplayType()+"_expanded"));fvdSpeedDial.Prefs.set("sd."+fvdSpeedDial.SpeedDial.currentDisplayType()+"_expanded",newVal)},refreshShowHideButton:function(){var b=document.querySelector("#searchBar .rightMenu .showHide");if(this.getExpandState()){b.setAttribute("active","1")}else{b.setAttribute("active","0")}},refreshExpandState:function(args){var currentState=this.getExpandState();if(args){if(args.ifcollapsed){if(currentState){return}}}var wrapper=document.getElementById("speedDialWrapper");wrapper.setAttribute("expanded",currentState?1:0);var that=this;if(!currentState){var collapsedContainer=document.querySelector("#speedDialCollapsedContent");if(fvdSpeedDial.PowerOffClient.isHidden()){collapsedContainer.setAttribute("type","poweroff")}else if(fvdSpeedDial.PowerOff.isEnabled()){collapsedContainer.setAttribute("type","poweroffmessage")}else{collapsedContainer.setAttribute("type","simple")}}that.refreshSpeedDialWrapperHeight();that.refreshShowHideButton();that.refreshLightCollapsedMessageVisibility()},refreshLightCollapsedMessageVisibility:function(){var collapsedContainer=document.querySelector("#speedDialCollapsedContent");var collapsedType=collapsedContainer.getAttribute("type");var needShow=false;switch(collapsedType){case"poweroffmessage":if(!_b(fvdSpeedDial.Prefs.get("collapsed_message.without_poweroff.display"))){needShow=true}break;case"simple":if(!_b(fvdSpeedDial.Prefs.get("collapsed_message.with_poweroff.display"))){needShow=true}break}if(this.getExpandState()){needShow=false}if(needShow){fvdSpeedDial.lightCollapsedMessage.show()}else{fvdSpeedDial.lightCollapsedMessage.hide()}},refreshBackground:function(){fvdSpeedDial.Storage.getMisc("sd.background",function(imageUrl){var bgData={color:fvdSpeedDial.Prefs.get("sd.background_color"),useColor:_b(fvdSpeedDial.Prefs.get("sd.background_color_enabled")),imageUrl:imageUrl+"?"+Math.random(),imageType:fvdSpeedDial.Prefs.get("sd.background_url_type")};var bgContainer=document.documentElement;fvdSpeedDial.Background.setToElem(bgData,bgContainer)})},refreshCSS:function(){fvdSpeedDial.CSS.refresh()},sheduleCSSRefresh:function(){var that=this;this._needCSSRefresh=true;setTimeout(function(){if(that._needCSSRefresh){that.refreshCSS()}},100)},sheduleBackgroundRefresh:function(){var that=this;this._needBackgroundRefresh=true;setTimeout(function(){if(that._needBackgroundRefresh){that.refreshBackground()}},100)},_needRebuildChecker:function(){if(fvdSpeedDial.SpeedDial._needRebuildGroupsList){fvdSpeedDial.SpeedDial._needRebuildGroupsList=false;fvdSpeedDial.SpeedDial.Groups.rebuildGroupsList()}if(fvdSpeedDial.SpeedDial._needRebuild){fvdSpeedDial.SpeedDial._needRebuild=false;fvdSpeedDial.SpeedDial.rebuildCells()}},_getSpeedDialCellById:function(dialId){return document.getElementById("dialCell_"+dialId)},_viewportWidth:function(){var maxRightScrollbarWidth=20;return window.innerWidth-maxRightScrollbarWidth},_viewportHeightForHorizScroll:function(){return window.innerHeight-document.getElementById("cellsContainer").getBoundingClientRect().top},_viewportHeight:function(){return document.body.scrollHeight},_prefsListener:function(name,value){if("sd.thumbs_type"==name||"sd.top_sites_columns"==name){if(name=="sd.thumbs_type"){fvdSpeedDial.Prefs.set("sd.top_sites_columns","auto")}if(fvdSpeedDial.SpeedDial.currentDisplayType()=="speeddial"){fvdSpeedDial.SpeedDial.sheduleRebuild()}}else if("sd.scrolling"==name){window.scrollTo(0,0)}else if("sd.display_mode"==name){window.scrollTo(0,0)}else if("sd.all_groups_limit_dials"==name){if(fvdSpeedDial.SpeedDial.currentDisplayType()=="speeddial"){if(fvdSpeedDial.SpeedDial.currentGroupId()==0){fvdSpeedDial.SpeedDial.sheduleRebuild()}}}else if("sd.thumbs_type_most_visited"==name||"sd.most_visited_columns"==name||"sd.max_most_visited_records"==name){if(fvdSpeedDial.SpeedDial.currentDisplayType()=="mostvisited"){fvdSpeedDial.SpeedDial.sheduleRebuild()}if(name=="sd.thumbs_type_most_visited"){fvdSpeedDial.Prefs.set("sd.most_visited_columns","auto")}}else if("sd.max_recently_closed_records"==name||"sd.recentlyclosed_columns"==name){if(fvdSpeedDial.SpeedDial.currentDisplayType()=="recentlyclosed"){fvdSpeedDial.SpeedDial.sheduleRebuild()}}else if(name=="sd.search_bar_expanded"){fvdSpeedDial.SpeedDial.refreshSpeedDialWrapperHeight()}else if(["sd.enable_top_sites","sd.enable_most_visited","sd.enable_recently_closed"].indexOf(name)!=-1){fvdSpeedDial.SpeedDial._displayType=null}else if(["sd.speeddial_expanded","sd.mostvisited_expanded","sd.recentlyclosed_expanded"].indexOf(name)!=-1){var displayType=name.replace("sd.","").replace("_expanded","");if(displayType==fvdSpeedDial.SpeedDial.currentDisplayType()){fvdSpeedDial.SpeedDial.refreshExpandState()}if(value&&fvdSpeedDial.Prefs.get("sd.display_mode")=="fancy"){fvdSpeedDial.SpeedDial.sheduleRebuild()}}else if(name.indexOf("sd.text.")==0||["sd.show_urls_under_dials","sd.dials_opacity","sd.show_icons_and_titles_above_dials","sd.display_dial_background","sd.display_quick_menu_and_clicks"].indexOf(name)!=-1){fvdSpeedDial.SpeedDial.sheduleCSSRefresh()}else if(name.indexOf("sd.background")==0){fvdSpeedDial.SpeedDial.sheduleBackgroundRefresh()}else if(name=="collapsed_message.with_poweroff.display"||name=="collapsed_message.without_poweroff.display"){fvdSpeedDial.SpeedDial.refreshCollapsedMessages();fvdSpeedDial.SpeedDial.refreshLightCollapsedMessageVisibility()}else if(name=="sd.display_mirror"){fvdSpeedDial.SpeedDial.refreshEnableMirrors();

}},_getDialIdByCell:function(cell){return cell.getAttribute("id").replace("dialCell_","")},_getGroupByItem:function(item){return item.getAttribute("id").replace("group_select_","")},_dialsAreaSize:function(params){if(typeof params.objects=="undefined"){params.objects=document.getElementById("cellsContainer").childNodes.length}var cellSize=this._currentCellSize();var cellsInRow=this.cellsInRowMax(null,null,params).cols;var areaWidth=cellSize.width*cellsInRow+(cellsInRow-1)*this._cellsMarginX;return{width:areaWidth}},_currentSettingsColumnsCount:function(){switch(this.currentDisplayType()){case"speeddial":return fvdSpeedDial.Prefs.get("sd.top_sites_columns");break;case"mostvisited":return fvdSpeedDial.Prefs.get("sd.most_visited_columns");break;case"recentlyclosed":return fvdSpeedDial.Prefs.get("sd.recentlyclosed_columns");break}},_currentListElemSize:function(){if(this.currentDisplayType()=="mostvisited"){return this._listElemSizeMostVisited}else{return this._listElemSize}},_currentCellSize:function(){var size=null;var that=this;if(fvdSpeedDial.Prefs.get("sd.display_mode")=="fancy"){size=parseInt(fvdSpeedDial.Prefs.get("sd.custom_dial_size_fancy"))}else{size=parseInt(fvdSpeedDial.Prefs.get("sd.custom_dial_size"))}return{width:size,height:Math.round(size/that._cellsSizeRatio)}},_listContainer:function(){return document.getElementById("listContainer")},_cellsContainer:function(){return document.getElementById("cellsContainer")}};fvdSpeedDial.SpeedDial=new SpeedDial})();(function(){var ContextMenus=function(){};ContextMenus.prototype={_globalMenu:null,_speedDialCellMenu:null,_speedDialGroupContextMenu:null,_speedDialGroupManageGroupsMenu:null,_mostVisitedCellMenu:null,_mostVisitedInGroupUrlMenu:null,_appsCellMenu:null,_recentlyClosedCellMenu:null,init:function(){var that=this;setTimeout(function(){that._appsCellMenu=new dhtmlXMenuObject;that._appsCellMenu.renderAsContextMenu();that.rebuildAppsCellMenu();that._appsCellMenu.attachEvent("onclick",function(action,cellId){var cell=document.getElementById(cellId);var appId=cell.getAttribute("_app");switch(action){case"open":chrome.management.launchApp(appId);break;case"remove":chrome.management.uninstall(appId);break}});that._recentlyClosedCellMenu=new dhtmlXMenuObject;that._recentlyClosedCellMenu.renderAsContextMenu();that.rebuildRecentlyClosedCellMenu();that._recentlyClosedCellMenu.attachEvent("onclick",function(action,cellId){var cell=document.getElementById(cellId);if(!cell){return false}var dialId=fvdSpeedDial.SpeedDial._getDialIdByCell(cell);fvdSpeedDial.Storage.RecentlyClosed.get(dialId,function(data){switch(action){case"open_tab":fvdSpeedDial.Utils.Opener.currentTab(data.url);break;case"open_new_tab":fvdSpeedDial.Utils.Opener.newTab(data.url);break;case"open_bg_tab":fvdSpeedDial.Utils.Opener.backgroundTab(data.url);break;case"add_to_speeddial":fvdSpeedDial.Dialogs.addDial(data,"speeddial",true);break;case"remove":fvdSpeedDial.Storage.RecentlyClosed.remove(data.id,function(){fvdSpeedDial.SpeedDial.sheduleFullRebuild()});break;case"block":fvdSpeedDial.Dialogs.deny({type:"url",sign:data.url});break;case"copy_url":fvdSpeedDial.Utils.copyToClipboard(data.url);break}})});that._mostVisitedInGroupUrlMenu=new dhtmlXMenuObject;that._mostVisitedInGroupUrlMenu.renderAsContextMenu();that._mostVisitedInGroupUrlMenu.attachEvent("onclick",function(action,cellId){var dialId=cellId.replace("mostvisitedInGroupUrl_","");fvdSpeedDial.Storage.MostVisited.getById(dialId,fvdSpeedDial.SpeedDial.currentGroupId(),"url",function(data){switch(action){case"open_tab":fvdSpeedDial.Utils.Opener.currentTab(data.url);break;case"open_new_tab":fvdSpeedDial.Utils.Opener.newTab(data.url);break;case"open_bg_tab":fvdSpeedDial.Utils.Opener.backgroundTab(data.url);break;case"add_to_speeddial":fvdSpeedDial.Dialogs.addDial(data,"speeddial",true,function(){fvdSpeedDial.Dialogs.ViewGroup.currentDlg.close()});break;case"remove":fvdSpeedDial.Storage.MostVisited.deleteId(data.id,function(result){if(result.result){fvdSpeedDial.Dialogs.ViewGroup.rebuild();fvdSpeedDial.SpeedDial.sheduleFullRebuild()}});break;case"block":fvdSpeedDial.Dialogs.deny({type:"url",sign:data.url});break;case"copy_url":fvdSpeedDial.Utils.copyToClipboard(data.url);break}})});that.rebuildMostVisitedInGroupUrlMenu();that._mostVisitedCellMenu=new dhtmlXMenuObject;that._mostVisitedCellMenu.renderAsContextMenu();that._mostVisitedCellMenu.attachEvent("onContextMenu",function(x,cellId){var cell=document.getElementById(cellId);if(!cell){return false}var dialId=fvdSpeedDial.SpeedDial._getDialIdByCell(cell);fvdSpeedDial.Storage.MostVisited.getById(dialId,fvdSpeedDial.SpeedDial.currentGroupId(),null,function(data){fvdSpeedDial.Storage.MostVisited.extendData(data,function(extendedData){if(extendedData.thumb_source_type=="screen"){that._mostVisitedCellMenu.setItemEnabled("refresh")}else{that._mostVisitedCellMenu.setItemDisabled("refresh")}})})});that._mostVisitedCellMenu.attachEvent("onClick",function(action,cellId){var cell=document.getElementById(cellId);if(!cell){return false}var dialId=fvdSpeedDial.SpeedDial._getDialIdByCell(cell);fvdSpeedDial.Storage.MostVisited.getById(dialId,fvdSpeedDial.SpeedDial.currentGroupId(),null,function(data){if(data){switch(action){case"open_tab":fvdSpeedDial.Utils.Opener.currentTab(data.url);break;case"open_new_tab":fvdSpeedDial.Utils.Opener.newTab(data.url);break;case"open_bg_tab":fvdSpeedDial.Utils.Opener.backgroundTab(data.url);break;case"add_to_speeddial":if(data.title){}else if(data.auto_title){data.title=data.auto_title}fvdSpeedDial.Dialogs.addDial(data,"speeddial",true);break;case"edit":fvdSpeedDial.Storage.MostVisited.extendData(data,function(extendedData){fvdSpeedDial.Dialogs.addDial(extendedData,"mostvisited",false)});break;case"refresh":fvdSpeedDial.Storage.MostVisited.extendData(data,function(extendedData){if(extendedData.get_screen_method=="manual"){fvdSpeedDial.SpeedDial.makeThumb(extendedData.id,extendedData.url,"mostvisited",extendedData.screen_delay)}else{fvdSpeedDial.SpeedDial.ThumbManager.hiddenCaptureThumb({type:"mostvisited",interval:fvdSpeedDial.SpeedDial.currentGroupId(),data:{id:dialId},elemId:cell.getAttribute("id")})}});break;case"remove":fvdSpeedDial.Storage.MostVisited.deleteId(data.id,function(result){if(result.result){fvdSpeedDial.SpeedDial.dialRemoveAnimate(data.id)}});break;case"block":fvdSpeedDial.Dialogs.deny({type:"url",sign:data.url});break;case"copy_url":fvdSpeedDial.Utils.copyToClipboard(data.url);break}}})});that.rebuildMostVisitedCellMenu();that._speedDialGroupManageGroupsMenu=new dhtmlXMenuObject;that._speedDialGroupManageGroupsMenu.renderAsContextMenu();that.rebuildSpeedDialGroupManageGroupsMenu();that._speedDialGroupManageGroupsMenu.attachEvent("onContextMenu",function(x,elemId){var groupId=elemId.replace("group_","");var menu=that._speedDialGroupManageGroupsMenu;menu.setCheckboxState("default_group",fvdSpeedDial.Prefs.get("sd.default_group")==groupId)});that._speedDialGroupManageGroupsMenu.attachEvent("onClick",function(action,elemId){var groupId=elemId.replace("group_","");switch(action){case"default_group":fvdSpeedDial.Prefs.set("sd.default_group",groupId);that._speedDialGroupManageGroupsMenu.setCheckboxState("default_group",true);break;case"edit":fvdSpeedDial.Dialogs.ManageGroups.editGroupById(groupId);break;case"remove":fvdSpeedDial.SpeedDial.removeGroup(groupId);break}});that._speedDialGroupContextMenu=new dhtmlXMenuObject;that._speedDialGroupContextMenu.renderAsContextMenu();that._speedDialGroupContextMenu.attachEvent("onContextMenu",function(x,elemId){var elem=document.getElementById(elemId);if(!elem){return false}var groupId=fvdSpeedDial.SpeedDial._getGroupByItem(elem);var menu=that._speedDialGroupContextMenu;if(groupId==0){menu.setItemDisabled("edit");menu.setItemDisabled("remove")}else{menu.setItemEnabled("edit");menu.setItemEnabled("remove")}menu.setCheckboxState("default_group",fvdSpeedDial.Prefs.get("sd.default_group")==groupId);menu.setCheckboxState("last_selected_group",fvdSpeedDial.Prefs.get("sd.default_group")==-1)});that._speedDialGroupContextMenu.attachEvent("onClick",function(action,elemId){var menu=that._speedDialGroupContextMenu;var elem=document.getElementById(elemId);if(!elem){return false}var groupId=fvdSpeedDial.SpeedDial._getGroupByItem(elem);switch(action){case"sync_group":var sync=menu.getCheckboxState("sync_group")?1:0;fvdSpeedDial.Utils.Async.chain([function(chainCallback){fvdSpeedDial.Sync.syncAddonExists(function(exists){if(!exists){fvdSpeedDial.Dialogs.installFVDSync()}else{chainCallback()}})},function(chainCallback){if(sync==1){chainCallback()}else{fvdSpeedDial.Dialogs.setGroupNoSyncDialog(function(set){if(set){chainCallback()}})}},function(){fvdSpeedDial.Storage.groupUpdate(groupId,{sync:sync})}]);break;case"default_group":fvdSpeedDial.Prefs.set("sd.default_group",groupId);menu.setCheckboxState("default_group",true);menu.setCheckboxState("last_selected_group",false);break;case"last_selected_group":fvdSpeedDial.Prefs.set("sd.default_group",-1);menu.setCheckboxState("default_group",false);menu.setCheckboxState("last_selected_group",true);break;case"edit":fvdSpeedDial.Dialogs.addGroup(groupId);break;case"remove":fvdSpeedDial.SpeedDial.removeGroup(groupId);break;case"open_all":fvdSpeedDial.SpeedDial.openAllDialsInGrop(groupId);break;case"manage":fvdSpeedDial.Dialogs.manageGroups();break;case"refresh_all":fvdSpeedDial.SpeedDial.refreshAllDialsInGroup(fvdSpeedDial.SpeedDial.currentGroupId());break}});that.rebuildSpeedDialGroupContextMenu();that._speedDialCellMenu=new dhtmlXMenuObject;that._speedDialCellMenu.renderAsContextMenu();that._speedDialCellMenu.attachEvent("onContextMenu",function(x,elemId){var elem=document.getElementById(elemId);if(!elem){return false}var dialId=fvdSpeedDial.SpeedDial._getDialIdByCell(elem);fvdSpeedDial.Storage.getDial(dialId,function(data){fvdSpeedDial.Storage.groupsList(function(groups){for(var i=0;i!=groups.length;i++){that._speedDialCellMenu.setItemEnabled("move_to_gr_"+groups[i].id)}that._speedDialCellMenu.setItemDisabled("move_to_gr_"+data.group_id);if(data.thumb_source_type=="screen"){that._speedDialCellMenu.setItemEnabled("refresh")}else{that._speedDialCellMenu.setItemDisabled("refresh")}})})});that._speedDialCellMenu.attachEvent("onclick",function(action,elemId){var elem=document.getElementById(elemId);if(!elem){return false}var dialId=fvdSpeedDial.SpeedDial._getDialIdByCell(elem);switch(action){case"edit":fvdSpeedDial.Storage.getDial(dialId,function(data){if(data==null){return}fvdSpeedDial.Dialogs.addDial(data)});break;case"remove":fvdSpeedDial.Dialogs.confirm(_("dlg_confirm_remove_dial_title"),_("dlg_confirm_remove_dial_text"),function(confirmResult){if(confirmResult){fvdSpeedDial.Sync.addDataToSync({category:"deleteDials",data:dialId,translate:"dial"},function(){fvdSpeedDial.Storage.deleteDial(dialId,function(){fvdSpeedDial.SpeedDial.dialRemoveAnimate(dialId)})})}});break;case"refresh":fvdSpeedDial.Storage.getDial(dialId,function(data){if(data.get_screen_method=="manual"){try{fvdSpeedDial.SpeedDial.makeThumb(data.id,data.url,"speeddial",data.screen_delay)}catch(ex){}}else{fvdSpeedDial.SpeedDial.ThumbManager.hiddenCaptureThumb({type:"speeddial",data:{id:dialId},elemId:elem.getAttribute("id")})}});break;case"copy_url":fvdSpeedDial.Storage.getDial(dialId,function(data){fvdSpeedDial.Utils.copyToClipboard(data.url)});break;case"open_tab":fvdSpeedDial.Storage.getDial(dialId,function(data){fvdSpeedDial.Utils.Opener.currentTab(data.url)});break;case"open_new_tab":fvdSpeedDial.Storage.getDial(dialId,function(data){fvdSpeedDial.Utils.Opener.newTab(data.url)});break;case"open_bg_tab":fvdSpeedDial.Storage.getDial(dialId,function(data){fvdSpeedDial.Utils.Opener.backgroundTab(data.url)});break}if(action.indexOf("move_to_gr_")!=-1){var groupId=action.replace("move_to_gr_","");var can=false;fvdSpeedDial.Utils.Async.chain([function(chainCallback){fvdSpeedDial.Storage.groupCanSyncById(groupId,function(c){can=c;if(!can){fvdSpeedDial.Dialogs.moveDialToNoSyncGroupDialog(function(r){if(r){chainCallback()}})}else{chainCallback()}})},function(){fvdSpeedDial.SpeedDial.dialMoveToGroup(dialId,groupId)}])}});that.rebuildSpeedDialCellMenu()},0)},assignToElem:function(elem,type){var menu=null;switch(type){case"speeddial":menu=this._speedDialCellMenu;break;case"speeddialGroup":menu=this._speedDialGroupContextMenu;break;case"speeddialManageGroups":menu=this._speedDialGroupManageGroupsMenu;break;case"mostvisited":menu=this._mostVisitedCellMenu;break;case"mostvisitedGroupUrl":var menu=this._mostVisitedInGroupUrlMenu;break;case"recentlyclosed":menu=this._recentlyClosedCellMenu;break;case"app":menu=this._appsCellMenu;break}if(menu!=null){menu.addContextZone(elem)}},setGlobalMenu:function(type){var menu=null;switch(type){case"speeddial":menu=this._createSpeedDialGlobalMenu();break;case"mostvisited":menu=this._createMostVisitedGlobalMenu();break;case"recentlyclosed":menu=this._createRecentlyClosedGlobalMenu();break}if(this._globalMenu!=null){this._globalMenu.unload()}menu.addContextZone(document.documentElement);this._globalMenu=menu},rebuildSpeedDialCellMenu:function(callback){var that=this;fvdSpeedDial.Storage.groupsList(function(groups){that._speedDialCellMenu.clearAll();that._speedDialCellMenu.addNewChild(that._speedDialCellMenu.topId,0,"open_tab",_("cm_speeddial_cell_open_tab"),false,false);that._speedDialCellMenu.addNewChild(that._speedDialCellMenu.topId,1,"open_new_tab",_("cm_speeddial_cell_open_new_tab"),false,false);that._speedDialCellMenu.addNewChild(that._speedDialCellMenu.topId,2,"open_bg_tab",_("cm_speeddial_cell_open_bg_tab"),false,false);that._speedDialCellMenu.addNewSeparator("open_bg_tab","sep");that._speedDialCellMenu.addNewChild(that._speedDialCellMenu.topId,4,"refresh",_("cm_speeddial_cell_refresh"),false,false);that._speedDialCellMenu.addNewChild(that._speedDialCellMenu.topId,5,"edit",_("cm_speeddial_cell_edit"),false,false);that._speedDialCellMenu.addNewChild(that._speedDialCellMenu.topId,6,"remove",_("cm_speeddial_cell_remove"),false,false);that._speedDialCellMenu.addNewChild(that._speedDialCellMenu.topId,7,"copy_url",_("cm_speeddial_cell_copy_url"),false,false);that._speedDialCellMenu.addNewChild(that._speedDialCellMenu.topId,8,"move_to",_("cm_speeddial_cell_move_to"),false,false);for(var i=0;i!=groups.length;i++){that._speedDialCellMenu.addNewChild("move_to",i,"move_to_gr_"+groups[i].id,groups[i].name,false,false)}if(callback){callback()}})},rebuildSpeedDialGroupManageGroupsMenu:function(){var menu=this._speedDialGroupManageGroupsMenu;menu.clearAll();menu.addNewChild(menu.topId,0,"edit",_("cm_speeddial_group_edit"),false,false);menu.addCheckbox("sibling","edit",null,"default_group",_("cm_speeddial_group_default"),false,false);menu.addNewChild(menu.topId,2,"remove",_("cm_speeddial_group_remove"),false,false)},rebuildSpeedDialGroupContextMenu:function(callback){var menu=this._speedDialGroupContextMenu;menu.clearAll();menu.addNewChild(menu.topId,0,"edit",_("cm_speeddial_group_edit"),false,false);menu.addCheckbox("sibling","edit",null,"default_group",_("cm_speeddial_group_default"),false,false);menu.addCheckbox("sibling","default_group",null,"last_selected_group",_("newtab_last_used_group"),false,false);menu.addNewChild(menu.topId,4,"remove",_("cm_speeddial_group_remove"),false,false);menu.addNewChild(menu.topId,5,"open_all",_("cm_speeddial_group_open_all"),false,false);menu.addNewChild(menu.topId,6,"manage",_("cm_speeddial_group_manage"),false,false);menu.addNewChild(menu.topId,7,"refresh_all",_("cm_refresh_all"),false,false);menu.addNewSeparator("remove","sep")},rebuildMostVisitedInGroupUrlMenu:function(){var menu=this._mostVisitedInGroupUrlMenu;menu.clearAll();menu.addNewChild(menu.topId,0,"open_tab",_("cm_speeddial_cell_open_tab"),false,false);menu.addNewChild(menu.topId,1,"open_new_tab",_("cm_speeddial_cell_open_new_tab"),false,false);menu.addNewChild(menu.topId,2,"open_bg_tab",_("cm_speeddial_cell_open_bg_tab"),false,false);menu.addNewChild(menu.topId,3,"remove",_("cm_speeddial_cell_remove"),false,false);menu.addNewChild(menu.topId,4,"add_to_speeddial",_("cm_mostvisited_cell_add_to_speeddial"),false,"/images/icons/16x16.png");menu.addNewChild(menu.topId,5,"block",_("cm_mostvisited_cell_block"),false,false);menu.addNewChild(menu.topId,6,"copy_url",_("cm_speeddial_cell_copy_url"),false,false);menu.addNewSeparator("open_bg_tab","sep")},rebuildRecentlyClosedCellMenu:function(){var menu=this._recentlyClosedCellMenu;menu.clearAll();menu.addNewChild(menu.topId,0,"open_tab",_("cm_speeddial_cell_open_tab"),false,false);menu.addNewChild(menu.topId,1,"open_new_tab",_("cm_speeddial_cell_open_new_tab"),false,false);menu.addNewChild(menu.topId,2,"open_bg_tab",_("cm_speeddial_cell_open_bg_tab"),false,false);menu.addNewSeparator("open_bg_tab","sep");menu.addNewChild(menu.topId,4,"add_to_speeddial",_("cm_mostvisited_cell_add_to_speeddial"),false,"/images/icons/16x16.png");menu.addNewChild(menu.topId,6,"remove",_("cm_speeddial_cell_remove"),false,false);menu.addNewChild(menu.topId,7,"block",_("cm_mostvisited_cell_block"),false,false);menu.addNewChild(menu.topId,8,"copy_url",_("cm_speeddial_cell_copy_url"),false,false)},rebuildMostVisitedCellMenu:function(){var menu=this._mostVisitedCellMenu;menu.clearAll();menu.addNewChild(menu.topId,0,"open_tab",_("cm_speeddial_cell_open_tab"),false,false);menu.addNewChild(menu.topId,1,"open_new_tab",_("cm_speeddial_cell_open_new_tab"),false,false);menu.addNewChild(menu.topId,2,"open_bg_tab",_("cm_speeddial_cell_open_bg_tab"),false,false);menu.addNewSeparator("open_bg_tab","sep");menu.addNewChild(menu.topId,4,"refresh",_("cm_speeddial_cell_refresh"),false,false);menu.addNewChild(menu.topId,5,"add_to_speeddial",_("cm_mostvisited_cell_add_to_speeddial"),false,"/images/icons/16x16.png");menu.addNewChild(menu.topId,6,"edit",_("cm_speeddial_cell_edit"),false,false);menu.addNewChild(menu.topId,7,"remove",_("cm_speeddial_cell_remove"),false,false);menu.addNewChild(menu.topId,8,"block",_("cm_mostvisited_cell_block"),false,false);menu.addNewChild(menu.topId,9,"copy_url",_("cm_speeddial_cell_copy_url"),false,false)},rebuildAppsCellMenu:function(){var menu=this._appsCellMenu;menu.clearAll();menu.addNewChild(menu.topId,0,"open",_("cm_apps_open"),false,false);menu.addNewChild(menu.topId,1,"remove",_("cm_apps_remove"),false,false)},_createRecentlyClosedGlobalMenu:function(){var menu=new dhtmlXMenuObject;menu.renderAsContextMenu();menu.addNewChild(menu.topId,0,"open_all",_("cm_speeddial_global_open_all"),false,false);menu.addNewChild(menu.topId,1,"style",_("cm_speeddial_global_style"),false,false);menu.addRadioButton("child","style",0,"style_fancy",_("cm_speeddial_global_style_fancy"),"style",false,false);menu.addRadioButton("child","style",1,"style_standard",_("cm_speeddial_global_style_standard"),"style",false,false);function rebuildColumns(){try{menu.removeItem("number_of_columns")}catch(ex){}var columnsAuto=fvdSpeedDial.SpeedDial.cellsInRowMax("auto");var title=null;if(columnsAuto.rows){columnsAuto=columnsAuto.rows;title=_("cm_speeddial_global_number_of_rows")}else if(columnsAuto.cols){columnsAuto=columnsAuto.cols;title=_("cm_speeddial_global_number_of_columns")}menu.addNewChild(menu.topId,1,"number_of_columns",title,false,false);var preValue=fvdSpeedDial.Prefs.get("sd.recentlyclosed_columns");var numOfColumns=columnsAuto;if(preValue!="auto"){if(preValue>columnsAuto||isNaN(numOfColumns)){numOfColumns=preValue}}menu.addRadioButton("child","number_of_columns",0,"columns_auto",_("newtab_columns_auto"),"number_of_columns",false,false);for(var columnNum=1;columnNum<=numOfColumns;columnNum++){menu.addRadioButton("child","number_of_columns",columnNum,"columns_"+columnNum,columnNum,"number_of_columns",false,false)}menu.setRadioChecked("number_of_columns","columns_"+preValue)}menu.attachEvent("onContextMenu",function(){rebuildColumns();if(fvdSpeedDial.PowerOffClient.isHidden()){menu.hide()}var checkId="style_"+fvdSpeedDial.Prefs.get("sd.display_mode");menu.setRadioChecked("style",checkId)});menu.attachEvent("onClick",function(action){if(action.indexOf("columns_")==0){var columns=action.replace("columns_","");fvdSpeedDial.Prefs.set("sd.recentlyclosed_columns",columns);return}else if(action.indexOf("style")==0){var style=action.replace("style_","");fvdSpeedDial.Prefs.set("sd.display_mode",style)}else if(action=="open_all"){fvdSpeedDial.SpeedDial.openAllCurrentRecentlyClosedLinks()}});return menu},_createMostVisitedGlobalMenu:function(){var menu=new dhtmlXMenuObject;menu.renderAsContextMenu();menu.addNewChild(menu.topId,0,"open_all",_("cm_speeddial_global_open_all"),false,false);menu.addNewChild(menu.topId,1,"style",_("cm_speeddial_global_style"),false,false);menu.addNewChild(menu.topId,2,"view",_("cm_speeddial_global_view"),false,false);menu.addRadioButton("child","style",0,"style_fancy",_("cm_speeddial_global_style_fancy"),"style",false,false);menu.addRadioButton("child","style",1,"style_standard",_("cm_speeddial_global_style_standard"),"style",false,false);var currentCellSize=fvdSpeedDial.SpeedDial._currentCellSize();menu.addRadioButton("child","view",0,"view_list",_("cm_speeddial_global_view_list"),"view",false,false);menu.addRadioButton("child","view",1,"view_custom",_("cm_speeddial_global_preview")+" ( "+currentCellSize.width+"x"+currentCellSize.height+" )","view",false,false);menu.addNewChild("view",2,"view_dial_size",_("cm_speeddial_global_change_size"),false,false);menu.addNewChild(menu.topId,3,"scroll_type",_("cm_scrolling_type"),false,false);menu.addRadioButton("child","scroll_type",0,"scroll_type_vertical",_("options_scrolling_vertical"),"scroll_type",false,false);menu.addRadioButton("child","scroll_type",1,"scroll_type_horizontal",_("options_scrolling_horizontal"),"scroll_type",false,false);menu.addNewSeparator("open_all","sep");function rebuildColumns(){try{menu.removeItem("number_of_columns")}catch(ex){}var columnsAuto=fvdSpeedDial.SpeedDial.cellsInRowMax("auto");var title=null;if(columnsAuto.rows){columnsAuto=columnsAuto.rows;title=_("cm_speeddial_global_number_of_rows")}else if(columnsAuto.cols){columnsAuto=columnsAuto.cols;title=_("cm_speeddial_global_number_of_columns")}menu.addNewChild(menu.topId,5,"number_of_columns",title,false,false);var preValue=fvdSpeedDial.Prefs.get("sd.most_visited_columns");var numOfColumns=columnsAuto;if(preValue!="auto"){if(preValue>columnsAuto||isNaN(numOfColumns)){numOfColumns=preValue}}menu.addRadioButton("child","number_of_columns",0,"columns_auto",_("newtab_columns_auto"),"number_of_columns",false,false);for(var columnNum=1;columnNum<=numOfColumns;columnNum++){menu.addRadioButton("child","number_of_columns",columnNum,"columns_"+columnNum,columnNum,"number_of_columns",false,false)}menu.setRadioChecked("number_of_columns","columns_"+preValue)}function onContextMenu(){rebuildColumns();var checkId="view_"+fvdSpeedDial.SpeedDial.currentThumbsMode();menu.setRadioChecked("view",checkId);checkId="style_"+fvdSpeedDial.Prefs.get("sd.display_mode");menu.setRadioChecked("style",checkId);checkId="scroll_type_"+fvdSpeedDial.Prefs.get("sd.scrolling");menu.setRadioChecked("scroll_type",checkId);if(fvdSpeedDial.Prefs.get("sd.display_mode")=="fancy"||fvdSpeedDial.SpeedDial.currentThumbsMode()=="list"){menu.setItemDisabled("scroll_type")}else{menu.setItemEnabled("scroll_type")}if(fvdSpeedDial.PowerOffClient.isHidden()){menu.hide()}}menu.attachEvent("onContextMenu",onContextMenu);menu.attachEvent("onClick",function(action){var callOnContextMenu=true;if(action.indexOf("view")==0){if(action=="view_dial_size"){fvdSpeedDial.SpeedDial.openSizeSetup()}else{var thumbsMode=action.replace("view_","");fvdSpeedDial.SpeedDial.setCurrentThumbsMode(thumbsMode);rebuildColumns()}}else if(action.indexOf("style")==0){var style=action.replace("style_","");fvdSpeedDial.Prefs.set("sd.display_mode",style);menu.setItemDisabled("style_fancy");menu.setItemDisabled("style_standard");setTimeout(function(){menu.setItemEnabled("style_fancy");menu.setItemEnabled("style_standard")},1e3)}else if(action.indexOf("columns_")==0){var columns=action.replace("columns_","");fvdSpeedDial.Prefs.set("sd.most_visited_columns",columns);callOnContextMenu=false}else if(action.indexOf("scroll_type_")==0){var newScrollType=action.replace("scroll_type_","");fvdSpeedDial.Prefs.set("sd.scrolling",newScrollType)}else if(action=="open_all"){fvdSpeedDial.SpeedDial.openAllCurrentMostVisitedLinks()}if(callOnContextMenu){onContextMenu()}});return menu},_createSpeedDialGlobalMenu:function(){var menu=new dhtmlXMenuObject;menu.renderAsContextMenu();menu.addNewChild(menu.topId,0,"add_dial",_("cm_speeddial_global_add_dial"),false,"/images/newtab/contextmenu/plus.png");menu.addNewChild(menu.topId,1,"open_all",_("cm_speeddial_global_open_all"),false,false);menu.addNewChild(menu.topId,2,"style",_("cm_speeddial_global_style"),false,false);var currentCellSize=fvdSpeedDial.SpeedDial._currentCellSize();menu.addNewChild(menu.topId,3,"view",_("cm_speeddial_global_view"),false,false);menu.addRadioButton("child","style",0,"style_fancy",_("cm_speeddial_global_style_fancy"),"style",false,false);menu.addRadioButton("child","style",1,"style_standard",_("cm_speeddial_global_style_standard"),"style",false,false);menu.addRadioButton("child","view",0,"view_list",_("cm_speeddial_global_view_list"),"view",false,false);menu.addRadioButton("child","view",1,"view_custom",_("cm_speeddial_global_preview")+" ( "+currentCellSize.width+"x"+currentCellSize.height+" )","view",false,false);menu.addNewChild("view",2,"view_dial_size",_("cm_speeddial_global_change_size"),false,false);menu.addNewChild(menu.topId,4,"scroll_type",_("cm_scrolling_type"),false,false);menu.addRadioButton("child","scroll_type",0,"scroll_type_vertical",_("options_scrolling_vertical"),"scroll_type",false,false);menu.addRadioButton("child","scroll_type",1,"scroll_type_horizontal",_("options_scrolling_horizontal"),"scroll_type",false,false);menu.addNewChild(menu.topId,5,"refresh_all",_("cm_refresh_all"),false,false);menu.addNewSeparator("add_dial","sep");function rebuildColumns(){try{menu.removeItem("number_of_columns")}catch(ex){}var columnsAuto=fvdSpeedDial.SpeedDial.cellsInRowMax("auto");var title=null;if(columnsAuto.rows){columnsAuto=columnsAuto.rows;title=_("cm_speeddial_global_number_of_rows")}else if(columnsAuto.cols){columnsAuto=columnsAuto.cols;title=_("cm_speeddial_global_number_of_columns")}menu.addNewChild(menu.topId,4,"number_of_columns",title,false,false);var preValue=fvdSpeedDial.Prefs.get("sd.top_sites_columns");var numOfColumns=columnsAuto;if(preValue!="auto"){if(preValue>columnsAuto||isNaN(numOfColumns)){numOfColumns=preValue}}menu.addRadioButton("child","number_of_columns",0,"columns_auto",_("newtab_columns_auto"),"number_of_columns",false,false);for(var columnNum=1;columnNum<=numOfColumns;columnNum++){menu.addRadioButton("child","number_of_columns",columnNum,"columns_"+columnNum,columnNum,"number_of_columns",false,false)}menu.setRadioChecked("number_of_columns","columns_"+preValue)}function onContextMenu(){rebuildColumns();var checkId="view_"+fvdSpeedDial.SpeedDial.currentThumbsMode();menu.setRadioChecked("view",checkId);checkId="style_"+fvdSpeedDial.Prefs.get("sd.display_mode");menu.setRadioChecked("style",checkId);checkId="scroll_type_"+fvdSpeedDial.Prefs.get("sd.scrolling");menu.setRadioChecked("scroll_type",checkId);if(fvdSpeedDial.Prefs.get("sd.display_mode")=="fancy"||fvdSpeedDial.SpeedDial.currentThumbsMode()=="list"){menu.setItemDisabled("scroll_type")}else{menu.setItemEnabled("scroll_type")}if(fvdSpeedDial.PowerOffClient.isHidden()){menu.hide()}}menu.attachEvent("onContextMenu",onContextMenu);menu.attachEvent("onClick",function(action){var callOnContextMenu=true;if(action.indexOf("view")==0){if(action=="view_dial_size"){fvdSpeedDial.SpeedDial.openSizeSetup()}else{var thumbsMode=action.replace("view_","");fvdSpeedDial.SpeedDial.setCurrentThumbsMode(thumbsMode);rebuildColumns()}}else if(action.indexOf("style")==0){menu.setItemDisabled("style_fancy");menu.setItemDisabled("style_standard");setTimeout(function(){menu.setItemEnabled("style_fancy");menu.setItemEnabled("style_standard")},1e3);var style=action.replace("style_","");fvdSpeedDial.Prefs.set("sd.display_mode",style)}else if(action.indexOf("columns_")==0){var columns=action.replace("columns_","");fvdSpeedDial.Prefs.set("sd.top_sites_columns",columns);callOnContextMenu=false}else if(action.indexOf("scroll_type_")==0){var newScrollType=action.replace("scroll_type_","");fvdSpeedDial.Prefs.set("sd.scrolling",newScrollType)}switch(action){case"add_dial":fvdSpeedDial.Dialogs.addDial();break;case"open_all":fvdSpeedDial.SpeedDial.openAllDialsInGrop(fvdSpeedDial.SpeedDial.currentGroupId());break;case"refresh_all":fvdSpeedDial.SpeedDial.refreshAllDialsInGroup(fvdSpeedDial.SpeedDial.currentGroupId());break}if(callOnContextMenu){onContextMenu()}});return menu}};this.ContextMenus=new ContextMenus}).apply(fvdSpeedDial);(function(){var placeHolderInserted;function Position(x,y){this.X=x;this.Y=y;this.Add=function(val){var newPos=new Position(this.X,this.Y);if(val!=null){if(!isNaN(val.X))newPos.X+=val.X;if(!isNaN(val.Y))newPos.Y+=val.Y}return newPos};this.Subtract=function(val){var newPos=new Position(this.X,this.Y);if(val!=null){if(!isNaN(val.X))newPos.X-=val.X;if(!isNaN(val.Y))newPos.Y-=val.Y}return newPos};this.Min=function(val){var newPos=new Position(this.X,this.Y);if(val==null)return newPos;if(!isNaN(val.X)&&this.X>val.X)newPos.X=val.X;if(!isNaN(val.Y)&&this.Y>val.Y)newPos.Y=val.Y;return newPos};this.Max=function(val){var newPos=new Position(this.X,this.Y);if(val==null)return newPos;if(!isNaN(val.X)&&this.X<val.X)newPos.X=val.X;if(!isNaN(val.Y)&&this.Y<val.Y)newPos.Y=val.Y;return newPos};this.Bound=function(lower,upper){var newPos=this.Max(lower);return newPos.Min(upper)};this.Check=function(){var newPos=new Position(this.X,this.Y);if(isNaN(newPos.X))newPos.X=0;if(isNaN(newPos.Y))newPos.Y=0;return newPos};this.Apply=function(element){if(typeof element=="string")element=document.getElementById(element);if(element==null)return;if(!isNaN(this.X))element.style.left=this.X+"px";if(!isNaN(this.Y))element.style.top=this.Y+"px"}}function hookEvent(element,eventName,callback){if(typeof element=="string")element=document.getElementById(element);if(element==null)return;if(element.addEventListener){element.addEventListener(eventName,callback,false)}else if(element.attachEvent)element.attachEvent("on"+eventName,callback)}function unhookEvent(element,eventName,callback){if(typeof element=="string")element=document.getElementById(element);if(element==null)return;if(element.removeEventListener)element.removeEventListener(eventName,callback,false);else if(element.detachEvent)element.detachEvent("on"+eventName,callback)}function cancelEvent(e){e=e?e:window.event;if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault();e.cancelBubble=true;e.cancel=true;e.returnValue=false;return false}function getEventTarget(e){e=e?e:window.event;return e.target?e.target:e.srcElement}function absoluteCursorPostion(eventObj){eventObj=eventObj?eventObj:window.event;if(isNaN(window.scrollX))return new Position(eventObj.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,eventObj.clientY+document.documentElement.scrollTop+document.body.scrollTop);else return new Position(eventObj.clientX+window.scrollX,eventObj.clientY+window.scrollY)}function dragObject(element,attachElement,lowerBound,upperBound,startCallback,moveCallback,endCallback,attachLater){if(typeof element=="string")element=document.getElementById(element);if(element==null)return;if(lowerBound!=null&&upperBound!=null){var temp=lowerBound.Min(upperBound);upperBound=lowerBound.Max(upperBound);lowerBound=temp}var cursorStartPos=null;var elementStartPos=null;var dragging=false;var listening=false;var disposed=false;var scrollTopStart=0;var elemStartPosOrigY=null;function listScroll(eventObj){elementStartPos.Y=List.parentNode.scrollTop-scrollTopStart+elemStartPosOrigY}function dragStart(eventObj){scrollTopStart=List.parentNode.scrollTop;if(dragging||!listening||disposed)return;

dragging=true;if(startCallback!=null)startCallback(eventObj,element);cursorStartPos=absoluteCursorPostion(eventObj);elementStartPos=new Position(parseInt(element.style.left),parseInt(element.style.top));elemStartPosOrigY=elementStartPos.Y;elementStartPos=elementStartPos.Check();hookEvent(document,"mousemove",dragGo);hookEvent(List.parentNode,"scroll",listScroll);hookEvent(document,"mouseup",dragStopHook);return cancelEvent(eventObj)}function dragGo(eventObj){if(!dragging||disposed)return;var newPos=absoluteCursorPostion(eventObj);newPos=newPos.Add(elementStartPos).Subtract(cursorStartPos);newPos=newPos.Bound(lowerBound,upperBound);newPos.Apply(element);if(moveCallback!=null)moveCallback(newPos,element,eventObj);return cancelEvent(eventObj)}function dragStopHook(eventObj){dragStop();return cancelEvent(eventObj)}function dragStop(){if(!dragging||disposed)return;unhookEvent(document,"mousemove",dragGo);unhookEvent(document,"mouseup",dragStopHook);unhookEvent(List.parentNode,"scroll",listScroll);cursorStartPos=null;elementStartPos=null;if(endCallback!=null)endCallback(element);dragging=false}this.Dispose=function(){if(disposed)return;this.StopListening(true);element=null;attachElement=null;lowerBound=null;upperBound=null;startCallback=null;moveCallback=null;endCallback=null;disposed=true};this.StartListening=function(){if(listening||disposed)return;listening=true;hookEvent(attachElement,"mousedown",dragStart)};this.StopListening=function(stopCurrentDragging){if(!listening||disposed)return;unhookEvent(attachElement,"mousedown",dragStart);listening=false;if(stopCurrentDragging&&dragging)dragStop()};this.IsDragging=function(){return dragging};this.IsListening=function(){return listening};this.IsDisposed=function(){return disposed};if(typeof attachElement=="string")attachElement=document.getElementById(attachElement);if(attachElement==null)attachElement=element;if(!attachLater)this.StartListening()}var DragLists=function(){};DragLists.prototype={startDragFor:function(list,items,placeHolderClass,className){placeHolderClass=placeHolderClass||"placeHolder";List=list;needClassName=className;if(PlaceHolder!=null){PlaceHolder=null}if(PlaceHolder==null){PlaceHolder=document.createElement("DIV");PlaceHolder.className=placeHolderClass;PlaceHolder.SourceI=null}for(var i=0;i!=items.length;i++){new dragObject(items[i],null,null,null,itemDragBegin,itemMoved,itemDragEnd,false)}}};this.DragLists=new DragLists;var List=null;var PlaceHolder=null;var needClassName="";function itemDragBegin(eventObj,element){element.style.top=element.offsetTop+"px";element.style.left=element.offsetLeft+"px";element.setAttribute("drag",1);List.insertBefore(PlaceHolder,element);PlaceHolder.SourceI=element;placeHolderInserted=false;itemMoved({X:element.offsetLeft,Y:element.offsetTop},element,eventObj)}function itemMoved(newPos,element,eventObj){var yPos=newPos.Y+element.offsetHeight;var temp;var bestItem="end";var listElements=List.getElementsByClassName(needClassName);for(var i=0;i<listElements.length;i++){temp=parseInt(listElements[i].offsetHeight);if(temp>=yPos){bestItem=listElements[i];break}yPos-=temp}if(bestItem==PlaceHolder||bestItem==PlaceHolder.SourceI)return;PlaceHolder.SourceI=bestItem;if(bestItem!="end")List.insertBefore(PlaceHolder,listElements[i]);else List.appendChild(PlaceHolder)}function itemDragEnd(element){if(PlaceHolder.SourceI!=null){PlaceHolder.SourceI=null;List.replaceChild(element,PlaceHolder)}element.removeAttribute("drag");element.style.top="0px";element.style.left="0px"}}).apply(fvdSpeedDial);(function(){const FANCY_BACKGROUND_URL=fvdSpeedDial.Prefs._themeDefaults["fancy"]["sd.background_url"];var CSS=function(){};CSS.prototype={stylesheets:[],getFancyBackgroundUrl:function(){return FANCY_BACKGROUND_URL},setTheme:function(name){document.getElementById("themeCSS").setAttribute("href","/themes/"+name+".css")},refreshTheme:function(){try{this.setTheme(fvdSpeedDial.Prefs.get("sd.display_mode"))}catch(ex){}},refresh:function(){var classesColors={".newtabCell .head":{color:this._color(fvdSpeedDial.Prefs.get("sd.text.cell_title.color")),"font-size":this._size(fvdSpeedDial.Prefs.get("sd.text.cell_title.size")),"font-weight":this._fontWeight(fvdSpeedDial.Prefs.get("sd.text.cell_title.bolder")),display:_b(fvdSpeedDial.Prefs.get("sd.show_icons_and_titles_above_dials"))?"block":"none"},".newtabCell .footer":{color:this._color(fvdSpeedDial.Prefs.get("sd.text.cell_url.color")),"font-size":this._size(fvdSpeedDial.Prefs.get("sd.text.cell_url.size")),"font-weight":this._fontWeight(fvdSpeedDial.Prefs.get("sd.text.cell_url.bolder")),display:_b(fvdSpeedDial.Prefs.get("sd.show_urls_under_dials"))?"block":"none"},".newtabListElem .text":{color:this._color(fvdSpeedDial.Prefs.get("sd.text.list_elem.color")),"font-size":this._size(fvdSpeedDial.Prefs.get("sd.text.list_elem.size")),"font-weight":this._fontWeight(fvdSpeedDial.Prefs.get("sd.text.list_elem.bolder"))},"#listViewTypeSelector":{color:this._color(fvdSpeedDial.Prefs.get("sd.text.list_show_url_title.color")),"font-size":this._size(fvdSpeedDial.Prefs.get("sd.text.list_show_url_title.size")),"font-weight":this._fontWeight(fvdSpeedDial.Prefs.get("sd.text.list_show_url_title.bolder"))},".link":{color:this._color(fvdSpeedDial.Prefs.get("sd.text.list_link.color")),"font-size":this._size(fvdSpeedDial.Prefs.get("sd.text.list_link.size")),"font-weight":this._fontWeight(fvdSpeedDial.Prefs.get("sd.text.list_link.bolder"))},".textother":{color:this._color(fvdSpeedDial.Prefs.get("sd.text.other.color")),"font-size":this._size(fvdSpeedDial.Prefs.get("sd.text.other.size")),"font-weight":this._fontWeight(fvdSpeedDial.Prefs.get("sd.text.other.bolder"))},".newtabCell":{opacity:fvdSpeedDial.Prefs.get("sd.dials_opacity")/100},".newtabListElem":{opacity:fvdSpeedDial.Prefs.get("sd.dials_opacity")/100},"#groupsBox > div":{opacity:fvdSpeedDial.Prefs.get("sd.dials_opacity")/100}};if(!_b(fvdSpeedDial.Prefs.get("sd.display_dial_background"))){classesColors[".newtabCell .body .screenParent"]={"box-shadow":"none !important"};if(!_b(fvdSpeedDial.Prefs.get("sd.display_dial_borders"))){classesColors[".newtabCell .body .screenParent"]["border"]="none !important"}else{classesColors[".newtabCell .body .screenParent"]["border-width"]="1px !important"}classesColors['.newtabCell[type="plus"] .body .preview-image']={background:"none !important"};classesColors["#speedDialContent .newtabCell .body"]={background:"none !important"};classesColors[".newtabCell .menuOverlay .text"]={"margin-right":"5px","margin-left":"5px","margin-bottom":"5px"};classesColors[".newtabCell .speedDialIcons"]={"margin-right":"5px !important"};classesColors[".newtabCell .imgShadow"]={display:"none"};classesColors[".newtabCell .menuOverlay"]={"background-color":"rgba( 62, 125, 179, 0.6 ) !important"};classesColors['#speedDialContent[style="standard"] .newtabCell[type="mostvisited"] .menuOverlay']={left:"-3px",right:"-3px !important",width:"auto",bottom:"7px"};classesColors[".newtabCell .mostVisitedMenu > .views"]={"margin-left":"3px"};classesColors[".newtabCell .mostVisitedMenu > .ingroup"]={"margin-right":"3px"}}if(!_b(fvdSpeedDial.Prefs.get("sd.display_quick_menu_and_clicks"))){classesColors[".newtabCell .speedDialIcons"]={display:"none"};classesColors[".newtabCell .text"]={display:"none"}}for(var si=0;si!=this.stylesheets.length;si++){var stylesheet=this.stylesheets[si];while(stylesheet.cssRules.length>0){stylesheet.deleteRule(0)}for(var selector in classesColors){stylesheet.addRule(selector,"",0);var rule=stylesheet.cssRules[0];var properties=classesColors[selector];for(var properyName in properties){var value=properties[properyName];var important=null;try{if(value.indexOf("!important")!=-1){important="important";value=value.replace("!important","")}}catch(ex){}rule.style.setProperty(properyName,value,important)}}}this.refreshTheme()},_color:function(c){return"#"+c},_size:function(s){return s+"px"},_fontWeight:function(bolder){if(_b(bolder)){return"bold"}return"normal"},_updateThemeActions:function(value){var fancyDefaults=fvdSpeedDial.Prefs._themeDefaults["fancy"];var standardDefaults=fvdSpeedDial.Prefs._themeDefaults["standard"];var prefsToRestore=["sd.text.cell_title.color","sd.text.list_elem.color","sd.text.list_show_url_title.color","sd.text.list_link.color","sd.text.other.color"];if(value=="standard"){if(fvdSpeedDial.Prefs.get("sd.background_color")=="000000"&&_b(fvdSpeedDial.Prefs.get("sd.background_color_enabled"))||fvdSpeedDial.Prefs.get("sd.background_url")==FANCY_BACKGROUND_URL&&fvdSpeedDial.Prefs.get("sd.background_url_type")!="noimage"){if(fvdSpeedDial.Prefs.get("sd.background_url")==FANCY_BACKGROUND_URL){fvdSpeedDial.Prefs.sSet("sd.background_url_type","noimage")}fvdSpeedDial.Prefs.sSet("sd.background_color_enabled",true);fvdSpeedDial.Prefs.sSet("sd.background_color","FFFFFF");prefsToRestore.forEach(function(pref){if(fvdSpeedDial.Prefs.get(pref)==fancyDefaults[pref]){fvdSpeedDial.Prefs.set(pref,standardDefaults[pref])}})}if(!_b(fvdSpeedDial.Prefs.get("sd.display_quick_menu_and_clicks"))){fvdSpeedDial.Prefs.sSet("sd.display_quick_menu_and_clicks",true)}if(!_b(fvdSpeedDial.Prefs.get("sd.show_urls_under_dials"))){fvdSpeedDial.Prefs.sSet("sd.show_urls_under_dials",true)}if(!_b(fvdSpeedDial.Prefs.get("sd.show_icons_and_titles_above_dials"))){fvdSpeedDial.Prefs.sSet("sd.show_icons_and_titles_above_dials",true)}}else if(value=="fancy"){fvdSpeedDial.Prefs.sSet("sd.top_sites_columns","auto");fvdSpeedDial.Prefs.sSet("sd.most_visited_columns","auto");prefsToRestore.forEach(function(pref){if(fvdSpeedDial.Prefs.get(pref)==standardDefaults[pref]){fvdSpeedDial.Prefs.set(pref,fancyDefaults[pref])}});if(!_b(fvdSpeedDial.Prefs.get("sd.display_plus_cells"))){fvdSpeedDial.Prefs.sSet("sd.display_plus_cells",true)}if(_b(fvdSpeedDial.Prefs.get("sd.display_quick_menu_and_clicks"))){fvdSpeedDial.Prefs.sSet("sd.display_quick_menu_and_clicks",false)}if(_b(fvdSpeedDial.Prefs.get("sd.show_urls_under_dials"))){fvdSpeedDial.Prefs.sSet("sd.show_urls_under_dials",false)}if(_b(fvdSpeedDial.Prefs.get("sd.show_icons_and_titles_above_dials"))){fvdSpeedDial.Prefs.sSet("sd.show_icons_and_titles_above_dials",false)}if(fvdSpeedDial.Prefs.get("sd.background_url_type")=="noimage"){var bgUrl=FANCY_BACKGROUND_URL;fvdSpeedDial.Utils.imageUrlToDataUrl(bgUrl,function(dataUrl){if(!dataUrl){dataUrl=""}fvdSpeedDial.Prefs.set("sd.background_url",bgUrl);fvdSpeedDial.Storage.setMisc("sd.background",dataUrl,function(){fvdSpeedDial.Prefs.set("sd.background_url_type",fancyDefaults["sd.background_url_type"]);fvdSpeedDial.SpeedDial.refreshBackground()})})}}fvdSpeedDial.ChromeThemeClient.setPrefsForCurrentAppliedTheme()}};this.CSS=new CSS;function prefListener(name,value){if(name=="sd.display_mode"){setTimeout(function(){fvdSpeedDial.Prefs.set("sd.top_sites_columns","auto");fvdSpeedDial.Prefs.set("sd.most_visited_columns","auto");fvdSpeedDial.CSS._updateThemeActions(value);fvdSpeedDial.CSS.refresh();fvdSpeedDial.CSS.refreshTheme();fvdSpeedDial.SpeedDial.sheduleRebuild();fvdSpeedDial.SpeedDial.refreshBackground()},0)}}Broadcaster.onMessage.addListener(function(msg){if(msg.action=="pref:changed"){prefListener(msg.name,msg.value)}})}).apply(fvdSpeedDial);window.addEventListener("unload",function(){fvdSpeedDial.Options.destroy()},false);window.addEventListener("load",function(event){fvdSpeedDial.Localizer.localizeCurrentPage();fvdSpeedDial.Options.init();fvdSpeedDial.ContextMenus.init();var linkToSd=document.getElementById("linkToSD");setTimeout(function(){linkToSd.style.top="-50px";linkToSd.addEventListener("webkitTransitionEnd",function(){setTimeout(function(){linkToSd.setAttribute("blackshadow","1")},500)},false)},1e3);document.getElementById("linkToSD").addEventListener("click",function(){document.location="newtab.html"},false);document.getElementById("buttonBigSettings").addEventListener("click",function(){fvdSpeedDial.Options.setType("global")},false);document.getElementById("buttonBigSpeedDial").addEventListener("click",function(){fvdSpeedDial.Options.setType("speeddial")},false);document.getElementById("buttonBigMostVisited").addEventListener("click",function(){fvdSpeedDial.Options.setType("mostvisited")},false);document.getElementById("buttonBigRecentlyClosed").addEventListener("click",function(){fvdSpeedDial.Options.setType("recentlyclosed")},false);document.getElementById("buttonBigBackground").addEventListener("click",function(){fvdSpeedDial.Options.setType("bg")},false);document.getElementById("buttonBigSdFontColors").addEventListener("click",function(){fvdSpeedDial.Options.setType("fonts")},false);document.getElementById("buttonBigSdSync").addEventListener("click",function(){fvdSpeedDial.Options.syncOptionsOpen()},false);document.getElementById("buttonBigSdGetSatisfaction").addEventListener("click",function(){fvdSpeedDial.Options.openGetSatisfactionSuggestions()},false);document.getElementById("buttonBigSdDonate").addEventListener("click",function(event){fvdSpeedDial.Options.openDonateMessage(event)},false);document.getElementById("buttonBigSdPowerOff").addEventListener("click",function(event){fvdSpeedDial.Options.setType("poweroff")},false);try{document.getElementById("buttonBigSdWidgets").addEventListener("click",function(event){fvdSpeedDial.Options.setType("widgets")},false)}catch(ex){}document.getElementById("settingsContent").addEventListener("scroll",function(event){document.getElementById("settingsContent").scrollLeft=0},false);document.getElementById("importExport_export").addEventListener("click",function(event){if(!fvdSpeedDial.Options.dontAllowIfLocked()){return}fvdSpeedDial.Dialogs.importExport({type:"export"})},false);document.getElementById("importExport_import").addEventListener("click",function(event){if(!fvdSpeedDial.Options.dontAllowIfLocked()){return}fvdSpeedDial.Dialogs.importExport({type:"import"})},false);document.getElementById("sdButtonManageDeny").addEventListener("click",function(event){if(!fvdSpeedDial.Options.dontAllowIfLocked()){return}fvdSpeedDial.Dialogs.manageDeny()},false);document.getElementById("displayPlusCellsHelp").addEventListener("click",function(event){fvdSpeedDial.ToolTip.displayImage(document.getElementById("displayPlusCellsHelp"),"/images/help/display_plus_cells.png",event)},false);document.getElementById("displayQuickMenuHelp").addEventListener("click",function(event){fvdSpeedDial.ToolTip.displayImage(document.getElementById("displayQuickMenuHelp"),"/images/help/show_clicks_and_quick_menu.png",event)},false);document.getElementById("displayShowInContextMenuHelp").addEventListener("click",function(event){fvdSpeedDial.ToolTip.displayImage(document.getElementById("displayShowInContextMenuHelp"),"/images/help/display_in_context_menu.png",event)},false);document.getElementById("displayDialBackgroundHelp").addEventListener("click",function(event){fvdSpeedDial.ToolTip.displayImage(document.getElementById("displayDialBackgroundHelp"),"/images/help/hide_background.png",event)},false);document.getElementById("buttonManageGroups").addEventListener("click",function(event){if(!fvdSpeedDial.Options.dontAllowIfLocked()){return}fvdSpeedDial.Dialogs.manageGroups({callback:function(result){if(result){fvdSpeedDial.Options.rebuildGroupsList()}}})},false);document.getElementById("buttonResetSDClicks").addEventListener("click",function(event){fvdSpeedDial.Dialogs.confirm(_("options_confirm_reset_clicks_title"),_("options_confirm_reset_clicks_text"),function(res){if(res){fvdSpeedDial.Storage.resetAllDialsClicks(function(){fvdSpeedDial.Dialogs.alert(_("options_success_reset_clicks_title"),_("options_success_reset_clicks_text"))})}})},false);document.getElementById("bg_color").addEventListener("change",function(event){fvdSpeedDial.Options.refreshBg();document.getElementById("bg_useColor").checked=true},false);document.getElementById("bg_imageType").addEventListener("change",function(event){fvdSpeedDial.Options.refreshBgViewType()},false);document.getElementById("backgroundUploadButton").addEventListener("click",function(event){document.getElementById("backgroundUploadButton").getElementsByTagName("input")[0].click()},false);document.getElementById("uploadBackgroundFile").addEventListener("change",function(event){fvdSpeedDial.Options.selectLocalBackground()},false);document.getElementById("btnLoadAndPreview").addEventListener("click",function(event){fvdSpeedDial.Options.bgLoadAndPreview()},false);document.getElementById("backgroundButtonRestoreDefault").addEventListener("click",function(event){fvdSpeedDial.Options.bgRestoreDefault()},false);document.getElementById("helpListElemColor").addEventListener("click",function(event){fvdSpeedDial.ToolTip.displayImage(document.getElementById("helpListElemColor"),"/images/help/text_list_elem_color.png",event)},false);document.getElementById("helpShowUrlTitleColor").addEventListener("click",function(event){fvdSpeedDial.ToolTip.displayImage(document.getElementById("helpShowUrlTitleColor"),"/images/help/text_list_show_url_title_color.png",event)},false);document.getElementById("helpTextListLinkColor").addEventListener("click",function(event){fvdSpeedDial.ToolTip.displayImage(document.getElementById("helpTextListLinkColor"),"/images/help/text_list_link_color.png",event)},false);document.getElementById("helpTextOtherkColor").addEventListener("click",function(event){fvdSpeedDial.ToolTip.displayImage(document.getElementById("helpTextOtherkColor"),"/images/help/text_other_color.png",event)},false);document.getElementById("fontsButtonRestoreDefault").addEventListener("click",function(event){fvdSpeedDial.Options.fontsRestoreDefaults()},false);document.getElementById("applyChangesButton").addEventListener("click",function(event){if(!fvdSpeedDial.Options.dontAllowIfLocked()){return}fvdSpeedDial.Options.applyChanges()},false);document.getElementById("buttonCloseButton").addEventListener("click",function(event){fvdSpeedDial.Options.close()},false);document.getElementById("installThemesForChrome").addEventListener("click",function(event){chrome.tabs.create({url:"http://fvdmedia.com/to/s/chrome_thm/",active:true})},false);document.getElementById("setAuthoPreview_setPreview").addEventListener("click",function(event){fvdSpeedDial.Options.setAutoPreviewGlobally()},false);document.getElementById("sdPreviewSettings_turnOffAutoUpdate").addEventListener("click",function(event){fvdSpeedDial.Options.turnOffAutoUpdateGlobally()},false);document.getElementById("sdPreviewSettings_setAutoUpdate").addEventListener("click",function(event){fvdSpeedDial.Options.setAutoUpdateGlobally()},false);document.querySelector(".backupViaEversyncSuggestion button").addEventListener("click",function(){fvdSpeedDial.Options.setType("sync")},false);fvdSpeedDial.Sync.isActive(function(isActive){document.documentElement.setAttribute("data-sync-active",isActive?1:0)});var numberInputs=document.querySelectorAll('input[type="number"]');for(var i=0;i!=numberInputs.length;i++){var numberInput=numberInputs[i];(function(numberInput){numberInput.addEventListener("input",function(){var max=parseInt(numberInput.getAttribute("max"));var min=parseInt(numberInput.getAttribute("min"));if(!isNaN(max)&&numberInput.value>max){numberInput.value=max}else if(!isNaN(max)&&numberInput.value<min){numberInput.value=min}if(isNaN(numberInput.value)||numberInput.value===""){numberInput.value=1}fvdSpeedDial.Options._changeOption(numberInput)},false)})(numberInput)}$("[data-only-in-standard]").qtip({content:{text:_("options_available_in_standard_theme_only")},position:{at:"top center",my:"bottom center"},style:{classes:"qtip-dark",tip:{corner:true,width:10,height:4}},events:{show:function(event,api){return $("#themeSelect").val()!=="standard"}}})},false);function bindEventHandler(element,eventName,handler){if(element.addEventListener){element.addEventListener(eventName,handler,false)}else if(element.attachEvent){element.attachEvent("on"+eventName,handler)}}function Dialog(options){this.options={width:400,top:120,openOnCreate:true,destroyOnClose:true,escHandler:this.close,enterOnButton:null,buttons:{OK:this.close},leftButtons:{},className:""};for(var option in options){this.options[option]=options[option]}this._makeNodes();if(this.options.openOnCreate){this.open()}}Dialog.prototype={container:null,header:null,body:null,content:null,actions:null,_overlay:null,_wrapper:null,_zIndex:0,_escHandler:null,open:function(){this._makeTop();var ws=this._wrapper.style;ws.left=(document.body.clientWidth-this.options.width)/2+"px";ws.top=(document.body.scrollTop||document.documentElement.scrollTop)+this.options.top+"px";this._overlay.style.display="block";ws.display="block";this._wrapper.focus();this._wrapper.className+=" "+this.options.className;if(this.options.focus){var input=document.getElementById(this.options.focus);if(input){input.focus()}}if(this.options.onShow){this.options.onShow(this)}},close:function(){if(this.options.closeCallback){this.options.closeCallback()}if(this.options.destroyOnClose){this._destroy()}else{this._overlay.style.display="none";this._wrapper.style.display="none"}},addButtons:function(buttons,prepend,specialClasses){var actions=this.actions;var buttonArray=this._makeButtons(buttons,specialClasses);var first=null;if(prepend&&(first=actions.firstChild)!=null){for(var i in buttonArray){actions.insertBefore(buttonArray[i],first)}}else{for(var i in buttonArray){actions.appendChild(buttonArray[i])}}},showActionMessage:function(message){var actionBox=this.actions.getElementsByClassName("dlg-actionbox")[0];actionBox.textContent=message;fvdSpeedDial.Utils.UI.showAndHide(actionBox)},setTitle:function(title){if(!this.header){var header=document.createElement("div");header.className="dialog-header";this.container.insertBefore(header,this.body);this.header=header}this.header.innerHTML=title},getMainButton:function(){return this.container.querySelector("button.main")},_makeNodes:function(){if(this._overlay||this._wrapper){return}this._overlay=document.createElement("div");this._overlay.className="dialog-overlay";document.body.appendChild(this._overlay);var that=this;setTimeout(function(){that._overlay.style.opacity="0.5"},0);if(typeof this.options.title=="string"&&this.options.title!=""){var header=document.createElement("div");header.className="dialog-header";header.innerHTML=this.options.title;this.header=header}var content=document.createElement("div");content.className="dialog-content";content.innerHTML=this.options.content;this.content=content;var actions=document.createElement("div");actions.className="dialog-actions";var buttons=this._makeButtons(this.options.buttons);var leftButtons=this._makeButtons(this.options.leftButtons,"leftButton");buttons=buttons.concat(leftButtons);var first=null;if(buttons.length>0){first=buttons[0];for(var i in buttons){actions.appendChild(buttons[i])}}var actionBox=document.createElement("div");actionBox.className="dlg-actionbox";actions.insertBefore(actionBox,first);this.actions=actions;var body=document.createElement("div");body.className="dialog-body";body.appendChild(content);body.appendChild(actions);this.body=body;var container=document.createElement("div");container.className="dialog";if(this.header){container.appendChild(header)}container.appendChild(body);this.container=container;var wrapper=document.createElement("div");wrapper.className="dialog-wrapper";var ws=wrapper.style;ws.position="absolute";ws.width=this.options.width+"px";ws.display="none";ws.outline="none";wrapper.appendChild(container);if(this.options.escHandler||this.options.enterOnButton){wrapper.tabIndex=-1;this._onKeydown=this._makeHandler(function(e){if(!e){e=window.event}if(e.keyCode&&e.keyCode==27){if(this.options.escHandler){this.options.escHandler.apply(this)}}else if(e.keyCode&&e.keyCode==13){if(this.options.enterOnButton){this.options.buttons[this.options.enterOnButton]()}}},this);bindEventHandler(wrapper,"keydown",this._onKeydown)}this._wrapper=document.body.appendChild(wrapper);if(Dialog.needIEFix){this._fixIE()}if(this.options.clickCallback){var that=this;this._wrapper.addEventListener("click",function(){that.options.clickCallback()},true)}setTimeout(function(){wrapper.style.webkitTransform="scale(1)";wrapper.style.opacity="1"},0)},_makeButtons:function(buttons,specialClasses){specialClasses=specialClasses||"";var buttonArray=new Array;var countButtons=0;for(var _ in buttons){countButtons++}var btnNum=0;for(var buttonText in buttons){var button=document.createElement("button");button.className="fvdButton dialog-button";bindEventHandler(button,"click",this._makeHandler(buttons[buttonText],this));if(buttonArray.length==0&&countButtons==2&&btnNum==0){button.className+=" main withLoading";button.innerHTML='<span class="text">'+buttonText+'</span><div class="image"></div>'}else{button.innerHTML=buttonText}button.className+=" "+specialClasses;buttonArray.push(button)}return buttonArray},_makeHandler:function(method,obj){return function(e){method.call(obj,e)}},_makeTop:function(){if(this._zIndex<Dialog.Manager.currentZIndex){this._overlay.style.zIndex=Dialog.Manager.newZIndex();this._zIndex=this._wrapper.style.zIndex=Dialog.Manager.newZIndex()}},_fixIE:function(){var width=document.documentElement["scrollWidth"]+"px";var height=document.documentElement["scrollHeight"]+"px";var os=this._overlay.style;os.position="absolute";os.width=width;os.height=height;var iframe=document.createElement("iframe");iframe.className="iefix";iframe.style.width=width;iframe.style.height=height;this._wrapper.appendChild(iframe)},_destroy:function(){this._wrapper.style.opacity=0;this._wrapper.style.webkitTransform="scale(0.9)";this._overlay.style.opacity=0;var that=this;this._wrapper.addEventListener("webkitTransitionEnd",function(event){try{document.body.removeChild(that._wrapper);document.body.removeChild(that._overlay);that.container=null;that.header=null;that.body=null;that.content=null;that.actions=null;that._overlay=null;that._wrapper=null}catch(ex){}},true)}};Dialog.needIEFix=function(){var userAgent=navigator.userAgent.toLowerCase();return/msie/.test(userAgent)&&!/opera/.test(userAgent)&&!window.XMLHttpRequest}();Dialog.Manager={currentZIndex:3e3,newZIndex:function(){return this.currentZIndex}};var jscolor={dir:"/images/colorpicker/",bindClass:"color",binding:true,preloading:true,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var detected=jscolor.detectDir();jscolor.dir=detected!==false?detected:"jscolor/"}return jscolor.dir},detectDir:function(){var base=location.href;var e=document.getElementsByTagName("base");for(var i=0;i<e.length;i+=1){if(e[i].href){base=e[i].href}}var e=document.getElementsByTagName("script");for(var i=0;i<e.length;i+=1){if(e[i].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(e[i].src)){var src=new jscolor.URI(e[i].src);var srcAbs=src.toAbsolute(base);srcAbs.path=srcAbs.path.replace(/[^\/]+$/,"");srcAbs.query=null;srcAbs.fragment=null;return srcAbs.toString()}}return false},bind:function(){var matchClass=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i");var e=document.getElementsByTagName("input");for(var i=0;i<e.length;i+=1){var m;if(!e[i].color&&e[i].className&&(m=e[i].className.match(matchClass))){var prop={};if(m[3]){try{eval("prop="+m[3])}catch(eInvalidProp){}}e[i].color=new jscolor.color(e[i],prop)}}},preload:function(){for(var fn in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(fn)){jscolor.loadImage(fn)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(filename){jscolor.imgRequire[filename]=true},loadImage:function(filename){if(!jscolor.imgLoaded[filename]){jscolor.imgLoaded[filename]=new Image;jscolor.imgLoaded[filename].src=jscolor.getDir()+filename}},fetchElement:function(mixed){return typeof mixed==="string"?document.getElementById(mixed):mixed},addEvent:function(el,evnt,func){if(el.addEventListener){el.addEventListener(evnt,func,false)}else if(el.attachEvent){el.attachEvent("on"+evnt,func)}},fireEvent:function(el,evnt){if(!el){return}if(document.createEvent){var ev=document.createEvent("HTMLEvents");ev.initEvent(evnt,true,true);el.dispatchEvent(ev)}else if(document.createEventObject){var ev=document.createEventObject();el.fireEvent("on"+evnt,ev)}else if(el["on"+evnt]){el["on"+evnt]()}},getElementPos:function(e){var e1=e,e2=e;var x=0,y=0;if(e1.offsetParent){do{x+=e1.offsetLeft;y+=e1.offsetTop}while(e1=e1.offsetParent)}while((e2=e2.parentNode)&&e2.nodeName.toUpperCase()!=="BODY"){x-=e2.scrollLeft;y-=e2.scrollTop}return[x,y]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var x=0,y=0;if(!e){e=window.event}if(typeof e.offsetX==="number"){x=e.offsetX;y=e.offsetY}else if(typeof e.layerX==="number"){x=e.layerX;y=e.layerY}return{x:x,y:y}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}},URI:function(uri){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(uri){var m=uri.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=m[3]?m[2]:null;this.authority=m[5]?m[6]:null;this.path=m[7];this.query=m[9]?m[10]:null;this.fragment=m[12]?m[13]:null;return this};this.toString=function(){var result="";if(this.scheme!==null){result=result+this.scheme+":"}if(this.authority!==null){result=result+"//"+this.authority}if(this.path!==null){result=result+this.path}if(this.query!==null){result=result+"?"+this.query}if(this.fragment!==null){result=result+"#"+this.fragment}return result};this.toAbsolute=function(base){var base=new jscolor.URI(base);var r=this;var t=new jscolor.URI;if(base.scheme===null){return false}if(r.scheme!==null&&r.scheme.toLowerCase()===base.scheme.toLowerCase()){r.scheme=null}if(r.scheme!==null){t.scheme=r.scheme;t.authority=r.authority;t.path=removeDotSegments(r.path);t.query=r.query}else{if(r.authority!==null){t.authority=r.authority;t.path=removeDotSegments(r.path);t.query=r.query}else{if(r.path===""){t.path=base.path;if(r.query!==null){t.query=r.query}else{t.query=base.query}}else{if(r.path.substr(0,1)==="/"){t.path=removeDotSegments(r.path)}else{if(base.authority!==null&&base.path===""){t.path="/"+r.path}else{t.path=base.path.replace(/[^\/]+$/,"")+r.path}t.path=removeDotSegments(t.path)}t.query=r.query}t.authority=base.authority}t.scheme=base.scheme}t.fragment=r.fragment;return t};function removeDotSegments(path){var out="";while(path){if(path.substr(0,3)==="../"||path.substr(0,2)==="./"){path=path.replace(/^\.+/,"").substr(1)}else if(path.substr(0,3)==="/./"||path==="/."){path="/"+path.substr(3)}else if(path.substr(0,4)==="/../"||path==="/.."){path="/"+path.substr(4);out=out.replace(/\/?[^\/]*$/,"")}else if(path==="."||path===".."){path=""}else{var rm=path.match(/^\/?[^\/]*/)[0];path=path.substr(rm.length);out=out+rm}}return out}if(uri){this.parse(uri)}},color:function(target,prop){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=target;this.styleElement=target;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";

this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=1e4;for(var p in prop){if(prop.hasOwnProperty(p)){this[p]=prop[p]}}this.hidePicker=function(){if(isPickerOwner()){removePicker()}};this.showPicker=function(){if(!isPickerOwner()){var tp=jscolor.getElementPos(target);var ts=jscolor.getElementSize(target);var vp=jscolor.getViewPos();var vs=jscolor.getViewSize();var ps=getPickerDims(this);var a,b,c;switch(this.pickerPosition.toLowerCase()){case"left":a=1;b=0;c=-1;break;case"right":a=1;b=0;c=1;break;case"top":a=0;b=1;c=-1;break;default:a=0;b=1;c=1;break}var l=(ts[b]+ps[b])/2;if(!this.pickerSmartPosition){var pp=[tp[a],tp[b]+ts[b]-l+l*c]}else{var pp=[-vp[a]+tp[a]+ps[a]>vs[a]?-vp[a]+tp[a]+ts[a]/2>vs[a]/2&&tp[a]+ts[a]-ps[a]>=0?tp[a]+ts[a]-ps[a]:tp[a]:tp[a],-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c>vs[b]?-vp[b]+tp[b]+ts[b]/2>vs[b]/2&&tp[b]+ts[b]-l-l*c>=0?tp[b]+ts[b]-l-l*c:tp[b]+ts[b]-l+l*c:tp[b]+ts[b]-l+l*c>=0?tp[b]+ts[b]-l+l*c:tp[b]+ts[b]-l-l*c]}drawPicker(pp[a],pp[b])}};this.importColor=function(){if(!valueElement){this.exportColor()}else{if(!this.adjust){if(!this.fromString(valueElement.value,leaveValue)){styleElement.style.backgroundImage=styleElement.jscStyle.backgroundImage;styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor;styleElement.style.color=styleElement.jscStyle.color;this.exportColor(leaveValue|leaveStyle)}}else if(!this.required&&/^\s*$/.test(valueElement.value)){valueElement.value="";styleElement.style.backgroundImage=styleElement.jscStyle.backgroundImage;styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor;styleElement.style.color=styleElement.jscStyle.color;this.exportColor(leaveValue|leaveStyle)}else if(this.fromString(valueElement.value)){}else{this.exportColor()}}};this.exportColor=function(flags){if(!(flags&leaveValue)&&valueElement){var value=this.toString();if(this.caps){value=value.toUpperCase()}if(this.hash){value="#"+value}valueElement.value=value}if(!(flags&leaveStyle)&&styleElement){styleElement.style.backgroundImage="none";styleElement.style.backgroundColor="#"+this.toString();styleElement.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"}if(!(flags&leavePad)&&isPickerOwner()){redrawPad()}if(!(flags&leaveSld)&&isPickerOwner()){redrawSld()}};this.fromHSV=function(h,s,v,flags){h<0&&(h=0)||h>6&&(h=6);s<0&&(s=0)||s>1&&(s=1);v<0&&(v=0)||v>1&&(v=1);this.rgb=HSV_RGB(h===null?this.hsv[0]:this.hsv[0]=h,s===null?this.hsv[1]:this.hsv[1]=s,v===null?this.hsv[2]:this.hsv[2]=v);this.exportColor(flags)};this.fromRGB=function(r,g,b,flags){r<0&&(r=0)||r>1&&(r=1);g<0&&(g=0)||g>1&&(g=1);b<0&&(b=0)||b>1&&(b=1);var hsv=RGB_HSV(r===null?this.rgb[0]:this.rgb[0]=r,g===null?this.rgb[1]:this.rgb[1]=g,b===null?this.rgb[2]:this.rgb[2]=b);if(hsv[0]!==null){this.hsv[0]=hsv[0]}if(hsv[2]!==0){this.hsv[1]=hsv[1]}this.hsv[2]=hsv[2];this.exportColor(flags)};this.fromString=function(hex,flags){var m=hex.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!m){return false}else{if(m[1].length===6){this.fromRGB(parseInt(m[1].substr(0,2),16)/255,parseInt(m[1].substr(2,2),16)/255,parseInt(m[1].substr(4,2),16)/255,flags)}else{this.fromRGB(parseInt(m[1].charAt(0)+m[1].charAt(0),16)/255,parseInt(m[1].charAt(1)+m[1].charAt(1),16)/255,parseInt(m[1].charAt(2)+m[1].charAt(2),16)/255,flags)}return true}};this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};function RGB_HSV(r,g,b){var n=Math.min(Math.min(r,g),b);var v=Math.max(Math.max(r,g),b);var m=v-n;if(m===0){return[null,0,v]}var h=r===n?3+(b-g)/m:g===n?5+(r-b)/m:1+(g-r)/m;return[h===6?0:h,m/v,v]}function HSV_RGB(h,s,v){if(h===null){return[v,v,v]}var i=Math.floor(h);var f=i%2?h-i:1-(h-i);var m=v*(1-s);var n=v*(1-s*f);switch(i){case 6:case 0:return[v,n,m];case 1:return[n,v,m];case 2:return[m,v,n];case 3:return[m,n,v];case 4:return[n,m,v];case 5:return[v,m,n]}}function removePicker(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function drawPicker(x,y){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(THIS.pickerCloseText)};for(var i=0,segSize=4;i<jscolor.images.sld[1];i+=segSize){var seg=document.createElement("div");seg.style.height=segSize+"px";seg.style.fontSize="1px";seg.style.lineHeight="0";jscolor.picker.sld.appendChild(seg)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var p=jscolor.picker;p.box.onmouseup=p.box.onmouseout=function(){target.focus()};p.box.onmousedown=function(){abortBlur=true};p.box.onmousemove=function(e){if(holdPad||holdSld){holdPad&&setPad(e);holdSld&&setSld(e);if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}dispatchImmediateChange()}};p.padM.onmouseup=p.padM.onmouseout=function(){if(holdPad){holdPad=false;jscolor.fireEvent(valueElement,"change")}};p.padM.onmousedown=function(e){switch(modeID){case 0:if(THIS.hsv[2]===0){THIS.fromHSV(null,null,1)};break;case 1:if(THIS.hsv[1]===0){THIS.fromHSV(null,1,null)};break}holdPad=true;setPad(e);dispatchImmediateChange()};p.sldM.onmouseup=p.sldM.onmouseout=function(){if(holdSld){holdSld=false;jscolor.fireEvent(valueElement,"change")}};p.sldM.onmousedown=function(e){holdSld=true;setSld(e);dispatchImmediateChange()};var dims=getPickerDims(THIS);p.box.style.width=dims[0]+"px";p.box.style.height=dims[1]+"px";p.boxB.style.position="absolute";p.boxB.style.clear="both";p.boxB.style.left=x+"px";p.boxB.style.top=y+"px";p.boxB.style.zIndex=THIS.pickerZIndex;p.boxB.style.border=THIS.pickerBorder+"px solid";p.boxB.style.borderColor=THIS.pickerBorderColor;p.boxB.style.background=THIS.pickerFaceColor;p.pad.style.width=jscolor.images.pad[0]+"px";p.pad.style.height=jscolor.images.pad[1]+"px";p.padB.style.position="absolute";p.padB.style.left=THIS.pickerFace+"px";p.padB.style.top=THIS.pickerFace+"px";p.padB.style.border=THIS.pickerInset+"px solid";p.padB.style.borderColor=THIS.pickerInsetColor;p.padM.style.position="absolute";p.padM.style.left="0";p.padM.style.top="0";p.padM.style.width=THIS.pickerFace+2*THIS.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";p.padM.style.height=p.box.style.height;p.padM.style.cursor="crosshair";p.sld.style.overflow="hidden";p.sld.style.width=jscolor.images.sld[0]+"px";p.sld.style.height=jscolor.images.sld[1]+"px";p.sldB.style.display=THIS.slider?"block":"none";p.sldB.style.position="absolute";p.sldB.style.right=THIS.pickerFace+"px";p.sldB.style.top=THIS.pickerFace+"px";p.sldB.style.border=THIS.pickerInset+"px solid";p.sldB.style.borderColor=THIS.pickerInsetColor;p.sldM.style.display=THIS.slider?"block":"none";p.sldM.style.position="absolute";p.sldM.style.right="0";p.sldM.style.top="0";p.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+THIS.pickerFace+2*THIS.pickerInset+"px";p.sldM.style.height=p.box.style.height;try{p.sldM.style.cursor="pointer"}catch(eOldIE){p.sldM.style.cursor="hand"}function setBtnBorder(){var insetColors=THIS.pickerInsetColor.split(/\s+/);var pickerOutsetColor=insetColors.length<2?insetColors[0]:insetColors[1]+" "+insetColors[0]+" "+insetColors[0]+" "+insetColors[1];p.btn.style.borderColor=pickerOutsetColor}p.btn.style.display=THIS.pickerClosable?"block":"none";p.btn.style.position="absolute";p.btn.style.left=THIS.pickerFace+"px";p.btn.style.bottom=THIS.pickerFace+"px";p.btn.style.padding="0 15px";p.btn.style.height="18px";p.btn.style.border=THIS.pickerInset+"px solid";setBtnBorder();p.btn.style.color=THIS.pickerButtonColor;p.btn.style.font="12px sans-serif";p.btn.style.textAlign="center";try{p.btn.style.cursor="pointer"}catch(eOldIE){p.btn.style.cursor="hand"}p.btn.onmousedown=function(){THIS.hidePicker()};p.btnS.style.lineHeight=p.btn.style.height;switch(modeID){case 0:var padImg="hs.png";break;case 1:var padImg="hv.png";break}p.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";p.padM.style.backgroundRepeat="no-repeat";p.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";p.sldM.style.backgroundRepeat="no-repeat";p.pad.style.backgroundImage="url('"+jscolor.getDir()+padImg+"')";p.pad.style.backgroundRepeat="no-repeat";p.pad.style.backgroundPosition="0 0";redrawPad();redrawSld();jscolor.picker.owner=THIS;document.getElementsByTagName("body")[0].appendChild(p.boxB)}function getPickerDims(o){var dims=[2*o.pickerInset+2*o.pickerFace+jscolor.images.pad[0]+(o.slider?2*o.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),o.pickerClosable?4*o.pickerInset+3*o.pickerFace+jscolor.images.pad[1]+o.pickerButtonHeight:2*o.pickerInset+2*o.pickerFace+jscolor.images.pad[1]];return dims}function redrawPad(){switch(modeID){case 0:var yComponent=1;break;case 1:var yComponent=2;break}var x=Math.round(THIS.hsv[0]/6*(jscolor.images.pad[0]-1));var y=Math.round((1-THIS.hsv[yComponent])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=THIS.pickerFace+THIS.pickerInset+x-Math.floor(jscolor.images.cross[0]/2)+"px "+(THIS.pickerFace+THIS.pickerInset+y-Math.floor(jscolor.images.cross[1]/2))+"px";var seg=jscolor.picker.sld.childNodes;switch(modeID){case 0:var rgb=HSV_RGB(THIS.hsv[0],THIS.hsv[1],1);for(var i=0;i<seg.length;i+=1){seg[i].style.backgroundColor="rgb("+rgb[0]*(1-i/seg.length)*100+"%,"+rgb[1]*(1-i/seg.length)*100+"%,"+rgb[2]*(1-i/seg.length)*100+"%)"}break;case 1:var rgb,s,c=[THIS.hsv[2],0,0];var i=Math.floor(THIS.hsv[0]);var f=i%2?THIS.hsv[0]-i:1-(THIS.hsv[0]-i);switch(i){case 6:case 0:rgb=[0,1,2];break;case 1:rgb=[1,0,2];break;case 2:rgb=[2,0,1];break;case 3:rgb=[2,1,0];break;case 4:rgb=[1,2,0];break;case 5:rgb=[0,2,1];break}for(var i=0;i<seg.length;i+=1){s=1-1/(seg.length-1)*i;c[1]=c[0]*(1-s*f);c[2]=c[0]*(1-s);seg[i].style.backgroundColor="rgb("+c[rgb[0]]*100+"%,"+c[rgb[1]]*100+"%,"+c[rgb[2]]*100+"%)"}break}}function redrawSld(){switch(modeID){case 0:var yComponent=2;break;case 1:var yComponent=1;break}var y=Math.round((1-THIS.hsv[yComponent])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(THIS.pickerFace+THIS.pickerInset+y-Math.floor(jscolor.images.arrow[1]/2))+"px"}function isPickerOwner(){return jscolor.picker&&jscolor.picker.owner===THIS}function blurTarget(){if(valueElement===target){THIS.importColor()}if(THIS.pickerOnfocus){THIS.hidePicker()}}function blurValue(){if(valueElement!==target){THIS.importColor()}}function setPad(e){var mpos=jscolor.getRelMousePos(e);var x=mpos.x-THIS.pickerFace-THIS.pickerInset;var y=mpos.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)),1-y/(jscolor.images.pad[1]-1),null,leaveSld);break;case 1:THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)),null,1-y/(jscolor.images.pad[1]-1),leaveSld);break}}function setSld(e){var mpos=jscolor.getRelMousePos(e);var y=mpos.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(null,null,1-y/(jscolor.images.sld[1]-1),leavePad);break;case 1:THIS.fromHSV(null,1-y/(jscolor.images.sld[1]-1),null,leavePad);break}}function dispatchImmediateChange(){if(THIS.onImmediateChange){if(typeof THIS.onImmediateChange==="string"){eval(THIS.onImmediateChange)}else{THIS.onImmediateChange(THIS)}}}var THIS=this;var modeID=this.pickerMode.toLowerCase()==="hvs"?1:0;var abortBlur=false;var valueElement=jscolor.fetchElement(this.valueElement),styleElement=jscolor.fetchElement(this.styleElement);var holdPad=false,holdSld=false;var leaveValue=1<<0,leaveStyle=1<<1,leavePad=1<<2,leaveSld=1<<3;jscolor.addEvent(target,"focus",function(){if(THIS.pickerOnfocus){THIS.showPicker()}});jscolor.addEvent(target,"blur",function(){if(!abortBlur){window.setTimeout(function(){abortBlur||blurTarget();abortBlur=false},0)}else{abortBlur=false}});if(valueElement){var updateField=function(){THIS.fromString(valueElement.value,leaveValue);dispatchImmediateChange()};jscolor.addEvent(valueElement,"keyup",updateField);jscolor.addEvent(valueElement,"input",updateField);jscolor.addEvent(valueElement,"blur",blurValue);valueElement.setAttribute("autocomplete","off")}if(styleElement){styleElement.jscStyle={backgroundImage:styleElement.style.backgroundImage,backgroundColor:styleElement.style.backgroundColor,color:styleElement.style.color}}switch(modeID){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();dhtmlx=function(a){for(var b in a)dhtmlx[b]=a[b];return dhtmlx};dhtmlx.extend_api=function(a,b,c){var d=window[a];if(d)window[a]=function(a){if(a&&typeof a=="object"&&!a.tagName){var c=d.apply(this,b._init?b._init(a):arguments),f;for(f in dhtmlx)if(b[f])this[b[f]](dhtmlx[f]);for(f in a)if(b[f])this[b[f]](a[f]);else f.indexOf("on")==0&&this.attachEvent(f,a[f])}else c=d.apply(this,arguments);b._patch&&b._patch(this);return c||this},window[a].prototype=d.prototype,c&&dhtmlXHeir(window[a].prototype,c)};dhtmlxAjax={get:function(a,b){var c=new dtmlXMLLoaderObject(!0);c.async=arguments.length<3;c.waitCall=b;c.loadXML(a);return c},post:function(a,b,c){var d=new dtmlXMLLoaderObject(!0);d.async=arguments.length<4;d.waitCall=c;d.loadXML(a,!0,b);return d},getSync:function(a){return this.get(a,null,!0)},postSync:function(a,b){return this.post(a,b,null,!0)}};function dtmlXMLLoaderObject(a,b,c,d){this.xmlDoc="";this.async=typeof c!="undefined"?c:!0;this.onloadAction=a||null;this.mainObject=b||null;this.waitCall=null;this.rSeed=d||!1;return this}dtmlXMLLoaderObject.prototype.waitLoadFunction=function(a){var b=!0;return this.check=function(){if(a&&a.onloadAction!=null&&(!a.xmlDoc.readyState||a.xmlDoc.readyState==4)&&b){b=!1;if(typeof a.onloadAction=="function")a.onloadAction(a.mainObject,null,null,null,a);if(a.waitCall)a.waitCall.call(this,a),a.waitCall=null}}};dtmlXMLLoaderObject.prototype.getXMLTopNode=function(a,b){if(this.xmlDoc.responseXML){var c=this.xmlDoc.responseXML.getElementsByTagName(a);c.length==0&&a.indexOf(":")!=-1&&(c=this.xmlDoc.responseXML.getElementsByTagName(a.split(":")[1]));var d=c[0]}else d=this.xmlDoc.documentElement;if(d)return this._retry=!1,d;if(_isIE&&!this._retry){var e=this.xmlDoc.responseText,b=this.xmlDoc;this._retry=!0;this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=!1;this.xmlDoc.loadXML(e);return this.getXMLTopNode(a,b)}dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]);return document.createElement("DIV")};dtmlXMLLoaderObject.prototype.loadXMLString=function(a){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(a);else{var b=new DOMParser;this.xmlDoc=b.parseFromString(a,"text/xml")}if(this.onloadAction)this.onloadAction(this.mainObject,null,null,null,this);if(this.waitCall)this.waitCall(),this.waitCall=null};dtmlXMLLoaderObject.prototype.loadXML=function(a,b,c,d){this.rSeed&&(a+=(a.indexOf("?")!=-1?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=a;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(this.async)this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this);this.xmlDoc.open(b?"POST":"GET",a,this.async);d?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):b&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(c);this.async||new this.waitLoadFunction(this)()};dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null};dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(a){for(var b={},c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;b._tagvalue=a.firstChild?a.firstChild.nodeValue:"";for(c=0;c<a.childNodes.length;c++){var d=a.childNodes[c].tagName;d&&(b[d]||(b[d]=[]),b[d].push(this.xmlNodeToJSON(a.childNodes[c])))}return b};function callerFunction(a,b){return this.handler=function(c){if(!c)c=window.event;a(c,b);return!0}}function getAbsoluteLeft(a){return getOffset(a).left}function getAbsoluteTop(a){return getOffset(a).top}function getOffsetSum(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}}function getOffsetRect(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,g=window.pageXOffset||d.scrollLeft||c.scrollLeft,f=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-f,k=b.left+g-h;return{top:Math.round(i),left:Math.round(k)}}function getOffset(a){return a.getBoundingClientRect?getOffsetRect(a):getOffsetSum(a)}function convertStringToBoolean(a){typeof a=="string"&&(a=a.toLowerCase());switch(a){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(a){return a.indexOf("?")!=-1?"&":"?"}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop)return window.dhtmlDragAndDrop;this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if(!((a||window.event)&&(a||event).button==2)){if(window.dhtmlDragAndDrop.waitDrag)return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1;window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(a);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();a&&a.preventDefault&&a.preventDefault();return!1}};dhtmlDragAndDropObject.prototype.callDrag=function(a){if(!a)a=window.event;dragger=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode)if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a);if(!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else return dragger.stopDrag(a,!0);if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var b=dragger.gldragNode;if(dragger.gldragNode.old)b=dragger.gldragNode.old;b.parentNode.removeChild(b);var c=dragger.dragNode.pWindow;b.pWindow&&b.pWindow.dhtmlDragAndDrop.lastLanding&&b.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(b.pWindow.dhtmlDragAndDrop.lastLanding);if(_isIE){var d=document.createElement("Div");d.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=d.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);c.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=a.clientX+15+(dragger.fx?dragger.fx*-1:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=a.clientY+3+(dragger.fy?dragger.fy*-1:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";var e=a.srcElement?a.srcElement:a.target;dragger.checkLanding(e,a)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var b=parent.frames[window.name].frameElement.offsetParent,c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;if(parent.dhtmlDragAndDrop){var e=parent.dhtmlDragAndDrop.calculateFramePosition(1);c+=e.split("_")[0]*1;d+=e.split("_")[1]*1}if(a)return c+"_"+d;else this.fx=c;this.fy=d}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(a,b){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,b.clientX,b.clientY,b),this.lastLanding_scr=_isIE?b.srcElement:b.target):a&&a.tagName!="BODY"?this.checkLanding(a.parentNode,b):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,b.clientX,b.clientY,b),this.lastLanding=0,this._onNotFound&&this._onNotFound())};dhtmlDragAndDropObject.prototype.stopDrag=function(a,b){dragger=window.dhtmlDragAndDrop;if(!b){dragger.stopFrameRoute();var c=dragger.lastLanding;dragger.lastLanding=null;c&&c.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,c,_isIE?event.srcElement:a.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var b=0;b<window.frames.length;b++)try{window.frames[b]!=a&&window.frames[b].dhtmlDragAndDrop&&window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(d){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,b){if(a)window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&b&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition();try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(c){}for(var d=0;d<window.frames.length;d++)try{window.frames[d]!=a&&window.frames[d].dhtmlDragAndDrop&&window.frames[d].dhtmlDragAndDrop.initFrameRoute(window,!a||b?1:0)}catch(e){}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1;navigator.userAgent.indexOf("Macintosh")!=-1&&(_isMacOS=!0);navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0);navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("Konqueror")!=-1?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):navigator.userAgent.indexOf("Opera")!=-1?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):navigator.appName.indexOf("Microsoft")!=-1?(_isIE=!0,navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"&&(_isIE=8),navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"&&(_isIE=8)):(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1]));dtmlXMLLoaderObject.prototype.doXPath=function(a,b,c,d){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(a,b);if(_isIE)return b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),c!=null&&b.setProperty("SelectionNamespaces","xmlns:xsl='"+c+"'"),d=="single"?b.selectSingleNode(a):b.selectNodes(a)||[];else{var e=b;b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML);b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]);b.nodeName.indexOf("document")!=-1?e=b:(e=b,b=b.ownerDocument);var g=XPathResult.ANY_TYPE;if(d=="single")g=XPathResult.FIRST_ORDERED_NODE_TYPE;var f=[],h=b.evaluate(a,e,function(){return c},g,null);if(g==XPathResult.FIRST_ORDERED_NODE_TYPE)return h.singleNodeValue;for(var i=h.iterateNext();i;)f[f.length]=i,i=h.iterateNext();return f}};function j(){if(!this.catches)this.catches=[];return this}j.prototype.catchError=function(a,b){this.catches[a]=b};j.prototype.throwError=function(a,b,c){if(this.catches[a])return this.catches[a](a,b,c);if(this.catches.ALL)return this.catches.ALL(a,b,c);alert("Error type: "+a+"\nDescription: "+b);return null};window.dhtmlxError=new j;dtmlXMLLoaderObject.prototype.doXPathOpera=function(a,b){var c=a.replace(/[\/]+/gi,"/").split("/"),d=null,e=1;if(!c.length)return[];if(c[0]==".")d=[b];else if(c[0]=="")d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(c[e].replace(/\[[^\]]*\]/g,"")),e++;else return[];for(;e<c.length;e++)d=this._getAllNamedChilds(d,c[e]);c[e-1].indexOf("[")!=-1&&(d=this._filterXPath(d,c[e-1]));return d};dtmlXMLLoaderObject.prototype._filterXPath=function(a,b){for(var c=[],b=b.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),d=0;d<a.length;d++)a[d].getAttribute(b)&&(c[c.length]=a[d]);return c};dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a,b){var c=[];_isKHTML&&(b=b.toUpperCase());for(var d=0;d<a.length;d++)for(var e=0;e<a[d].childNodes.length;e++)_isKHTML?a[d].childNodes[e].tagName&&a[d].childNodes[e].tagName.toUpperCase()==b&&(c[c.length]=a[d].childNodes[e]):a[d].childNodes[e].tagName==b&&(c[c.length]=a[d].childNodes[e]);return c};function dhtmlXHeir(a,b){for(var c in b)typeof b[c]=="function"&&(a[c]=b[c]);return a}function dhtmlxEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(a,b,c){if(!c)c=this.xslDoc;if(c.responseXML)c=c.responseXML;var d=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+a+"']",c,"http://www.w3.org/1999/XSL/Transform","single");if(d!=null)d.firstChild.nodeValue=b};dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(a,b){if(!a)a=this.xslDoc;if(a.responseXML)a=a.responseXML;if(!b)b=this.xmlDoc;if(b.responseXML)b=b.responseXML;if(_isIE){d=new ActiveXObject("Msxml2.DOMDocument.3.0");try{b.transformNodeToObject(a,d)}catch(c){d=b.transformNode(a)}}else{if(!this.XSLProcessor)this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(a);var d=this.XSLProcessor.transformToDocument(b)}return d};dtmlXMLLoaderObject.prototype.doXSLTransToString=function(a,b){var c=this.doXSLTransToObject(a,b);return typeof c=="string"?c:this.doSerialization(c)};dtmlXMLLoaderObject.prototype.doSerialization=function(a){if(!a)a=this.xmlDoc;if(a.responseXML)a=a.responseXML;if(_isIE)return a.xml;else{var b=new XMLSerializer;return b.serializeToString(a)}};dhtmlxEventable=function(a){a.attachEvent=function(a,c,d){a="ev_"+a.toLowerCase();this[a]||(this[a]=new this.eventCatcher(d||this));return a+":"+this[a].addEvent(c)};a.callEvent=function(a,c){a="ev_"+a.toLowerCase();return this[a]?this[a].apply(this,c):!0};a.checkEvent=function(a){return!!this["ev_"+a.toLowerCase()]};a.eventCatcher=function(a){var c=[],d=function(){for(var d=!0,g=0;g<c.length;g++)if(c[g]!=null)var f=c[g].apply(a,arguments),d=d&&f;return d};d.addEvent=function(a){typeof a!="function"&&(a=eval(a));return a?c.push(a)-1:!1};d.removeEvent=function(a){c[a]=null};return d};a.detachEvent=function(a){if(a!=!1){var c=a.split(":");this[c[0]].removeEvent(c[1])}};a.detachAllEvents=function(){for(var a in this)a.indexOf("ev_")==0&&delete this[a]}};(function(){var a=dhtmlx.message=function(b,c,d,e){if(!a.area)a.area=document.createElement("DIV"),a.area.style.cssText="position:absolute;right:5px;width:250px;z-index:100;",a.area.className="dhtmlx_message_area",a.area.style[a.defPosition]="5px",document.body.appendChild(a.area);typeof b!="object"&&(b={text:b,type:c,lifetime:d,id:e});b.type=b.type||"info";b.id=b.id||a.uid();b.lifetime=b.lifetime||a.defTimeout;a.hide(b.id);var g=document.createElement("DIV");g.style.cssText="border-radius:4px; padding:4px 4px 4px 20px;background-color:#FFFFCC;font-size:12px;font-family:Tahoma;color:navy;z-index: 10000;margin:5px;border:1px solid lightgrey;";g.innerHTML=b.text;g.className=b.type;a.defPosition=="bottom"&&a.area.firstChild?a.area.insertBefore(g,a.area.firstChild):a.area.appendChild(g);a.timers[b.id]=window.setTimeout(function(){a.hide(b.id)},b.lifetime);a.pull[b.id]=g;return b.id};a.defTimeout=4e3;a.defPosition="top";a.pull={};a.timers={};a.seed=(new Date).valueOf();a.uid=function(){return a.seed++};a.hideAll=function(){for(var b in a.pull)a.hide(b)};a.hide=function(b){var c=a.pull[b];c&&c.parentNode&&(c.parentNode.removeChild(c),window.clearTimeout(a.timers[b]),delete a.pull[b])}})();function dhtmlXMenuObject(b,c){var a=this;this.addBaseIdAsContextZone=null;this.isDhtmlxMenuObject=!0;this.skin=c!=null?c:"dhx_skyblue";this.imagePath="";this._isIE6=!1;if(_isIE)this._isIE6=window.XMLHttpRequest==null?!0:!1;if(b==null)this.base=document.body;else{var d=typeof b=="string"?document.getElementById(b):b;if(d!=null){this.base=d;if(!this.base.id)this.base.id=(new Date).valueOf();for(;this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);this.base.className+=" dhtmlxMenu_"+this.skin+"_Middle dir_left";this.base._autoSkinUpdate=!0;if(this.base.oncontextmenu)this.base._oldContextMenuHandler=this.base.oncontextmenu;this.addBaseIdAsContextZone=this.base.id;this.base.onselectstart=function(a){a=a||event;return a.returnValue=!1};this.base.oncontextmenu=function(a){a=a||event;return a.returnValue=!1}}else this.base=document.body}this.topId="dhxWebMenuTopId";if(!this.extendedModule){for(var f=function(){alert(this.i18n.dhxmenuextalert)},e="setItemEnabled,setItemDisabled,isItemEnabled,_changeItemState,getItemText,setItemText,loadFromHTML,hideItem,showItem,isItemHidden,_changeItemVisible,setUserData,getUserData,setOpenMode,setWebModeTimeout,enableDynamicLoading,_updateLoaderIcon,getItemImage,setItemImage,clearItemImage,setAutoShowMode,setAutoHideMode,setContextMenuHideAllMode,getContextMenuHideAllMode,setVisibleArea,setTooltip,getTooltip,setHotKey,getHotKey,setItemSelected,setTopText,setRTL,setAlign,setHref,clearHref,getCircuit,_clearAllSelectedSubItemsInPolygon,_checkArrowsState,_addUpArrow,_addDownArrow,_removeUpArrow,_removeDownArrow,_isArrowExists,_doScrollUp,_doScrollDown,_countPolygonItems,setOverflowHeight,_getRadioImgObj,_setRadioState,_radioOnClickHandler,getRadioChecked,setRadioChecked,addRadioButton,_getCheckboxState,_setCheckboxState,_readLevel,_updateCheckboxImage,_checkboxOnClickHandler,setCheckboxState,getCheckboxState,addCheckbox,serialize".split(","),g=0;g<e.length;g++)this[e[g]]||(this[e[g]]=f);

e=null}this.fixedPosition=!1;this.menuLastClicked=this.menuSelected=-1;this.idPrefix="";this.itemTagName="item";this.itemTextTagName="itemtext";this.userDataTagName="userdata";this.itemTipTagName="tooltip";this.itemHotKeyTagName="hotkey";this.itemHrefTagName="href";this.dirTopLevel="bottom";this.dirSubLevel="right";this.menuY2=this.menuY1=this.menuX2=this.menuX1=null;this.menuMode="web";this.menuTimeoutMsec=400;this.menuTimeoutHandler=null;this.idPull={};this.itemPull={};this.userData={};this.radio={};this._rtl=!1;this._align="left";this.menuTouched=!1;this.zInd=this.zIndInit=3001;this.zIndStep=50;this.menuModeTopLevelTimeout=!0;this.menuModeTopLevelTimeoutTime=200;this._topLevelBottomMargin=1;this._topLevelRightMargin=0;this._topLevelOffsetLeft=1;this._arrowFFFix=_isIE?document.compatMode=="BackCompat"?0:-4:-4;this.setSkin=function(a){var b=this.skin;this.skin=a;switch(this.skin){case"dhx_black":case"dhx_blue":case"dhx_skyblue":case"dhx_web":this._topLevelBottomMargin=2;this._topLevelOffsetLeft=this._topLevelRightMargin=1;this._arrowFFFix=_isIE?document.compatMode=="BackCompat"?0:-4:-4;break;case"dhx_web":this._arrowFFFix=0}if(this.base._autoSkinUpdate)this.base.className=this.base.className.replace("dhtmlxMenu_"+b+"_Middle","")+" dhtmlxMenu_"+this.skin+"_Middle";for(var c in this.idPull)this.idPull[c].className=String(this.idPull[c].className).replace(b,this.skin)};this.setSkin(this.skin);this.dLoad=!1;this.dLoadUrl="";this.dLoadSign="?";this.loaderIcon=!1;this.limit=0;this._scrollUpTM=null;this._scrollUpTMTime=20;this._scrollUpTMStep=3;this._scrollDownTM=null;this._scrollDownTMTime=20;this._scrollDownTMStep=3;this.context=!1;this.contextZones={};this.contextMenuZoneId=!1;this.contextHideAllMode=this.contextAutoHide=this.contextAutoShow=!0;this.sxDacProc=null;this.dacSpeed=10;this.dacCycles=[];for(g=0;g<10;g++)this.dacCycles[g]=g;this.dacSpeedIE=10;this.dacCyclesIE=[];for(g=0;g<10;g++)this.dacCyclesIE[g]=g;this._enableDacSupport=function(a){this.sxDacProc=a};this._selectedSubItems=[];this._openedPolygons=[];this._addSubItemToSelected=function(a,b){for(var c=!0,d=0;d<this._selectedSubItems.length;d++)this._selectedSubItems[d][0]==a&&this._selectedSubItems[d][1]==b&&(c=!1);c==!0&&this._selectedSubItems.push([a,b]);return c};this._removeSubItemFromSelected=function(a,b){for(var c=[],d=!1,e=0;e<this._selectedSubItems.length;e++)this._selectedSubItems[e][0]==a&&this._selectedSubItems[e][1]==b?d=!0:c[c.length]=this._selectedSubItems[e];if(d==!0)this._selectedSubItems=c;return d};this._getSubItemToDeselectByPolygon=function(a){for(var b=[],c=0;c<this._selectedSubItems.length;c++)if(this._selectedSubItems[c][1]==a){b[b.length]=this._selectedSubItems[c][0];for(var b=b.concat(this._getSubItemToDeselectByPolygon(this._selectedSubItems[c][0])),d=!0,e=0;e<this._openedPolygons.length;e++)this._openedPolygons[e]==this._selectedSubItems[c][0]&&(d=!1);d==!0&&(this._openedPolygons[this._openedPolygons.length]=this._selectedSubItems[c][0]);this._selectedSubItems[c][0]=-1;this._selectedSubItems[c][1]=-1}return b};this._hidePolygon=function(a){if(this.idPull["polygon_"+a]!=null)if(this.sxDacProc!=null&&this.idPull["sxDac_"+a]!=null)this.idPull["sxDac_"+a]._hide();else if(this.idPull["polygon_"+a].style.display!="none"){this.idPull["polygon_"+a].style.display="none";if(this.idPull["arrowup_"+a]!=null)this.idPull["arrowup_"+a].style.display="none";if(this.idPull["arrowdown_"+a]!=null)this.idPull["arrowdown_"+a].style.display="none";this._updateItemComplexState(a,!0,!1);if(this._isIE6&&this.idPull["polygon_"+a+"_ie6cover"]!=null)this.idPull["polygon_"+a+"_ie6cover"].style.display="none";a=String(a).replace(this.idPrefix,"");a==this.topId&&(a=null);this.callEvent("onHide",[a])}};this._showPolygon=function(a,b){var c=this._countVisiblePolygonItems(a);if(c!=0){var d="polygon_"+a;if(this.idPull[d]!=null&&this.idPull[a]!=null&&(!this.menuModeTopLevelTimeout||this.menuMode!="web"||this.context||this.idPull[a]._mouseOver||b!=this.dirTopLevel)){this.fixedPosition||this._autoDetectVisibleArea();var e=0,g=0,f=null,i=null;if(this.limit>0&&this.limit<c){var n="arrowup_"+a,D="arrowdown_"+a;this.idPull["arrowup_"+a]==null&&this._addUpArrow(String(a).replace(this.idPrefix,""));this.idPull["arrowdown_"+a]==null&&this._addDownArrow(String(a).replace(this.idPrefix,""));f=this.idPull["arrowup_"+a];f.style.visibility="hidden";f.style.display="";f.style.zIndex=this.zInd;e=f.offsetHeight;i=this.idPull["arrowdown_"+a];i.style.visibility="hidden";i.style.display="";i.style.zIndex=this.zInd;g=i.offsetHeight}this.idPull[d].style.visibility="hidden";this.idPull[d].style.left="0px";this.idPull[d].style.top="0px";this.idPull[d].style.display="";this.idPull[d].style.zIndex=this.zInd;if(this.limit>0)this.limit<c?(this.idPull[d].style.height=24*this.limit+"px",this.idPull[d].scrollTop=0):this.idPull[d].style.height="";this.zInd+=this.zIndStep;if(this.itemPull[a]!=null)var C="polygon_"+this.itemPull[a].parent;else this.context&&(C=this.idPull[this.idPrefix+this.topId]);var q=this.idPull[a].tagName!=null?getAbsoluteLeft(this.idPull[a]):this.idPull[a][0],t=this.idPull[a].tagName!=null?getAbsoluteTop(this.idPull[a]):this.idPull[a][1],u=this.idPull[a].tagName!=null?this.idPull[a].offsetWidth:0,B=this.idPull[a].tagName!=null?this.idPull[a].offsetHeight+e+g:0,l=0,o=0,s=this.idPull[d].offsetWidth,x=this.idPull[d].offsetHeight;b=="bottom"&&(l=this._rtl?q+(u!=null?u:0)-s:this._align=="right"?q+u-s:q-1+(b==this.dirTopLevel?this._topLevelRightMargin:0),o=t-1+B-e-g+this._topLevelBottomMargin);b=="right"&&(l=q+u-1,o=t+2);b=="left"&&(l=q-this.idPull[d].offsetWidth+2,o=t+2);b=="top"&&(l=q-1,o=t-x+2);if(this.fixedPosition)var v=65536,y=65536;else if(v=this.menuX2!=null?this.menuX2:0,y=this.menuY2!=null?this.menuY2:0,v==0)window.innerWidth?(v=window.innerWidth,y=window.innerHeight):(v=document.body.offsetWidth,y=document.body.scrollHeight);l+s>v&&!this._rtl&&(l=q-s+2);l<this.menuX1&&this._rtl&&(l=q+u-2);l<0&&(l=0);o+x>y&&this.menuY2!=null&&(o=Math.max(t+B-x+2,2),this.itemPull[a]!=null&&!this.context&&this.itemPull[a].parent==this.idPrefix+this.topId&&(o-=this.base.offsetHeight));this.idPull[d].style.left=l+"px";this.idPull[d].style.top=o+e+"px";if(this.sxDacProc!=null&&this.idPull["sxDac_"+a]!=null)this.idPull["sxDac_"+a]._show();else{this.idPull[d].style.visibility="";if(this.limit>0&&this.limit<c)f.style.left=l+"px",f.style.top=o+"px",f.style.width=s+this._arrowFFFix+"px",f.style.visibility="",i.style.left=l+"px",i.style.top=o+e+x+"px",i.style.width=s+this._arrowFFFix+"px",i.style.visibility="",this._checkArrowsState(a);if(this._isIE6){var r=d+"_ie6cover";if(this.idPull[r]==null){var w=document.createElement("IFRAME");w.className="dhtmlxMenu_IE6CoverFix_"+this.skin;w.frameBorder=0;w.setAttribute("src","javascript:false;");document.body.insertBefore(w,document.body.firstChild);this.idPull[r]=w}this.idPull[r].style.left=this.idPull[d].style.left;this.idPull[r].style.top=this.idPull[d].style.top;this.idPull[r].style.width=this.idPull[d].offsetWidth+"px";this.idPull[r].style.height=this.idPull[d].offsetHeight+"px";this.idPull[r].style.zIndex=this.idPull[d].style.zIndex-1;this.idPull[r].style.display=""}a=String(a).replace(this.idPrefix,"");a==this.topId&&(a=null);this.callEvent("onShow",[a])}}}};this._redistribSubLevelSelection=function(a,b){for(;this._openedPolygons.length>0;)this._openedPolygons.pop();var c=this._getSubItemToDeselectByPolygon(b);this._removeSubItemFromSelected(-1,-1);for(var d=0;d<c.length;d++)if(this.idPull[c[d]]!=null&&c[d]!=a&&this.itemPull[c[d]].state=="enabled")this.idPull[c[d]].className="sub_item";for(d=0;d<this._openedPolygons.length;d++)this._openedPolygons[d]!=b&&this._hidePolygon(this._openedPolygons[d]);if(this.itemPull[a].state=="enabled"){this.idPull[a].className="sub_item_selected";if(this.itemPull[a].complex&&this.dLoad&&this.itemPull[a].loaded=="no"){this.loaderIcon==!0&&this._updateLoaderIcon(a,!0);var e=new dtmlXMLLoaderObject(this._xmlParser,window);this.itemPull[a].loaded="get";this.callEvent("onXLS",[]);e.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&parentId="+a.replace(this.idPrefix,"")+"&etc="+(new Date).getTime())}if((this.itemPull[a].complex||this.dLoad&&this.itemPull[a].loaded=="yes")&&this.itemPull[a].complex&&this.idPull["polygon_"+a]!=null)this._updateItemComplexState(a,!0,!0),this._showPolygon(a,this.dirSubLevel);this._addSubItemToSelected(a,b);this.menuSelected=a}};this._doOnClick=function(a,b,c){this.menuLastClicked=a;if(this.itemPull[this.idPrefix+a].href_link!=null&&this.itemPull[this.idPrefix+a].state=="enabled"){var d=document.createElement("FORM"),e=String(this.itemPull[this.idPrefix+a].href_link).split("?");d.action=e[0];if(e[1]!=null)for(var f=String(e[1]).split("&"),g=0;g<f.length;g++){var i=String(f[g]).split("="),n=document.createElement("INPUT");n.type="hidden";n.name=i[0]||"";n.value=i[1]||"";d.appendChild(n)}if(this.itemPull[this.idPrefix+a].href_target!=null)d.target=this.itemPull[this.idPrefix+a].href_target;d.style.display="none";document.body.appendChild(d);d.submit();d!=null&&(document.body.removeChild(d),d=null)}else b.charAt(0)!="c"&&b.charAt(1)!="d"&&b.charAt(2)!="s"&&(this.checkEvent("onClick")?(this._clearAndHide(),this._isContextMenuVisible()&&this.contextAutoHide&&this._hideContextMenu(),this.callEvent("onClick",[a,this.contextMenuZoneId,c])):b.charAt(1)=="d"||this.menuMode=="win"&&b.charAt(2)=="t"||(this._clearAndHide(),this._isContextMenuVisible()&&this.contextAutoHide&&this._hideContextMenu()))};this._doOnTouchMenu=function(a){if(this.menuTouched==!1)this.menuTouched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[a])};this._searchMenuNode=function(a,b){for(var c=[],d=0;d<b.length;d++)if(typeof b[d]=="object"){b[d].length==5&&typeof b[d][0]!="object"&&b[d][0].replace(this.idPrefix,"")==a&&d==0&&(c=b);var e=this._searchMenuNode(a,b[d]);e.length>0&&(c=e)}return c};this._getMenuNodes=function(a){var b=[],c;for(c in this.itemPull)this.itemPull[c].parent==a&&(b[b.length]=c);return b};this._genStr=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",d=0;d<a;d++)b+=c.charAt(Math.round(Math.random()*(c.length-1)));return b};this.getItemType=function(a){a=this.idPrefix+a;return this.itemPull[a]==null?null:this.itemPull[a].type};this.forEachItem=function(a){for(var b in this.itemPull)a(String(b).replace(this.idPrefix,""))};this._clearAndHide=function(){a.menuSelected=-1;for(a.menuLastClicked=-1;a._openedPolygons.length>0;)a._openedPolygons.pop();for(var b=0;b<a._selectedSubItems.length;b++){var c=a._selectedSubItems[b][0];if(a.idPull[c]!=null&&a.itemPull[c].state=="enabled"){if(a.idPull[c].className=="sub_item_selected")a.idPull[c].className="sub_item";if(a.idPull[c].className=="dhtmlxMenu_"+a.skin+"_TopLevel_Item_Selected")a.idPull[c].className=a.itemPull[c].cssNormal!=null?a.itemPull[c].cssNormal:"dhtmlxMenu_"+a.skin+"_TopLevel_Item_Normal"}a._hidePolygon(c)}a.menuTouched=!1;if(a.context)a.contextHideAllMode?(a._hidePolygon(a.idPrefix+a.topId),a.zInd=a.zIndInit):a.zInd=a.zIndInit+a.zIndStep};this._doOnLoad=function(){};this.loadXML=function(a,b){if(b)this._doOnLoad=function(){b()};this.callEvent("onXLS",[]);this._xmlLoader.loadXML(a)};this.loadXMLString=function(a,b){if(b)this._doOnLoad=function(){b()};this._xmlLoader.loadXMLString(a)};this._buildMenu=function(a,b){for(var c=0,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==this.itemTagName){var e=a.childNodes[d],f={};f.id=this.idPrefix+(e.getAttribute("id")||this._genStr(24));f.title=e.getAttribute("text")||"";f.imgen=e.getAttribute("img")||"";f.imgdis=e.getAttribute("imgdis")||"";f.tip="";f.hotkey="";e.getAttribute("cssNormal")!=null&&(f.cssNormal=e.getAttribute("cssNormal"));f.type=e.getAttribute("type")||"item";if(f.type=="checkbox")f.checked=e.getAttribute("checked")!=null,f.imgen="chbx_"+(f.checked?"1":"0"),f.imgdis=f.imgen;if(f.type=="radio")f.checked=e.getAttribute("checked")!=null,f.imgen="rdbt_"+(f.checked?"1":"0"),f.imgdis=f.imgen,f.group=e.getAttribute("group")||this._genStr(24),this.radio[f.group]==null&&(this.radio[f.group]=[]),this.radio[f.group][this.radio[f.group].length]=f.id;f.state=e.getAttribute("enabled")!=null||e.getAttribute("disabled")!=null?e.getAttribute("enabled")=="false"||e.getAttribute("disabled")=="true"?"disabled":"enabled":"enabled";f.parent=b!=null?b:this.idPrefix+this.topId;f.complex=this.dLoad?e.getAttribute("complex")!=null?!0:!1:this._buildMenu(e,f.id)>0;this.dLoad&&f.complex&&(f.loaded="no");this.itemPull[f.id]=f;for(var g=0;g<e.childNodes.length;g++){var i=e.childNodes[g].tagName;i!=null&&(i=i.toLowerCase());if(i==this.userDataTagName){var n=e.childNodes[g];n.getAttribute("name")!=null&&(this.userData[f.id+"_"+n.getAttribute("name")]=n.firstChild.nodeValue!=null?n.firstChild.nodeValue:"")}if(i==this.itemTextTagName)f.title=e.childNodes[g].firstChild.nodeValue;if(i==this.itemTipTagName)f.tip=e.childNodes[g].firstChild.nodeValue;if(i==this.itemHotKeyTagName)f.hotkey=e.childNodes[g].firstChild.nodeValue;if(i==this.itemHrefTagName&&f.type=="item")f.href_link=e.childNodes[g].firstChild.nodeValue,e.childNodes[g].getAttribute("target")!=null&&(f.href_target=e.childNodes[g].getAttribute("target"))}c++}return c};this._xmlParser=function(){if(a.dLoad){var b=this.getXMLTopNode("menu");parentId=b.getAttribute("parentId")!=null?b.getAttribute("parentId"):null;if(parentId==null)a._buildMenu(b,null),a._initTopLevelMenu();else{a._buildMenu(b,a.idPrefix+parentId);a._addSubMenuPolygon(a.idPrefix+parentId,a.idPrefix+parentId);if(a.menuSelected==a.idPrefix+parentId){var c=a.idPrefix+parentId,d=a.itemPull[a.idPrefix+parentId].parent==a.idPrefix+a.topId,e=d&&!a.context?a.dirTopLevel:a.dirSubLevel,f=!1;if(d&&a.menuModeTopLevelTimeout&&a.menuMode=="web"&&!a.context){var g=a.idPull[a.idPrefix+parentId];if(g._mouseOver==!0){var p=a.menuModeTopLevelTimeoutTime-((new Date).getTime()-g._dynLoadTM);if(p>1)g._menuOpenTM=window.setTimeout(function(){a._showPolygon(c,e)},p),f=!0}}f||a._showPolygon(c,e)}a.itemPull[a.idPrefix+parentId].loaded="yes";a.loaderIcon==!0&&a._updateLoaderIcon(a.idPrefix+parentId,!1)}this.destructor();a.callEvent("onXLE",[])}else b=this.getXMLTopNode("menu"),a._buildMenu(b,null),a.init(),a.callEvent("onXLE",[]),a._doOnLoad()};this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._showSubLevelItem=function(a,b){if(document.getElementById("arrow_"+this.idPrefix+a)!=null)document.getElementById("arrow_"+this.idPrefix+a).style.display=b?"none":"";if(document.getElementById("image_"+this.idPrefix+a)!=null)document.getElementById("image_"+this.idPrefix+a).style.display=b?"none":"";if(document.getElementById(this.idPrefix+a)!=null)document.getElementById(this.idPrefix+a).style.display=b?"":"none"};this._hideSubLevelItem=function(a){this._showSubLevelItem(a,!0)};this.idPrefix=this._genStr(12);this._bodyClick=function(b){b=b||event;b.button==2||_isOpera&&b.ctrlKey==!0||(a.context?a.contextAutoHide&&(!_isOpera||a._isContextMenuVisible()&&_isOpera)&&a._hideContextMenu():a._clearAndHide())};this._bodyContext=function(b){var b=b||event,c=(b.srcElement||b.target).className;if(!(c.search("dhtmlxMenu")!=-1&&c.search("SubLevelArea")!=-1)){var d=!0,e=b.target||b.srcElement;e.id!=null&&a.isContextZone(e.id)&&(d=!1);e==document.body&&(d=!1);d&&a.hideContextMenu()}};_isIE?(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)):(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1));this._UID=this._genStr(32);dhtmlxMenuObjectLiveInstances[this._UID]=this;dhtmlxEventable(this);return this}dhtmlXMenuObject.prototype.init=function(){if(this._isInited!=!0)this.dLoad?(this.callEvent("onXLS",[]),this._xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&etc="+(new Date).getTime())):(this._initTopLevelMenu(),this._isInited=!0)};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(b){var c=0,a;for(a in this.itemPull){var d=this.itemPull[a].parent,f=this.itemPull[a].type;this.idPull[a]!=null&&d==b&&(f=="item"||f=="radio"||f=="checkbox")&&this.idPull[a].style.display!="none"&&c++}return c};dhtmlXMenuObject.prototype._redefineComplexState=function(b){if(this.idPrefix+this.topId!=b&&this.idPull["polygon_"+b]!=null&&this.idPull[b]!=null){var c=this._countVisiblePolygonItems(b);c>0&&!this.itemPull[b].complex&&this._updateItemComplexState(b,!0,!1);c==0&&this.itemPull[b].complex&&this._updateItemComplexState(b,!1,!1)}};dhtmlXMenuObject.prototype._updateItemComplexState=function(b,c){if(!this.context&&this._getItemLevelType(b.replace(this.idPrefix,""))=="TopLevel")this.itemPull[b].complex=c;else if(!(this.idPull[b]==null||this.itemPull[b]==null))if(this.itemPull[b].complex=c,b!=this.idPrefix+this.topId){var a=null,d=this.idPull[b].childNodes[this._rtl?0:2];d.childNodes[0]&&String(d.childNodes[0].className).search("complex_arrow")===0&&(a=d.childNodes[0]);if(this.itemPull[b].complex){if(a==null){a=document.createElement("DIV");a.className="complex_arrow";for(a.id="arrow_"+b;d.childNodes.length>0;)d.removeChild(d.childNodes[0]);d.appendChild(a)}if(this.dLoad&&this.itemPull[b].loaded=="get"&&this.loaderIcon){if(a.className!="complex_arrow_loading")a.className="complex_arrow_loading"}else a.className="complex_arrow"}else!this.itemPull[b].complex&&a!=null&&(d.removeChild(a),this.itemPull[b].hotkey_backup!=null&&this.setHotKey&&this.setHotKey(b.replace(this.idPrefix,""),this.itemPull[b].hotkey_backup))}};dhtmlXMenuObject.prototype._getItemLevelType=function(b){return this.itemPull[this.idPrefix+b].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"};dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(b){var c=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var a=0;a<c.length;a++)if(c[a]!=b&&this._hidePolygon(c[a]),this.idPull[c[a]]!=null&&c[a]!=b)this.idPull[c[a]].className=this.idPull[c[a]].className.replace(/Selected/g,"Normal");if(this.itemPull[this.idPrefix+b].state=="enabled")this.idPull[this.idPrefix+b].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+b,"parent"),this.menuSelected=this.menuMode=="win"?this.menuSelected!=-1?b:this.menuSelected:b,this.itemPull[this.idPrefix+b].complex&&this.menuSelected!=-1&&this._showPolygon(this.idPrefix+b,this.dirTopLevel)};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.dirTopLevel="bottom";this.dirSubLevel=this._rtl?"left":"right";if(this.context)this.idPull[this.idPrefix+this.topId]=[0,0],this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var b=this._getMenuNodes(this.idPrefix+this.topId),c=0;c<b.length;c++)this.itemPull[b[c]].type=="item"&&this._renderToplevelItem(b[c],null),this.itemPull[b[c]].type=="separator"&&this._renderSeparator(b[c],null)};dhtmlXMenuObject.prototype._renderToplevelItem=function(b,c){var a=this,d=document.createElement("DIV");d.id=b;d.className=this.itemPull[b].state=="enabled"&&this.itemPull[b].cssNormal!=null?this.itemPull[b].cssNormal:"dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[b].state=="enabled"?"Normal":"Disabled");if(this.itemPull[b].title!=""){var f=document.createElement("DIV");f.className="top_level_text";f.innerHTML=this.itemPull[b].title;d.appendChild(f)}if(this.itemPull[b].tip.length>0)d.title=this.itemPull[b].tip;if(this.itemPull[b].imgen!=""||this.itemPull[b].imgdis!=""){var e=this.itemPull[b][this.itemPull[b].state=="enabled"?"imgen":"imgdis"];if(e){var g=document.createElement("IMG");g.border="0";g.id="image_"+b;g.src=this.imagePath+e;g.className="dhtmlxMenu_TopLevel_Item_Icon";d.childNodes.length>0&&!this._rtl?d.insertBefore(g,d.childNodes[0]):d.appendChild(g)}}d.onselectstart=function(a){a=a||event;return a.returnValue=!1};d.oncontextmenu=function(a){a=a||event;return a.returnValue=!1};if(!this.cont)this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className=this._align=="right"?"align_right":"align_left",this.base.appendChild(this.cont);c!=null&&(c++,c<0&&(c=0),c>this.cont.childNodes.length-1&&(c=null));c!=null?this.cont.insertBefore(d,this.cont.childNodes[c]):this.cont.appendChild(d);this.idPull[d.id]=d;this.itemPull[b].complex&&!this.dLoad&&this._addSubMenuPolygon(this.itemPull[b].id,this.itemPull[b].id);d.onmouseover=function(){a.menuMode=="web"&&window.clearTimeout(a.menuTimeoutHandler);var b=a._getSubItemToDeselectByPolygon("parent");a._removeSubItemFromSelected(-1,-1);for(var c=0;c<b.length;c++)if(b[c]!=this.id&&a._hidePolygon(b[c]),a.idPull[b[c]]!=null&&b[c]!=this.id)if(a.itemPull[b[c]].cssNormal!=null)a.idPull[b[c]].className=a.itemPull[b[c]].cssNormal;else{if(a.idPull[b[c]].className=="sub_item_selected")a.idPull[b[c]].className="sub_item";a.idPull[b[c]].className=a.idPull[b[c]].className.replace(/Selected/g,"Normal")}if(a.itemPull[this.id].state=="enabled"){this.className="dhtmlxMenu_"+a.skin+"_TopLevel_Item_Selected";a._addSubItemToSelected(this.id,"parent");a.menuSelected=a.menuMode=="win"?a.menuSelected!=-1?this.id:a.menuSelected:this.id;if(a.dLoad&&a.itemPull[this.id].loaded=="no"){if(a.menuModeTopLevelTimeout&&a.menuMode=="web"&&!a.context)this._mouseOver=!0,this._dynLoadTM=(new Date).getTime();var d=new dtmlXMLLoaderObject(a._xmlParser,window);a.itemPull[this.id].loaded="get";a.callEvent("onXLS",[]);d.loadXML(a.dLoadUrl+a.dLoadSign+"action=loadMenu&parentId="+this.id.replace(a.idPrefix,"")+"&etc="+(new Date).getTime())}if((!a.dLoad||a.dLoad&&(!a.itemPull[this.id].loaded||a.itemPull[this.id].loaded=="yes"))&&a.itemPull[this.id].complex&&a.menuSelected!=-1)if(a.menuModeTopLevelTimeout&&a.menuMode=="web"&&!a.context){this._mouseOver=!0;var e=this.id;this._menuOpenTM=window.setTimeout(function(){a._showPolygon(e,a.dirTopLevel)},a.menuModeTopLevelTimeoutTime)}else a._showPolygon(this.id,a.dirTopLevel)}a._doOnTouchMenu(this.id.replace(a.idPrefix,""))};d.onmouseout=function(){if(!(a.itemPull[this.id].complex&&a.menuSelected!=-1)&&a.itemPull[this.id].state=="enabled")d.className=a.itemPull[this.id].cssNormal!=null?a.itemPull[this.id].cssNormal:"dhtmlxMenu_"+a.skin+"_TopLevel_Item_Normal";if(a.menuMode=="web")window.clearTimeout(a.menuTimeoutHandler),a.menuTimeoutHandler=window.setTimeout(function(){a._clearAndHide()},a.menuTimeoutMsec,"JavaScript");if(a.menuModeTopLevelTimeout&&a.menuMode=="web"&&!a.context)this._mouseOver=!1,window.clearTimeout(this._menuOpenTM)};d.onclick=function(b){a.menuMode=="web"&&window.clearTimeout(a.menuTimeoutHandler);if(!(a.menuMode!="web"&&a.itemPull[this.id].state=="disabled")){b=b||event;b.cancelBubble=!0;b.returnValue=!1;if(a.menuMode=="win"&&a.itemPull[this.id].complex){if(a.menuSelected==this.id){a.menuSelected=-1;var c=!1}else a.menuSelected=this.id,c=!0;c?a._showPolygon(this.id,a.dirTopLevel):a._hidePolygon(this.id)}var d=a.itemPull[this.id].complex?"c":"-",e=a.itemPull[this.id].state!="enabled"?"d":"-",f={ctrl:b.ctrlKey,alt:b.altKey,shift:b.shiftKey};a._doOnClick(this.id.replace(a.idPrefix,""),d+e+"t",f);return!1}}};dhtmlXMenuObject.prototype.setImagePath=function(){};dhtmlXMenuObject.prototype.setIconsPath=function(b){this.imagePath=b};dhtmlXMenuObject.prototype.setIconPath=dhtmlXMenuObject.prototype.setIconsPath;dhtmlXMenuObject.prototype._updateItemImage=function(b){var b=this.idPrefix+b,c=this.itemPull[b].parent==this.idPrefix+this.topId&&!this.context,a=null;if(c)for(var d=0;d<this.idPull[b].childNodes.length;d++)try{this.idPull[b].childNodes[d].className=="dhtmlxMenu_TopLevel_Item_Icon"&&(a=this.idPull[b].childNodes[d])}catch(f){}else try{a=this.idPull[b].childNodes[this._rtl?2:0].childNodes[0]}catch(e){}var g=this.itemPull[b].type=="radio"?this.itemPull[b][this.itemPull[b].state=="enabled"?"imgen":"imgdis"]:this.itemPull[b][this.itemPull[b].state=="enabled"?"imgen":"imgdis"];if(g.length>0)if(a!=null)a.src=this.imagePath+g;else if(c)a=document.createElement("IMG"),a.className="dhtmlxMenu_TopLevel_Item_Icon",a.src=this.imagePath+g,a.border="0",a.id="image_"+b,!this._rtl&&this.idPull[b].childNodes.length>0?this.idPull[b].insertBefore(a,this.idPull[b].childNodes[0]):this.idPull[b].appendChild(a);else{a=document.createElement("IMG");a.className="sub_icon";a.src=this.imagePath+g;a.border="0";a.id="image_"+b;for(var h=this.idPull[b].childNodes[this._rtl?2:0];h.childNodes.length>0;)h.removeChild(h.childNodes[0]);h.appendChild(a)}else a!=null&&a.parentNode.removeChild(a)};dhtmlXMenuObject.prototype.removeItem=function(b,c,a){c||(b=this.idPrefix+b);var d=null;if(b!=this.idPrefix+this.topId){if(this.itemPull[b]==null)return;var f=this.itemPull[b].type;if(f=="separator"){var e=this.idPull["separator_"+b];this.itemPull[b].parent==this.idPrefix+this.topId?(e.onclick=null,e.onselectstart=null,e.id=null):(e.childNodes[0].childNodes[0].onclick=null,e.childNodes[0].childNodes[0].onselectstart=null,e.childNodes[0].childNodes[0].id=null,e.childNodes[0].removeChild(e.childNodes[0].childNodes[0]),e.removeChild(e.childNodes[0]));e.parentNode.removeChild(e);this.idPull["separator_"+b]=null;this.itemPull[b]=null;delete this.idPull["separator_"+b]}else{d=this.itemPull[b].parent;e=this.idPull[b];e.onclick=null;e.oncontextmenu=null;e.onmouseover=null;e.onmouseout=null;e.onselectstart=null;for(e.id=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);e.parentNode.removeChild(e);this.idPull[b]=null;this.itemPull[b]=null;delete this.idPull[b]}delete this.itemPull[b];f=e=null}for(var g in this.itemPull)this.itemPull[g].parent==b&&this.removeItem(g,!0,!0);var h=Array(b);d!=null&&!a&&this.idPull["polygon_"+d]!=null&&this.idPull["polygon_"+d].tbd.childNodes.length==0&&(h.push(d),this._updateItemComplexState(d,!1,!1));for(var j=0;j<h.length;j++)if(this.idPull["polygon_"+h[j]]){var k=this.idPull["polygon_"+h[j]];k.onclick=null;k.oncontextmenu=null;k.tbl.removeChild(k.tbd);k.tbd=null;k.removeChild(k.tbl);k.tbl=null;k.id=null;k.parentNode.removeChild(k);k=null;if(this._isIE6){var m="polygon_"+h[j]+"_ie6cover";this.idPull[m]!=null&&(document.body.removeChild(this.idPull[m]),delete this.idPull[m])}this.idPull["arrowup_"+b]!=null&&this._removeArrow&&this._removeArrow("arrowup_"+b);this.idPull["arrowdown_"+b]!=null&&this._removeArrow&&this._removeArrow("arrowdown_"+b);this.idPull["polygon_"+h[j]]=null;delete this.idPull["polygon_"+h[j]]}h=null};dhtmlXMenuObject.prototype._getAllParents=function(b){var c=[],a;for(a in this.itemPull)if(this.itemPull[a].parent==b&&(c[c.length]=this.itemPull[a].id,this.itemPull[a].complex))for(var d=this._getAllParents(this.itemPull[a].id),f=0;f<d.length;f++)c[c.length]=d[f];return c};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.context=!0;if(this.base._autoSkinUpdate==!0)this.base.className=this.base.className.replace("dhtmlxMenu_"+this.skin+"_Middle",""),this.base._autoSkinUpdate=!1;this.addBaseIdAsContextZone!=null&&this.addContextZone(this.addBaseIdAsContextZone)};dhtmlXMenuObject.prototype.addContextZone=function(b){if(typeof b=="string"){c=document.getElementById(b)}else{c=b;if(b==document.body){b="document.body"}else{b=c.id}}this.contextZones[b]=c;var f=this;if(_isOpera)this.operaContext=function(a){f._doOnContextMenuOpera(a,f)},c.addEventListener("mouseup",this.operaContext,!1);else{if(c.oncontextmenu!=null&&!c._oldContextMenuHandler)c._oldContextMenuHandler=c.oncontextmenu;c.oncontextmenu=function(a){if(a.target.tagName=="INPUT"||a.target.tagName=="textarea"){return}for(var b in dhtmlxMenuObjectLiveInstances)b!=f._UID&&dhtmlxMenuObjectLiveInstances[b].context&&dhtmlxMenuObjectLiveInstances[b]._hideContextMenu();a=a||event;a.cancelBubble=!0;a.returnValue=!1;f._doOnContextBeforeCall(a,this);return!1}}};dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(b,c){for(var a in dhtmlxMenuObjectLiveInstances)a!=c._UID&&dhtmlxMenuObjectLiveInstances[a].context&&dhtmlxMenuObjectLiveInstances[a]._hideContextMenu();b.cancelBubble=!0;b.returnValue=!1;b.button==0&&b.ctrlKey==!0&&c._doOnContextBeforeCall(b,this);return!1};dhtmlXMenuObject.prototype.removeContextZone=function(b){if(!this.isContextZone(b))return!1;b==document.body&&(b="document.body."+this.idPrefix);var c=this.contextZones[b];_isOpera?c.removeEventListener("mouseup",this.operaContext,!1):(c.oncontextmenu=c._oldContextMenuHandler!=null?c._oldContextMenuHandler:null,c._oldContextMenuHandler=null);try{this.contextZones[b]=null,delete this.contextZones[b]}catch(a){}return!0};dhtmlXMenuObject.prototype.isContextZone=function(b){if(b==document.body&&this.contextZones["document.body."+this.idPrefix]!=null)return!0;var c=!1;this.contextZones[b]!=null&&this.contextZones[b]==document.getElementById(b)&&(c=!0);return c};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return this.idPull["polygon_"+this.idPrefix+this.topId]==null?!1:this.idPull["polygon_"+this.idPrefix+this.topId].style.display==""};dhtmlXMenuObject.prototype._showContextMenu=function(b,c,a){this._clearAndHide();if(this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;window.clearTimeout(this.menuTimeoutHandler);this.idPull[this.idPrefix+this.topId]=[b,c];this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[a,this.contextMenuZoneId])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId);this.zInd=this.zIndInit};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(b,c){this.contextMenuZoneId=c.id;this._clearAndHide();this._hideContextMenu();var a=b.srcElement||b.target,d=_isIE||_isOpera||_KHTMLrv?b.offsetX:b.layerX,f=_isIE||_isOpera||_KHTMLrv?b.offsetY:b.layerY,e=getAbsoluteLeft(a)+d,g=getAbsoluteTop(a)+f;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[c.id,b])&&this.contextAutoShow&&(this._showContextMenu(e,g),this.callEvent("onAfterContextMenu",[c.id,b])):this.contextAutoShow&&(this._showContextMenu(e,g),this.callEvent("onAfterContextMenu",[c.id]))};dhtmlXMenuObject.prototype.showContextMenu=function(b,c){this._showContextMenu(b,c,!1)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this._isVisibleArea)this.menuX1=document.body.scrollLeft,this.menuX2=this.menuX1+(window.innerWidth||document.body.clientWidth),this.menuY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),this.menuY2=this.menuY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight)};dhtmlXMenuObject.prototype.getItemPosition=function(b){var b=this.idPrefix+b,c=-1;if(this.itemPull[b]==null)return c;for(var a=this.itemPull[b].parent,d=this.idPull["polygon_"+a]!=null?this.idPull["polygon_"+a].tbd:this.cont,f=0;f<d.childNodes.length;f++)if(d.childNodes[f]==this.idPull["separator_"+b]||d.childNodes[f]==this.idPull[b])c=f;return c};dhtmlXMenuObject.prototype.setItemPosition=function(b,c){b=this.idPrefix+b;if(this.idPull[b]!=null){var a=this.itemPull[b].parent==this.idPrefix+this.topId,d=this.idPull[b],f=this.getItemPosition(b.replace(this.idPrefix,"")),e=this.itemPull[b].parent,g=this.idPull["polygon_"+e]!=null?this.idPull["polygon_"+e].tbd:this.cont;g.removeChild(g.childNodes[f]);c<0&&(c=0);a&&c<1&&(c=1);c<g.childNodes.length?g.insertBefore(d,g.childNodes[c]):g.appendChild(d)}};dhtmlXMenuObject.prototype.getParentId=function(b){b=this.idPrefix+b;return this.itemPull[b]==null?null:(this.itemPull[b].parent!=null?this.itemPull[b].parent:this.topId).replace(this.idPrefix,"")};dhtmlXMenuObject.prototype.addNewSibling=function(b,c,a,d,f,e){var g=this.idPrefix+(c!=null?c:this._genStr(24)),h=this.idPrefix+(b!=null?this.getParentId(b):this.topId);this._addItemIntoGlobalStrorage(g,h,a,"item",d,f,e);h==this.idPrefix+this.topId&&!this.context?this._renderToplevelItem(g,this.getItemPosition(b)):this._renderSublevelItem(g,this.getItemPosition(b))};dhtmlXMenuObject.prototype.addNewChild=function(b,c,a,d,f,e,g){
if(b==null)if(this.context)b=this.topId;else{this.addNewSibling(b,a,d,f,e,g);c!=null&&this.setItemPosition(a,c);return}a=this.idPrefix+(a!=null?a:this._genStr(24));this.setHotKey&&this.setHotKey(b,"");b=this.idPrefix+b;this._addItemIntoGlobalStrorage(a,b,d,"item",f,e,g);this.idPull["polygon_"+b]==null&&this._renderSublevelPolygon(b,b);this._renderSublevelItem(a,c-1);this._redefineComplexState(b)};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(b,c,a,d,f,e,g){var h={id:b,title:a,imgen:e!=null?e:"",imgdis:g!=null?g:"",type:d,state:f==!0?"disabled":"enabled",parent:c,complex:!1,hotkey:"",tip:""};this.itemPull[h.id]=h};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(b,c){for(var a=this._renderSublevelPolygon(b,c),d=this._getMenuNodes(c),f=0;f<d.length;f++)this.itemPull[d[f]].type=="separator"?this._renderSeparator(d[f],null):this._renderSublevelItem(d[f],null);for(var e=b==c?"topLevel":"subLevel",f=0;f<d.length;f++)this.itemPull[d[f]].complex&&this._addSubMenuPolygon(b,this.itemPull[d[f]].id)};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(b,c){var a=document.createElement("DIV");a.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Polygon "+(this._rtl?"dir_right":"");a.dir="ltr";a.oncontextmenu=function(a){a=a||event;a.returnValue=!1;a.cancelBubble=!0;return!1};a.id="polygon_"+c;a.onclick=function(a){a=a||event;a.cancelBubble=!0};a.style.display="none";document.body.insertBefore(a,document.body.firstChild);var d=document.createElement("TABLE");d.className="dhtmlxMebu_SubLevelArea_Tbl";d.cellSpacing=0;d.cellPadding=0;d.border=0;var f=document.createElement("TBODY");d.appendChild(f);a.appendChild(d);a.tbl=d;a.tbd=f;this.idPull[a.id]=a;this.sxDacProc!=null&&(this.idPull["sxDac_"+c]=new this.sxDacProc(a,a.className),_isIE?(this.idPull["sxDac_"+c]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+c]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+c]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+c]._setCustomCycle(this.dacCycles)));return a};dhtmlXMenuObject.prototype._renderSublevelItem=function(b,c){var a=this,d=document.createElement("TR");d.className=this.itemPull[b].state=="enabled"?"sub_item":"sub_item_dis";var f=document.createElement("TD");f.className="sub_item_icon";var e=this.itemPull[b][this.itemPull[b].state=="enabled"?"imgen":"imgdis"];if(e!=""){var g=this.itemPull[b].type;if(g=="checkbox"||g=="radio"){var h=document.createElement("DIV");h.id="image_"+this.itemPull[b].id;h.className="sub_icon "+e;f.appendChild(h)}if(!(g=="checkbox"||g=="radio"))h=document.createElement("IMG"),h.id="image_"+this.itemPull[b].id,h.className="sub_icon",h.src=this.imagePath+e,f.appendChild(h)}var j=document.createElement("TD");j.className="sub_item_text";if(this.itemPull[b].title!=""){var k=document.createElement("DIV");k.className="sub_item_text";k.innerHTML=this.itemPull[b].title;j.appendChild(k)}else j.innerHTML="&nbsp;";var m=document.createElement("TD");m.className="sub_item_hk";if(this.itemPull[b].complex){var z=document.createElement("DIV");z.className="complex_arrow";z.id="arrow_"+this.itemPull[b].id;m.appendChild(z)}else if(this.itemPull[b].hotkey.length>0&&!this.itemPull[b].complex){var A=document.createElement("DIV");A.className="sub_item_hk";A.innerHTML=this.itemPull[b].hotkey;m.appendChild(A)}else m.innerHTML="&nbsp;";d.appendChild(this._rtl?m:f);d.appendChild(j);d.appendChild(this._rtl?f:m);d.id=this.itemPull[b].id;d.parent=this.itemPull[b].parent;if(this.itemPull[b].tip.length>0)d.title=this.itemPull[b].tip;d.onselectstart=function(a){a=a||event;return a.returnValue=!1};d.onmouseover=function(){a.menuMode=="web"&&window.clearTimeout(a.menuTimeoutHandler);a._redistribSubLevelSelection(this.id,this.parent)};if(a.menuMode=="web")d.onmouseout=function(){window.clearTimeout(a.menuTimeoutHandler);a.menuTimeoutHandler=window.setTimeout(function(){a._clearAndHide()},a.menuTimeoutMsec,"JavaScript")};d.onclick=function(b){if(a.checkEvent("onClick")||!a.itemPull[this.id].complex){b=b||event;b.cancelBubble=!0;b.returnValue=!1;tc=a.itemPull[this.id].complex?"c":"-";td=a.itemPull[this.id].state=="enabled"?"-":"d";var c={ctrl:b.ctrlKey,alt:b.altKey,shift:b.shiftKey};switch(a.itemPull[this.id].type){case"checkbox":a._checkboxOnClickHandler(this.id.replace(a.idPrefix,""),tc+td+"n",c);a.hide();break;case"radio":a._radioOnClickHandler(this.id.replace(a.idPrefix,""),tc+td+"n",c);break;case"item":a._doOnClick(this.id.replace(a.idPrefix,""),tc+td+"n",c)}return!1}};var p=this.idPull["polygon_"+this.itemPull[b].parent];c!=null&&(c++,c<0&&(c=0),c>p.tbd.childNodes.length-1&&(c=null));c!=null&&p.tbd.childNodes[c]!=null?p.tbd.insertBefore(d,p.tbd.childNodes[c]):p.tbd.appendChild(d);this.idPull[d.id]=d};dhtmlXMenuObject.prototype._renderSeparator=function(b,c){var a=this.context?"SubLevelArea":this.itemPull[b].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if(!(a=="TopLevel"&&this.context)){var d=this;if(a!="TopLevel"){var f=document.createElement("TR");f.className="sub_sep";var e=document.createElement("TD");e.colSpan="3";f.appendChild(e)}var g=document.createElement("DIV");g.id="separator_"+b;g.className=a=="TopLevel"?"top_sep":"sub_sep";g.onselectstart=function(a){a=a||event;a.returnValue=!1};g.onclick=function(a){a=a||event;a.cancelBubble=!0;var b={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};d._doOnClick(this.id.replace("separator_"+d.idPrefix,""),"--s",b)};if(a=="TopLevel"){if(c!=null)c++,c<0&&(c=0),this.cont.childNodes[c]!=null?this.cont.insertBefore(g,this.cont.childNodes[c]):this.cont.appendChild(g);else{var h=this.cont.childNodes[this.cont.childNodes.length-1];String(h).search("TopLevel_Text")==-1?this.cont.appendChild(g):this.cont.insertBefore(g,h)}this.idPull[g.id]=g}else{var j=this.idPull["polygon_"+this.itemPull[b].parent];c!=null&&(c++,c<0&&(c=0),c>j.tbd.childNodes.length-1&&(c=null));c!=null&&j.tbd.childNodes[c]!=null?j.tbd.insertBefore(f,j.tbd.childNodes[c]):j.tbd.appendChild(f);e.appendChild(g);this.idPull[g.id]=f}}};dhtmlXMenuObject.prototype.addNewSeparator=function(b,c){var c=this.idPrefix+(c!=null?c:this._genStr(24)),a=this.idPrefix+this.getParentId(b);this._addItemIntoGlobalStrorage(c,a,"","separator",!1,"","");this._renderSeparator(c,this.getItemPosition(b))};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0);this._isInited=!1;this.idPrefix=this._genStr(12)};dhtmlXMenuObject.prototype.unload=function(){_isIE?(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)):(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1));this._bodyContext=this._bodyClick=null;this.removeItem(this.idPrefix+this.topId,!0);this.idPull=this.itemPull=null;if(this.context)for(var b in this.contextZones)this.removeContextZone(b);if(this.cont!=null)this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null;if(this.base!=null){this.base.className="";if(!this.context)this.base.oncontextmenu=this.base._oldContextMenuHandler||null;this.base=this.base.onselectstart=null}this.setSkin=null;this.detachAllEvents();if(this._xmlLoader)this._xmlLoader.destructor(),this._xmlLoader=null;this.extendedModule=this.serialize=this.addCheckbox=this.getCheckboxState=this.setCheckboxState=this.addRadioButton=this.setRadioChecked=this.getRadioChecked=this.userData=this.setOverflowHeight=this.contextZones=this.getCircuit=this.clearHref=this.setHref=this.setAlign=this.setRTL=this.setTopText=this.setItemSelected=this.getHotKey=this.setHotKey=this.getTooltip=this.setTooltip=this.setVisibleArea=this.getContextMenuHideAllMode=this.setContextMenuHideAllMode=this.setAutoHideMode=this.setAutoShowMode=this.clearItemImage=this.setItemImage=this.getItemImage=this.enableDynamicLoading=this.setWebModeTimeout=this.setOpenMode=this.getUserData=this.setUserData=this.isItemHidden=this.showItem=this.hideItem=this.loadFromHTML=this.setItemText=this.getItemText=this.isItemEnabled=this.setItemDisabled=this.setItemEnabled=this._removeArrow=this._checkboxOnClickHandler=this._updateCheckboxImage=this._readLevel=this._setCheckboxState=this._getCheckboxState=this._radioOnClickHandler=this._setRadioState=this._getRadioImgObj=this._countPolygonItems=this._doScrollDown=this._doScrollUp=this._isArrowExists=this._removeDownArrow=this._removeUpArrow=this._addDownArrow=this._addUpArrow=this._checkArrowsState=this._clearAllSelectedSubItemsInPolygon=this._updateLoaderIcon=this._changeItemVisible=this._changeItemState=this.hideContextMenu=this.showContextMenu=this.hide=this.detachAllEvents=this.radio=this.items=this.unload=this.dhx_Event=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=this.addNewSeparator=this.addNewChild=this.addNewSibling=this.getParentId=this.setItemPosition=this.getItemPosition=this.clearAll=this._hideContextMenu=this._renderSeparator=this._renderSublevelItem=this._renderSublevelPolygon=this._addSubMenuPolygon=this._addItemIntoGlobalStrorage=this._autoDetectVisibleArea=this._doOnContextBeforeCall=this._showContextMenu=this._isContextMenuVisible=this.isContextZone=this.removeContextZone=this.addContextZone=this.renderAsContextMenu=this._getAllParents=this.removeItem=this._updateItemImage=this.setIconPath=this.setIconsPath=this.setImagePath=this._renderToplevelItem=this._initTopLevelMenu=this._redistribTopLevelSelection=this._getItemLevelType=this._updateItemComplexState=this._redefineComplexState=this._countVisiblePolygonItems=this._hideSubLevelItem=this._showSubLevelItem=this._xmlParser=this._buildMenu=this.loadXMLString=this.loadXML=this.init=this.forEachItem=this.getItemType=this._doOnLoad=this._clearAndHide=this._genStr=this._getMenuNodes=this._searchMenuNode=this._doOnTouchMenu=this._doOnClick=this._redistribSubLevelSelection=this._showPolygon=this._hidePolygon=this._getSubItemToDeselectByPolygon=this._removeSubItemFromSelected=this._addSubItemToSelected=this._openedPolygons=this._selectedSubItems=this._enableDacSupport=this.zIndStep=this.zIndInit=this.zInd=this.dacSpeedIE=this.dacSpeed=this.dacCyclesIE=this.dacCycles=this.topId=this.skin=this.userDataTagName=this.itemTipTagName=this.itemTextTagName=this.itemTagName=this.itemHrefTagName=this.itemHotKeyTagName=this.isDhtmlxMenuObject=this.menuTouched=this.menuTimeoutMsec=this.menuTimeoutHandler=this.menuModeTopLevelTimeoutTime=this.menuModeTopLevelTimeout=this.menuMode=this.imagePath=this.idPrefix=this.menuLastClicked=this.menuSelected=this.limit=this.dirTopLevel=this.dirSubLevel=this.fixedPosition=this.loaderIcon=this.dLoadUrl=this.dLoadSign=this.dLoad=this.contextMenuZoneId=this.contextHideAllMode=this.contextAutoShow=this.contextAutoHide=this.context=this.addBaseIdAsContextZone=this._topLevelRightMargin=this._topLevelBottomMargin=this._topLevelOffsetLeft=this._topLevelBottomMargin=this._scrollUpTMTime=this._scrollUpTMStep=this._scrollDownTMTime=this._scrollDownTMStep=this._rtl=this._isInited=this._isIE6=this._arrowFFFix=this._align=null;dhtmlxMenuObjectLiveInstances[this._UID]=null;try{delete dhtmlxMenuObjectLiveInstances[this._UID]}catch(c){}this._UID=null};var dhtmlxMenuObjectLiveInstances={};dhtmlXMenuObject.prototype.i18n={dhxmenuextalert:"dhtmlxmenu_ext.js required"};(function(){dhtmlx.extend_api("dhtmlXMenuObject",{_init:function(b){return[b.parent,b.skin]},align:"setAlign",top_text:"setTopText",context:"renderAsContextMenu",icon_path:"setIconsPath",open_mode:"setOpenMode",rtl:"setRTL",skin:"setSkin",dynamic:"enableDynamicLoading",xml:"loadXML",items:"items",overflow:"setOverflowHeight"},{items:function(b,c){for(var a=1e5,d=null,f=0;f<b.length;f++){var e=b[f];e.type=="separator"?(this.addNewSeparator(d,a,e.id),d=e.id):(this.addNewChild(c,a,e.id,e.text,e.disabled,e.img,e.img_disabled),d=e.id,e.items&&this.items(e.items,e.id))}}})})();dhtmlXMenuObject.prototype.extendedModule="DHXMENUEXT";dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,"enabled",this._getItemLevelType(a))};dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,"disabled",this._getItemLevelType(a))};dhtmlXMenuObject.prototype.isItemEnabled=function(a){return this.itemPull[this.idPrefix+a]!=null?this.itemPull[this.idPrefix+a].state=="enabled":!1};dhtmlXMenuObject.prototype._changeItemState=function(a,c,b){var d=!1,e=this.idPrefix+a;if(this.itemPull[e]!=null&&this.idPull[e]!=null&&this.itemPull[e].state!=c)this.itemPull[e].state=c,this.idPull[e].className=this.itemPull[e].parent==this.idPrefix+this.topId&&!this.context?"dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[e].state=="enabled"?"Normal":"Disabled"):"sub_item"+(this.itemPull[e].state=="enabled"?"":"_dis"),this._updateItemComplexState(this.idPrefix+a,this.itemPull[this.idPrefix+a].complex,!1),this._updateItemImage(a,b),this.idPrefix+this.menuLastClicked==e&&b!="TopLevel"&&this._redistribSubLevelSelection(e,this.itemPull[e].parent);return d};dhtmlXMenuObject.prototype.getItemText=function(a){return this.itemPull[this.idPrefix+a]!=null?this.itemPull[this.idPrefix+a].title:""};dhtmlXMenuObject.prototype.setItemText=function(a,c){a=this.idPrefix+a;if(this.itemPull[a]!=null&&this.idPull[a]!=null)if(this._clearAndHide(),this.itemPull[a].title=c,this.itemPull[a].parent==this.idPrefix+this.topId&&!this.context){for(var b=null,d=0;d<this.idPull[a].childNodes.length;d++)try{this.idPull[a].childNodes[d].className=="top_level_text"&&(b=this.idPull[a].childNodes[d])}catch(e){}if(String(this.itemPull[a].title).length==""||this.itemPull[a].title==null)b!=null&&b.parentNode.removeChild(b);else{if(!b)b=document.createElement("DIV"),b.className="top_level_text",this._rtl&&this.idPull[a].childNodes.length>0?this.idPull[a].insertBefore(b,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(b);b.innerHTML=this.itemPull[a].title}}else{b=null;for(d=0;d<this.idPull[a].childNodes[1].childNodes.length;d++)if(String(this.idPull[a].childNodes[1].childNodes[d].className||"")=="sub_item_text")b=this.idPull[a].childNodes[1].childNodes[d];if(String(this.itemPull[a].title).length==""||this.itemPull[a].title==null){if(b)b.parentNode.removeChild(b),b=null,this.idPull[a].childNodes[1].innerHTML="&nbsp;"}else{if(!b)b=document.createElement("DIV"),b.className="sub_item_text",this.idPull[a].childNodes[1].innerHTML="",this.idPull[a].childNodes[1].appendChild(b);b.innerHTML=this.itemPull[a].title}}};dhtmlXMenuObject.prototype.loadFromHTML=function(a,c,b){this.itemTagName="DIV";typeof a=="string"&&(a=document.getElementById(a));this._buildMenu(a,null);this.init();c&&a.parentNode.removeChild(a);b!=null&&b()};dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,!1)};dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,!0)};dhtmlXMenuObject.prototype.isItemHidden=function(a){var c=null;this.idPull[this.idPrefix+a]!=null&&(c=this.idPull[this.idPrefix+a].style.display=="none");return c};dhtmlXMenuObject.prototype._changeItemVisible=function(a,c){var b=this.idPrefix+a;if(this.itemPull[b]!=null&&(this.itemPull[b].type=="separator"&&(b="separator_"+b),this.idPull[b]!=null))this.idPull[b].style.display=c?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+a].parent)};dhtmlXMenuObject.prototype.setUserData=function(a,c,b){this.userData[this.idPrefix+a+"_"+c]=b};dhtmlXMenuObject.prototype.getUserData=function(a,c){return this.userData[this.idPrefix+a+"_"+c]!=null?this.userData[this.idPrefix+a+"_"+c]:null};dhtmlXMenuObject.prototype.setOpenMode=function(a){if(a=="win"||a=="web")this.menuMode=a};dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.menuTimeoutMsec=!isNaN(a)?a:400};dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,c){this.dLoad=!0;this.dLoadUrl=a;this.dLoadSign=String(this.dLoadUrl).search(/\?/)==-1?"?":"&";this.loaderIcon=c;this.init()};dhtmlXMenuObject.prototype._updateLoaderIcon=function(a,c){if(this.idPull[a]!=null&&!(String(this.idPull[a].className).search("TopLevel_Item")>=0)){var b=this._rtl?0:2;if(this.idPull[a].childNodes[b]&&this.idPull[a].childNodes[b].childNodes[0]){var d=this.idPull[a].childNodes[b].childNodes[0];if(String(d.className).search("complex_arrow")===0)d.className="complex_arrow"+(c?"_loading":"")}}};dhtmlXMenuObject.prototype.getItemImage=function(a){var c=[null,null],a=this.idPrefix+a;if(this.itemPull[a].type=="item")c[0]=this.itemPull[a].imgen,c[1]=this.itemPull[a].imgdis;return c};dhtmlXMenuObject.prototype.setItemImage=function(a,c,b){if(this.itemPull[this.idPrefix+a].type=="item")this.itemPull[this.idPrefix+a].imgen=c,this.itemPull[this.idPrefix+a].imgdis=b,this._updateItemImage(a,this._getItemLevelType(a))};dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,"","")};dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.contextAutoShow=a==!0?!0:!1};dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.contextAutoHide=a==!0?!0:!1};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.contextHideAllMode=a==!0?!0:!1};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.contextHideAllMode};dhtmlXMenuObject.prototype.setVisibleArea=function(a,c,b,d){this._isVisibleArea=!0;this.menuX1=a;this.menuX2=c;this.menuY1=b;this.menuY2=d};dhtmlXMenuObject.prototype.setTooltip=function(a,c){a=this.idPrefix+a;if(this.itemPull[a]!=null&&this.idPull[a]!=null)this.idPull[a].title=c.length>0?c:null,this.itemPull[a].tip=c};dhtmlXMenuObject.prototype.getTooltip=function(a){return this.itemPull[this.idPrefix+a]==null?null:this.itemPull[this.idPrefix+a].tip};dhtmlXMenuObject.prototype.setHotKey=function(a,c){a=this.idPrefix+a;if(this.itemPull[a]!=null&&this.idPull[a]!=null&&(this.itemPull[a].parent!=this.idPrefix+this.topId||this.context)&&!this.itemPull[a].complex){var b=this.itemPull[a].type;if(b=="item"||b=="checkbox"||b=="radio"){var d=null;try{if(this.idPull[a].childNodes[this._rtl?0:2].childNodes[0].className=="sub_item_hk")d=this.idPull[a].childNodes[this._rtl?0:2].childNodes[0]}catch(e){}if(c.length==0)this.itemPull[a].hotkey_backup=this.itemPull[a].hotkey,this.itemPull[a].hotkey="",d!=null&&d.parentNode.removeChild(d);else{this.itemPull[a].hotkey=c;this.itemPull[a].hotkey_backup=null;if(d==null){d=document.createElement("DIV");d.className="sub_item_hk";for(var f=this.idPull[a].childNodes[this._rtl?0:2];f.childNodes.length>0;)f.removeChild(f.childNodes[0]);f.appendChild(d)}d.innerHTML=c}}}};dhtmlXMenuObject.prototype.getHotKey=function(a){return this.itemPull[this.idPrefix+a]==null?null:this.itemPull[this.idPrefix+a].hotkey};dhtmlXMenuObject.prototype.setItemSelected=function(a){if(this.itemPull[this.idPrefix+a]==null)return null};dhtmlXMenuObject.prototype.setTopText=function(a){if(!this.context){if(this._topText==null)this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":this._align=="left"?"right":"left"),this.base.appendChild(this._topText);this._topText.innerHTML=a}};dhtmlXMenuObject.prototype.setAlign=function(a){if(this._align!=a&&(a=="left"||a=="right")){this._align=a;if(this.cont)this.cont.className=this._align=="right"?"align_right":"align_left";if(this._topText!=null)this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._align=="left"?"right":"left")}};dhtmlXMenuObject.prototype.setHref=function(a,c,b){if(this.itemPull[this.idPrefix+a]!=null)this.itemPull[this.idPrefix+a].href_link=c,b!=null&&(this.itemPull[this.idPrefix+a].href_target=b)};dhtmlXMenuObject.prototype.clearHref=function(a){this.itemPull[this.idPrefix+a]!=null&&(delete this.itemPull[this.idPrefix+a].href_link,delete this.itemPull[this.idPrefix+a].href_target)};dhtmlXMenuObject.prototype.getCircuit=function(a){for(var c=Array(a);this.getParentId(a)!=this.topId;)a=this.getParentId(a),c[c.length]=a;return c.reverse()};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){for(var c=this._getSubItemToDeselectByPolygon(a),b=0;b<this._openedPolygons.length;b++)this._openedPolygons[b]!=a&&this._hidePolygon(this._openedPolygons[b]);for(b=0;b<c.length;b++)if(this.idPull[c[b]]!=null&&this.itemPull[c[b]].state=="enabled")this.idPull[c[b]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal"};dhtmlXMenuObject.prototype._checkArrowsState=function(a){var c=this.idPull["polygon_"+a],b=this.idPull["arrowup_"+a],d=this.idPull["arrowdown_"+a];b.className=c.scrollTop==0?"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp"+(b.over?"_Over":"");d.className=c.scrollTop+c.offsetHeight<c.scrollHeight?"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown"+(d.over?"_Over":""):"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown_Disabled"};dhtmlXMenuObject.prototype._addUpArrow=function(a){var c=this,b=document.createElement("DIV");b.pId=this.idPrefix+a;b.id="arrowup_"+this.idPrefix+a;b.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp";b.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";b.style.display="none";b.over=!1;b.onselectstart=function(a){a=a||event;return a.returnValue=!1};b.oncontextmenu=function(a){a=a||event;return a.returnValue=!1};b.onmouseover=function(){c.menuMode=="web"&&window.clearTimeout(c.menuTimeoutHandler);c._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className!="dhtmlxMenu_"+c.skin+"_SubLevelArea_ArrowUp_Disabled")this.className="dhtmlxMenu_"+c.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,c._canScrollUp=!0,c._doScrollUp(this.pId,!0)};b.onmouseout=function(){if(c.menuMode=="web")window.clearTimeout(c.menuTimeoutHandler),c.menuTimeoutHandler=window.setTimeout(function(){c._clearAndHide()},c.menuTimeoutMsec,"JavaScript");this.over=!1;c._canScrollUp=!1;if(this.className!="dhtmlxMenu_"+c.skin+"_SubLevelArea_ArrowUp_Disabled")this.className="dhtmlxMenu_"+c.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(c._scrollUpTM)};b.onclick=function(a){a=a||event;a.returnValue=!1;a.cancelBubble=!0;return!1};document.body.insertBefore(b,document.body.firstChild);this.idPull[b.id]=b};dhtmlXMenuObject.prototype._addDownArrow=function(a){var c=this,b=document.createElement("DIV");b.pId=this.idPrefix+a;b.id="arrowdown_"+this.idPrefix+a;b.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown";b.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";b.style.display="none";b.over=!1;b.onselectstart=function(a){a=a||event;return a.returnValue=!1};b.oncontextmenu=function(a){a=a||event;return a.returnValue=!1};b.onmouseover=function(){c.menuMode=="web"&&window.clearTimeout(c.menuTimeoutHandler);c._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className!="dhtmlxMenu_"+c.skin+"_SubLevelArea_ArrowDown_Disabled")this.className="dhtmlxMenu_"+c.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,c._canScrollDown=!0,c._doScrollDown(this.pId,!0)};b.onmouseout=function(){if(c.menuMode=="web")window.clearTimeout(c.menuTimeoutHandler),c.menuTimeoutHandler=window.setTimeout(function(){c._clearAndHide()},c.menuTimeoutMsec,"JavaScript");this.over=!1;c._canScrollDown=!1;if(this.className!="dhtmlxMenu_"+c.skin+"_SubLevelArea_ArrowDown_Disabled")this.className="dhtmlxMenu_"+c.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(c._scrollDownTM)};b.onclick=function(a){a=a||event;a.returnValue=!1;a.cancelBubble=!0;return!1};document.body.insertBefore(b,document.body.firstChild);this.idPull[b.id]=b};dhtmlXMenuObject.prototype._removeUpArrow=function(a){var c="arrowup_"+this.idPrefix+a;this._removeArrow(c)};dhtmlXMenuObject.prototype._removeDownArrow=function(a){var c="arrowdown_"+this.idPrefix+a;this._removeArrow(c)};dhtmlXMenuObject.prototype._removeArrow=function(a){var c=this.idPull[a];c.onselectstart=null;c.oncontextmenu=null;c.onmouseover=null;c.onmouseout=null;c.onclick=null;c.parentNode&&c.parentNode.removeChild(c);c=null;this.idPull[a]=null;try{delete this.idPull[a]}catch(b){}};dhtmlXMenuObject.prototype._isArrowExists=function(a){return this.idPull["arrowup_"+a]!=null&&this.idPull["arrowdown_"+a]!=null?!0:!1};dhtmlXMenuObject.prototype._doScrollUp=function(a,c){var b=this.idPull["polygon_"+a];if(this._canScrollUp&&b.scrollTop>0){var d=!1,e=b.scrollTop-this._scrollUpTMStep;e<0&&(d=!0,e=0);b.scrollTop=e;if(!d){var f=this;this._scrollUpTM=window.setTimeout(function(){f._doScrollUp(a,!1)},this._scrollUpTMTime)}}else this._canScrollUp=!1,this._checkArrowsState(a);c&&this._checkArrowsState(a)};dhtmlXMenuObject.prototype._doScrollDown=function(a,c){var b=this.idPull["polygon_"+a];if(this._canScrollDown&&b.scrollTop+b.offsetHeight<=b.scrollHeight){var d=!1,e=b.scrollTop+this._scrollDownTMStep;e+b.offsetHeight>b.scollHeight&&(d=!0,e=b.scollHeight-b.offsetHeight);b.scrollTop=e;if(!d){var f=this;this._scrollDownTM=window.setTimeout(function(){f._doScrollDown(a,!1)},this._scrollDownTMTime)}}else this._checkArrowsState(a);c&&this._checkArrowsState(a)};dhtmlXMenuObject.prototype._countPolygonItems=function(a){var c=0,b;for(b in this.itemPull){var d=this.itemPull[b].parent,e=this.itemPull[b].type;d==this.idPrefix+a&&(e=="item"||e=="radio"||e=="checkbox")&&c++}return c};dhtmlXMenuObject.prototype.setOverflowHeight=function(a){if(!(this.limit==0&&a<=0))if(this._clearAndHide(),this.limit>=0&&a>0)this.limit=a;else if(this.limit>0&&a<=0){for(var c in this.itemPull)if(this._isArrowExists(c)){var b=String(c).replace(this.idPrefix,"");this._removeUpArrow(b);this._removeDownArrow(b);this.idPull["polygon_"+c].style.height=""}this.limit=0}};dhtmlXMenuObject.prototype._getRadioImgObj=function(a){try{var c=this.idPull[this.idPrefix+a].childNodes[this._rtl?2:0].childNodes[0]}catch(b){c=null}return c};dhtmlXMenuObject.prototype._setRadioState=function(a,c){var b=this._getRadioImgObj(a);if(b!=null){var d=this.itemPull[this.idPrefix+a];d.checked=c;d.imgen="rdbt_"+(d.checked?"1":"0");d.imgdis=d.imgen;b.className="sub_icon "+d.imgen}};dhtmlXMenuObject.prototype._radioOnClickHandler=function(a,c,b){if(!(c.charAt(1)=="d"||this.itemPull[this.idPrefix+a].group==null)){var d=this.itemPull[this.idPrefix+a].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[d,this.getRadioChecked(d),a,this.contextMenuZoneId,b])&&this.setRadioChecked(d,a):this.setRadioChecked(d,a);this.checkEvent("onClick")&&this.callEvent("onClick",[a])}};dhtmlXMenuObject.prototype.getRadioChecked=function(a){for(var c=null,b=0;b<this.radio[a].length;b++){var d=this.radio[a][b].replace(this.idPrefix,""),e=this._getRadioImgObj(d);if(e!=null){var f=e.className.match(/rdbt_1$/gi);f!=null&&(c=d)}}return c};dhtmlXMenuObject.prototype.setRadioChecked=function(a,c){if(this.radio[a]!=null)for(var b=0;b<this.radio[a].length;b++){var d=this.radio[a][b].replace(this.idPrefix,"");this._setRadioState(d,d==c)}};dhtmlXMenuObject.prototype.addRadioButton=function(a,c,b,d,e,f,k,i){if(!(this.context&&c==this.topId)){if(this.itemPull[this.idPrefix+c]==null)return;if(a=="child"&&this.itemPull[this.idPrefix+c].type!="item")return}var h=this.idPrefix+(d!=null?d:this._genStr(24)),g="rdbt_"+(k?"1":"0"),j=g;if(a=="sibling"){var l=this.idPrefix+this.getParentId(c);this._addItemIntoGlobalStrorage(h,l,e,"radio",i,g,j);this._renderSublevelItem(h,this.getItemPosition(c))}else l=this.idPrefix+c,this._addItemIntoGlobalStrorage(h,l,e,"radio",i,g,j),this.idPull["polygon_"+l]==null&&this._renderSublevelPolygon(l,l),this._renderSublevelItem(h,b-1),this._redefineComplexState(l);var m=f!=null?f:this._genStr(24);this.itemPull[h].group=m;this.radio[m]==null&&(this.radio[m]=[]);this.radio[m][this.radio[m].length]=h;k==!0&&this.setRadioChecked(m,String(h).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype._getCheckboxState=function(a){return this.itemPull[this.idPrefix+a]==null?null:this.itemPull[this.idPrefix+a].checked};dhtmlXMenuObject.prototype._setCheckboxState=function(a,c){this.itemPull[this.idPrefix+a]!=null&&(this.itemPull[this.idPrefix+a].checked=c)};dhtmlXMenuObject.prototype._updateCheckboxImage=function(a){if(this.idPull[this.idPrefix+a]!=null){this.itemPull[this.idPrefix+a].imgen="chbx_"+(this._getCheckboxState(a)?"1":"0");this.itemPull[this.idPrefix+a].imgdis=this.itemPull[this.idPrefix+a].imgen;try{this.idPull[this.idPrefix+a].childNodes[this._rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+a].imgen}catch(c){}}};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(a,c,b){if(c.charAt(1)!="d"&&this.itemPull[this.idPrefix+a]!=null){var d=this._getCheckboxState(a);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[a,d,this.contextMenuZoneId,b])&&this.setCheckboxState(a,!d):this.setCheckboxState(a,!d);this.checkEvent("onClick")&&this.callEvent("onClick",[a,this.contextMenuZoneId])}};dhtmlXMenuObject.prototype.setCheckboxState=function(a,c){this._setCheckboxState(a,c);this._updateCheckboxImage(a)};dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a)};dhtmlXMenuObject.prototype.addCheckbox=function(a,c,b,d,e,f,k){if(!(this.context&&c==this.topId)){if(this.itemPull[this.idPrefix+c]==null)return;if(a=="child"&&this.itemPull[this.idPrefix+c].type!="item")return}var i="chbx_"+(f?"1":"0"),h=i;if(a=="sibling"){var g=this.idPrefix+(d!=null?d:this._genStr(24)),j=this.idPrefix+this.getParentId(c);this._addItemIntoGlobalStrorage(g,j,e,"checkbox",k,i,h);this.itemPull[g].checked=f;this._renderSublevelItem(g,this.getItemPosition(c))}else g=this.idPrefix+(d!=null?d:this._genStr(24)),j=this.idPrefix+c,this._addItemIntoGlobalStrorage(g,j,e,"checkbox",k,i,h),this.itemPull[g].checked=f,this.idPull["polygon_"+j]==null&&this._renderSublevelPolygon(j,j),this._renderSublevelItem(g,b-1),this._redefineComplexState(j)};dhtmlXMenuObject.prototype._readLevel=function(a){var c="",b;for(b in this.itemPull)if(this.itemPull[b].parent==a){var d="",e="",f="",k=String(this.itemPull[b].id).replace(this.idPrefix,""),i="",h=this.itemPull[b].title!=""?' text="'+this.itemPull[b].title+'"':"",g="";this.itemPull[b].type=="item"&&(this.itemPull[b].imgen!=""&&(d=' img="'+this.itemPull[b].imgen+'"'),this.itemPull[b].imgdis!=""&&(e=' imgdis="'+this.itemPull[b].imgdis+'"'),this.itemPull[b].hotkey!=""&&(f="<hotkey>"+this.itemPull[b].hotkey+"</hotkey>"));this.itemPull[b].type=="separator"?i=' type="separator"':this.itemPull[b].state=="disabled"&&(g=' enabled="false"');this.itemPull[b].type=="checkbox"&&(i=' type="checkbox"'+(this.itemPull[b].checked?' checked="true"':""));this.itemPull[b].type=="radio"&&(i=' type="radio" group="'+this.itemPull[b].group+'" '+(this.itemPull[b].checked?' checked="true"':""));c+="<item id='"+k+"'"+h+i+d+e+g+">";c+=f;this.itemPull[b].complex&&(c+=this._readLevel(b));c+="</item>"}return c};dhtmlXMenuObject.prototype.serialize=function(){var a="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return a};(function(){var translators={};translators["speeddial2"]=function(data){var homeGroupId=9999999;if(!data.settings||!data.dials||!data.groups){return null}if(typeof data.dials["0"].idgroup=="undefined"){return null}var res={db:{dials:[],groups:[],deny:[]},prefs:{}};if(data.settings["options.background"]&&/https?:\/\//i.test(data.settings["options.background"])){res.prefs["sd.background_url_type"]="fill";res.prefs["sd.background_url"]=data.settings["options.background"];res.prefs["sd.background_source"]="url"}var k;res.db.groups.push({id:homeGroupId,name:"Home",position:1});for(k in data.groups){var group=data.groups[k];res.db.groups.push({id:group.id,name:group.title,position:group.position})}for(k in data.dials){var dial=data.dials[k];var thSourceType="url";if(!dial.thumbnail){thSourceType="screen"}res.db.dials.push({title:dial.title,auto_title:null,url:dial.url,thumb_url:dial.thumbnail,thumb_source_type:thSourceType,get_screen_method:"custom",clicks:dial.visits,position:dial.position,group_id:parseInt(dial.idgroup,10)===0?homeGroupId:dial.idgroup})}return res};fvdSpeedDial.importTranslate={translate:function(data){var res=null;

for(var k in translators){try{res=translators[k](data);if(res){return res}}catch(ex){console.error(ex)}}return res}}})();window.addEventListener("load",function(){var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-38382010-1"]);_gaq.push(["_trackPageview"]);(function(){var ga=document.createElement("script");ga.type="text/javascript";ga.async=true;ga.src="https://ssl.google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)})()},false);!function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)}(function(d){"use strict";function e(a,b,c,e){this.id=c,this.target=a,this.tooltip=F,this.elements={target:a},this._id=S+"-"+c,this.timers={img:{}},this.options=b,this.plugins={},this.cache={event:{},target:d(),disabled:E,attr:e,onTooltip:E,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=E}function f(a){return a===F||"object"!==d.type(a)}function g(a){return!(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then))}function h(a){var b,c,e,h;return f(a)?E:(f(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&(b=a.content,f(b)||b.jquery||b.done?b=a.content={text:c=g(b)?E:b}:c=b.text,"ajax"in b&&(e=b.ajax,h=e&&e.once!==E,delete b.ajax,b.text=function(a,b){var f=c||d(this).attr(b.options.content.attr)||"Loading...",g=d.ajax(d.extend({},e,{context:b})).then(e.success,F,e.error).then(function(a){return a&&h&&b.set("content.text",a),a},function(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d)});return h?f:(b.set("content.text",f),g)}),"title"in b&&(d.isPlainObject(b.title)&&(b.button=b.title.button,b.title=b.title.text),g(b.title||E)&&(b.title=E))),"position"in a&&f(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&f(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===D?{ready:D}:{event:a.show}),"hide"in a&&f(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in a&&f(a.style)&&(a.style={classes:a.style}),d.each(R,function(){this.sanitize&&this.sanitize(a)}),a)}function i(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)d<f.length&&(c=e);return[c||a,f.pop()]}function j(a,b){var c,d,e;for(c in this.checks)for(d in this.checks[c])(e=new RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b))}function k(a){return V.concat("").join(a?"-"+a+" ":" ")}function l(a,b){return b>0?setTimeout(d.proxy(a,this),b):void a.call(this)}function m(a){this.tooltip.hasClass(ab)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=l.call(this,function(){this.toggle(D,a)},this.options.show.delay))}function n(a){if(!this.tooltip.hasClass(ab)&&!this.destroyed){var b=d(a.relatedTarget),c=b.closest(W)[0]===this.tooltip[0],e=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation()}catch(f){}else this.timers.hide=l.call(this,function(){this.toggle(E,a)},this.options.hide.delay,this)}}function o(a){!this.tooltip.hasClass(ab)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=l.call(this,function(){this.hide(a)},this.options.hide.inactive))}function p(a){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(a)}function q(a,c,e){d(b.body).delegate(a,(c.split?c:c.join("."+S+" "))+"."+S,function(){var a=y.api[d.attr(this,U)];a&&!a.disabled&&e.apply(a,arguments)})}function r(a,c,f){var g,i,j,k,l,m=d(b.body),n=a[0]===b?m:a,o=a.metadata?a.metadata(f.metadata):F,p="html5"===f.metadata.type&&o?o[f.metadata.name]:F,q=a.data(f.metadata.name||"qtipopts");try{q="string"==typeof q?d.parseJSON(q):q}catch(r){}if(k=d.extend(D,{},y.defaults,f,"object"==typeof q?h(q):F,h(p||o)),i=k.position,k.id=c,"boolean"==typeof k.content.text){if(j=a.attr(k.content.attr),k.content.attr===E||!j)return E;k.content.text=j}if(i.container.length||(i.container=m),i.target===E&&(i.target=n),k.show.target===E&&(k.show.target=n),k.show.solo===D&&(k.show.solo=i.container.closest("body")),k.hide.target===E&&(k.hide.target=n),k.position.viewport===D&&(k.position.viewport=i.container),i.container=i.container.eq(0),i.at=new A(i.at,D),i.my=new A(i.my),a.data(S))if(k.overwrite)a.qtip("destroy",!0);else if(k.overwrite===E)return E;return a.attr(T,c),k.suppress&&(l=a.attr("title"))&&a.removeAttr("title").attr(cb,l).attr("title",""),g=new e(a,k,c,!!j),a.data(S,g),g}function s(a){return a.charAt(0).toUpperCase()+a.slice(1)}function t(a,b){var d,e,f=b.charAt(0).toUpperCase()+b.slice(1),g=(b+" "+rb.join(f+" ")+f).split(" "),h=0;if(qb[b])return a.css(qb[b]);for(;d=g[h++];)if((e=a.css(d))!==c)return qb[b]=d,e}function u(a,b){return Math.ceil(parseFloat(t(a,b)))}function v(a,b){this._ns="tip",this.options=b,this.offset=b.offset,this.size=[b.width,b.height],this.init(this.qtip=a)}function w(a,b){this.options=b,this._ns="-modal",this.init(this.qtip=a)}function x(a){this._ns="ie6",this.init(this.qtip=a)}var y,z,A,B,C,D=!0,E=!1,F=null,G="x",H="y",I="width",J="height",K="top",L="left",M="bottom",N="right",O="center",P="flipinvert",Q="shift",R={},S="qtip",T="data-hasqtip",U="data-qtip-id",V=["ui-widget","ui-tooltip"],W="."+S,X="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Y=S+"-fixed",Z=S+"-default",$=S+"-focus",_=S+"-hover",ab=S+"-disabled",bb="_replacedByqTip",cb="oldtitle",db={ie:function(){for(var a=4,c=b.createElement("div");(c.innerHTML="<!--[if gt IE "+a+"]><i></i><![endif]-->")&&c.getElementsByTagName("i")[0];a+=1);return a>4?a:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||E};z=e.prototype,z._when=function(a){return d.when.apply(d,a)},z.render=function(a){if(this.rendered||this.destroyed)return this;var b,c=this,e=this.options,f=this.cache,g=this.elements,h=e.content.text,i=e.content.title,j=e.content.button,k=e.position,l=("."+this._id+" ",[]);return d.attr(this.target[0],"aria-describedby",this._id),f.posClass=this._createPosClass((this.position={my:k.my,at:k.at}).my),this.tooltip=g.tooltip=b=d("<div/>",{id:this._id,"class":[S,Z,e.style.classes,f.posClass].join(" "),width:e.style.width||"",height:e.style.height||"",tracking:"mouse"===k.target&&k.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":E,"aria-describedby":this._id+"-content","aria-hidden":D}).toggleClass(ab,this.disabled).attr(U,this.id).data(S,this).appendTo(k.container).append(g.content=d("<div />",{"class":S+"-content",id:this._id+"-content","aria-atomic":D})),this.rendered=-1,this.positioning=D,i&&(this._createTitle(),d.isFunction(i)||l.push(this._updateTitle(i,E))),j&&this._createButton(),d.isFunction(h)||l.push(this._updateContent(h,E)),this.rendered=D,this._setWidget(),d.each(R,function(a){var b;"render"===this.initialize&&(b=this(c))&&(c.plugins[a]=b)}),this._unassignEvents(),this._assignEvents(),this._when(l).then(function(){c._trigger("render"),c.positioning=E,c.hiddenDuringWait||!e.show.ready&&!a||c.toggle(D,f.event,E),c.hiddenDuringWait=E}),y.api[this.id]=this,this},z.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=D;var a,b=this.target,c=b.attr(cb);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),d.each(this.plugins,function(){this.destroy&&this.destroy()});for(a in this.timers)clearTimeout(this.timers[a]);b.removeData(S).removeAttr(U).removeAttr(T).removeAttr("aria-describedby"),this.options.suppress&&c&&b.attr("title",c).removeAttr(cb),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=F,delete y.api[this.id]}}return this.destroyed?this.target:(a===D&&"hide"!==this.triggering||!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target)},B=z.checks={builtin:{"^id$":function(a,b,c,e){var f=c===D?y.nextid:c,g=S+"-"+f;f!==E&&f.length>0&&!d("#"+g).length?(this._id=g,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,c){return c?(c&&!this.elements.title&&this._createTitle(),void this._updateTitle(c)):this._removeTitle()},"^content.button$":function(a,b,c){this._updateButton(c)},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(this.position[b]=a[b]=new A(c,"at"===b))},"^position.container$":function(a,b,c){this.rendered&&this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(D)||this.toggle(D))},"^style.classes$":function(a,b,c,d){this.rendered&&this.tooltip.removeClass(d).addClass(c)},"^style.(width|height)":function(a,b,c){this.rendered&&this.tooltip.css(b,c)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(a,b,c){this.rendered&&this.tooltip.toggleClass(Z,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){this.rendered&&this.tooltip[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},z.get=function(a){if(this.destroyed)return this;var b=i(this.options,a.toLowerCase()),c=b[0][b[1]];return c.precedance?c.string():c};var eb=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,fb=/^prerender|show\.ready/i;z.set=function(a,b){if(this.destroyed)return this;{var c,e=this.rendered,f=E,g=this.options;this.checks}return"string"==typeof a?(c=a,a={},a[c]=b):a=d.extend({},a),d.each(a,function(b,c){if(e&&fb.test(b))return void delete a[b];var h,j=i(g,b.toLowerCase());h=j[0][j[1]],j[0][j[1]]=c&&c.nodeType?d(c):c,f=eb.test(b)||f,a[b]=[j[0],j[1],c,h]}),h(g),this.positioning=D,d.each(a,d.proxy(j,this)),this.positioning=E,this.rendered&&this.tooltip[0].offsetWidth>0&&f&&this.reposition("mouse"===g.position.target?F:this.cache.event),this},z._update=function(a,b){var c=this,e=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,e.event,this)||""),d.isFunction(a.then)?(e.waiting=D,a.then(function(a){return e.waiting=E,c._update(a,b)},F,function(a){return c._update(a,b)})):a===E||!a&&""!==a?E:(a.jquery&&a.length>0?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){c.rendered&&c.tooltip[0].offsetWidth>0&&c.reposition(e.event,!a.length)}))):E},z._waitForContent=function(a){var b=this.cache;return b.waiting=D,(d.fn.imagesLoaded?a.imagesLoaded():d.Deferred().resolve([])).done(function(){b.waiting=E}).promise()},z._updateContent=function(a,b){this._update(a,this.elements.content,b)},z._updateTitle=function(a,b){this._update(a,this.elements.title,b)===E&&this._removeTitle(E)},z._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle(),a.titlebar=d("<div />",{"class":S+"-titlebar "+(this.options.style.widget?k("header"):"")}).append(a.title=d("<div />",{id:b,"class":S+"-title","aria-atomic":D})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)}),this.options.content.button&&this._createButton()},z._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=F,a!==E&&this.reposition())},z._createPosClass=function(a){return S+"-pos-"+(a||this.options.position.my).abbrev()},z.reposition=function(c,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=D;var f,g,h,i,j=this.cache,k=this.tooltip,l=this.options.position,m=l.target,n=l.my,o=l.at,p=l.viewport,q=l.container,r=l.adjust,s=r.method.split(" "),t=k.outerWidth(E),u=k.outerHeight(E),v=0,w=0,x=k.css("position"),y={left:0,top:0},z=k[0].offsetWidth>0,A=c&&"scroll"===c.type,B=d(a),C=q[0].ownerDocument,F=this.mouse;if(d.isArray(m)&&2===m.length)o={x:L,y:K},y={left:m[0],top:m[1]};else if("mouse"===m)o={x:L,y:K},(!r.mouse||this.options.hide.distance)&&j.origin&&j.origin.pageX?c=j.origin:!c||c&&("resize"===c.type||"scroll"===c.type)?c=j.event:F&&F.pageX&&(c=F),"static"!==x&&(y=q.offset()),C.body.offsetWidth!==(a.innerWidth||C.documentElement.clientWidth)&&(g=d(b.body).offset()),y={left:c.pageX-y.left+(g&&g.left||0),top:c.pageY-y.top+(g&&g.top||0)},r.mouse&&A&&F&&(y.left-=(F.scrollX||0)-B.scrollLeft(),y.top-=(F.scrollY||0)-B.scrollTop());else{if("event"===m?c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?j.target=d(c.target):c.target||(j.target=this.elements.target):"event"!==m&&(j.target=d(m.jquery?m:this.elements.target)),m=j.target,m=d(m).eq(0),0===m.length)return this;m[0]===b||m[0]===a?(v=db.iOS?a.innerWidth:m.width(),w=db.iOS?a.innerHeight:m.height(),m[0]===a&&(y={top:(p||m).scrollTop(),left:(p||m).scrollLeft()})):R.imagemap&&m.is("area")?f=R.imagemap(this,m,o,R.viewport?s:E):R.svg&&m&&m[0].ownerSVGElement?f=R.svg(this,m,o,R.viewport?s:E):(v=m.outerWidth(E),w=m.outerHeight(E),y=m.offset()),f&&(v=f.width,w=f.height,g=f.offset,y=f.position),y=this.reposition.offset(m,y,q),(db.iOS>3.1&&db.iOS<4.1||db.iOS>=4.3&&db.iOS<4.33||!db.iOS&&"fixed"===x)&&(y.left-=B.scrollLeft(),y.top-=B.scrollTop()),(!f||f&&f.adjustable!==E)&&(y.left+=o.x===N?v:o.x===O?v/2:0,y.top+=o.y===M?w:o.y===O?w/2:0)}return y.left+=r.x+(n.x===N?-t:n.x===O?-t/2:0),y.top+=r.y+(n.y===M?-u:n.y===O?-u/2:0),R.viewport?(h=y.adjusted=R.viewport(this,y,l,v,w,t,u),g&&h.left&&(y.left+=g.left),g&&h.top&&(y.top+=g.top),h.my&&(this.position.my=h.my)):y.adjusted={left:0,top:0},j.posClass!==(i=this._createPosClass(this.position.my))&&k.removeClass(j.posClass).addClass(j.posClass=i),this._trigger("move",[y,p.elem||p],c)?(delete y.adjusted,e===E||!z||isNaN(y.left)||isNaN(y.top)||"mouse"===m||!d.isFunction(l.effect)?k.css(y):d.isFunction(l.effect)&&(l.effect.call(k,this,d.extend({},y)),k.queue(function(a){d(this).css({opacity:"",height:""}),db.ie&&this.style.removeAttribute("filter"),a()})),this.positioning=E,this):this},z.reposition.offset=function(a,c,e){function f(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}if(!e[0])return c;var g,h,i,j,k=d(a[0].ownerDocument),l=!!db.ie&&"CSS1Compat"!==b.compatMode,m=e[0];do"static"!==(h=d.css(m,"position"))&&("fixed"===h?(i=m.getBoundingClientRect(),f(k,-1)):(i=d(m).position(),i.left+=parseFloat(d.css(m,"borderLeftWidth"))||0,i.top+=parseFloat(d.css(m,"borderTopWidth"))||0),c.left-=i.left+(parseFloat(d.css(m,"marginLeft"))||0),c.top-=i.top+(parseFloat(d.css(m,"marginTop"))||0),g||"hidden"===(j=d.css(m,"overflow"))||"visible"===j||(g=d(m)));while(m=m.offsetParent);return g&&(g[0]!==k[0]||l)&&f(g,1),c};var gb=(A=z.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,O).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?H:G}).prototype;gb.invert=function(a,b){this[a]=this[a]===L?N:this[a]===N?L:b||this[a]},gb.string=function(a){var b=this.x,c=this.y,d=b!==c?"center"===b||"center"!==c&&(this.precedance===H||this.forceY)?[c,b]:[b,c]:[b];return a!==!1?d.join(" "):d},gb.abbrev=function(){var a=this.string(!1);return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")},gb.clone=function(){return new A(this.string(),this.forceY)},z.toggle=function(a,c){var e=this.cache,f=this.options,g=this.tooltip;if(c){if(/over|enter/.test(c.type)&&e.event&&/out|leave/.test(e.event.type)&&f.show.target.add(c.target).length===f.show.target.length&&g.has(c.relatedTarget).length)return this;e.event=d.event.fix(c)}if(this.waiting&&!a&&(this.hiddenDuringWait=D),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var h,i,j,k=a?"show":"hide",l=this.options[k],m=(this.options[a?"hide":"show"],this.options.position),n=this.options.content,o=this.tooltip.css("width"),p=this.tooltip.is(":visible"),q=a||1===l.target.length,r=!c||l.target.length<2||e.target[0]===c.target;return(typeof a).search("boolean|number")&&(a=!p),h=!g.is(":animated")&&p===a&&r,i=h?F:!!this._trigger(k,[90]),this.destroyed?this:(i!==E&&a&&this.focus(c),!i||h?this:(d.attr(g[0],"aria-hidden",!a),a?(this.mouse&&(e.origin=d.event.fix(this.mouse)),d.isFunction(n.text)&&this._updateContent(n.text,E),d.isFunction(n.title)&&this._updateTitle(n.title,E),!C&&"mouse"===m.target&&m.adjust.mouse&&(d(b).bind("mousemove."+S,this._storeMouse),C=D),o||g.css("width",g.outerWidth(E)),this.reposition(c,arguments[2]),o||g.css("width",""),l.solo&&("string"==typeof l.solo?d(l.solo):d(W,l.solo)).not(g).not(l.target).qtip("hide",d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete e.origin,C&&!d(W+'[tracking="true"]:visible',l.solo).not(g).length&&(d(b).unbind("mousemove."+S),C=E),this.blur(c)),j=d.proxy(function(){a?(db.ie&&g[0].style.removeAttribute("filter"),g.css("overflow",""),"string"==typeof l.autofocus&&d(this.options.show.autofocus,g).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):g.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(a?"visible":"hidden")},this),l.effect===E||q===E?(g[k](),j()):d.isFunction(l.effect)?(g.stop(1,1),l.effect.call(g,this),g.queue("fx",function(a){j(),a()})):g.fadeTo(90,a?1:0,j),a&&l.target.trigger("qtip-"+this.id+"-inactive"),this))},z.show=function(a){return this.toggle(D,a)},z.hide=function(a){return this.toggle(E,a)},z.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(W),c=this.tooltip,e=parseInt(c[0].style.zIndex,10),f=y.zindex+b.length;return c.hasClass($)||this._trigger("focus",[f],a)&&(e!==f&&(b.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1)}),b.filter("."+$).qtip("blur",a)),c.addClass($)[0].style.zIndex=f),this},z.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass($),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)},z.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass(ab):this.disabled):"boolean"!=typeof a&&(a=D),this.rendered&&this.tooltip.toggleClass(ab,a).attr("aria-disabled",a),this.disabled=!!a,this)},z.enable=function(){return this.disable(E)},z._createButton=function(){var a=this,b=this.elements,c=b.tooltip,e=this.options.content.button,f="string"==typeof e,g=f?e:"Close tooltip";b.button&&b.button.remove(),b.button=e.jquery?e:d("<a />",{"class":"qtip-close "+(this.options.style.widget?"":S+"-icon"),title:g,"aria-label":g}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),b.button.appendTo(b.titlebar||c).attr("role","button").click(function(b){return c.hasClass(ab)||a.hide(b),E})},z._updateButton=function(a){if(!this.rendered)return E;var b=this.elements.button;a?this._createButton():b.remove()},z._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass(ab);c.removeClass(ab),ab=a?"ui-state-disabled":"qtip-disabled",c.toggleClass(ab,d),c.toggleClass("ui-helper-reset "+k(),a).toggleClass(Z,this.options.style.def&&!a),b.content&&b.content.toggleClass(k("content"),a),b.titlebar&&b.titlebar.toggleClass(k("header"),a),b.button&&b.button.toggleClass(S+"-icon",!a)},z._storeMouse=function(a){return(this.mouse=d.event.fix(a)).type="mousemove",this},z._bind=function(a,b,c,e,f){if(a&&c&&b.length){var g="."+this._id+(e?"-"+e:"");return d(a).bind((b.split?b:b.join(g+" "))+g,d.proxy(c,f||this)),this}},z._unbind=function(a,b){return a&&d(a).unbind("."+this._id+(b?"-"+b:"")),this},z._trigger=function(a,b,c){var e=d.Event("tooltip"+a);return e.originalEvent=c&&d.extend({},c)||this.cache.event||F,this.triggering=a,this.tooltip.trigger(e,[this].concat(b||[])),this.triggering=E,!e.isDefaultPrevented()},z._bindEvents=function(a,b,c,e,f,g){var h=c.filter(e).add(e.filter(c)),i=[];h.length&&(d.each(b,function(b,c){var e=d.inArray(c,a);e>-1&&i.push(a.splice(e,1)[0])}),i.length&&(this._bind(h,i,function(a){var b=this.rendered?this.tooltip[0].offsetWidth>0:!1;(b?g:f).call(this,a)}),c=c.not(h),e=e.not(h))),this._bind(c,a,f),this._bind(e,b,g)},z._assignInitialEvents=function(a){function b(a){return this.disabled||this.destroyed?E:(this.cache.event=a&&d.event.fix(a),this.cache.target=a&&d(a.target),clearTimeout(this.timers.show),void(this.timers.show=l.call(this,function(){this.render("object"==typeof a||c.show.ready)},c.prerender?0:c.show.delay)))}var c=this.options,e=c.show.target,f=c.hide.target,g=c.show.event?d.trim(""+c.show.event).split(" "):[],h=c.hide.event?d.trim(""+c.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(c.show.event)&&!/mouse(out|leave)/i.test(c.hide.event)&&h.push("mouseleave"),this._bind(e,"mousemove",function(a){this._storeMouse(a),this.cache.onTarget=D}),this._bindEvents(g,h,e,f,b,function(){return this.timers?void clearTimeout(this.timers.show):E}),(c.show.ready||c.prerender)&&b.call(this,a)},z._assignEvents=function(){var c=this,e=this.options,f=e.position,g=this.tooltip,h=e.show.target,i=e.hide.target,j=f.container,k=f.viewport,l=d(b),q=(d(b.body),d(a)),r=e.show.event?d.trim(""+e.show.event).split(" "):[],s=e.hide.event?d.trim(""+e.hide.event).split(" "):[];d.each(e.events,function(a,b){c._bind(g,"toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a],b,null,g)}),/mouse(out|leave)/i.test(e.hide.event)&&"window"===e.hide.leave&&this._bind(l,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a)}),e.hide.fixed?i=i.add(g.addClass(Y)):/mouse(over|enter)/i.test(e.show.event)&&this._bind(i,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+e.hide.event).indexOf("unfocus")>-1&&this._bind(j.closest("html"),["mousedown","touchstart"],function(a){var b=d(a.target),c=this.rendered&&!this.tooltip.hasClass(ab)&&this.tooltip[0].offsetWidth>0,e=b.parents(W).filter(this.tooltip[0]).length>0;b[0]===this.target[0]||b[0]===this.tooltip[0]||e||this.target.has(b[0]).length||!c||this.hide(a)}),"number"==typeof e.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",o,"inactive"),this._bind(i.add(g),y.inactiveEvents,o)),this._bindEvents(r,s,h,i,m,n),this._bind(h.add(g),"mousemove",function(a){if("number"==typeof e.hide.distance){var b=this.cache.origin||{},c=this.options.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&this.hide(a)}this._storeMouse(a)}),"mouse"===f.target&&f.adjust.mouse&&(e.hide.event&&this._bind(h,["mouseenter","mouseleave"],function(a){return this.cache?void(this.cache.onTarget="mouseenter"===a.type):E}),this._bind(l,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(ab)&&this.tooltip[0].offsetWidth>0&&this.reposition(a)})),(f.adjust.resize||k.length)&&this._bind(d.event.special.resize?k:q,"resize",p),f.adjust.scroll&&this._bind(q.add(f.container),"scroll",p)},z._unassignEvents=function(){var c=this.options,e=c.show.target,f=c.hide.target,g=d.grep([this.elements.target[0],this.rendered&&this.tooltip[0],c.position.container[0],c.position.viewport[0],c.position.container.closest("html")[0],a,b],function(a){return"object"==typeof a});e&&e.toArray&&(g=g.concat(e.toArray())),f&&f.toArray&&(g=g.concat(f.toArray())),this._unbind(g)._unbind(g,"destroy")._unbind(g,"inactive")},d(function(){q(W,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,c=d(a.currentTarget),e=d(a.relatedTarget||a.target),f=this.options;b?(this.focus(a),c.hasClass(Y)&&!c.hasClass(ab)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.position.adjust.mouse&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(a),c.toggleClass(_,b)}),q("["+U+"]",X,o)}),y=d.fn.qtip=function(a,b,e){var f=(""+a).toLowerCase(),g=F,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],S):F;return!arguments.length&&k||"api"===f?k:"string"==typeof a?(this.each(function(){var a=d.data(this,S);if(!a)return D;if(j&&j.timeStamp&&(a.cache.event=j),!b||"option"!==f&&"options"!==f)a[f]&&a[f].apply(a,i);else{if(e===c&&!d.isPlainObject(b))return g=a.get(b),E;a.set(b,e)}}),g!==F?g:this):"object"!=typeof a&&arguments.length?void 0:(k=h(d.extend(D,{},a)),this.each(function(a){var b,c;return c=d.isArray(k.id)?k.id[a]:k.id,c=!c||c===E||c.length<1||y.api[c]?y.nextid++:c,b=r(d(this),c,k),b===E?D:(y.api[c]=b,d.each(R,function(){"initialize"===this.initialize&&this(b)}),void b._assignInitialEvents(j))}))},d.qtip=e,y.api={},d.each({attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?d.attr(c,cb):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(cb,b))}return d.fn["attr"+bb].apply(this,arguments)},clone:function(a){var b=(d([]),d.fn["clone"+bb].apply(this,arguments));return a||b.filter("["+cb+"]").attr("title",function(){return d.attr(this,cb)}).removeAttr(cb),b}},function(a,b){if(!b||d.fn[a+bb])return D;var c=d.fn[a+bb]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}}),d.ui||(d["cleanData"+bb]=d.cleanData,d.cleanData=function(a){for(var b,c=0;(b=d(a[c])).length;c++)if(b.attr(T))try{b.triggerHandler("removeqtip")}catch(e){}d["cleanData"+bb].apply(this,arguments)}),y.version="2.2.1",y.nextid=0,y.inactiveEvents=X,y.zindex=15e3,y.defaults={prerender:E,id:E,overwrite:D,suppress:D,content:{text:D,attr:"title",title:E,button:E},position:{my:"top left",at:"bottom right",target:E,container:E,viewport:E,adjust:{x:0,y:0,mouse:D,scroll:D,resize:D,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:E})}},show:{target:E,event:"mouseenter",effect:D,delay:90,solo:E,ready:E,autofocus:E},hide:{target:E,event:"mouseleave",effect:D,delay:0,fixed:E,inactive:E,leave:"window",distance:E},style:{classes:"",widget:E,width:E,height:E,def:D},events:{render:F,move:F,show:F,hide:F,toggle:F,visible:F,hidden:F,focus:F,blur:F}};var hb,ib="margin",jb="border",kb="color",lb="background-color",mb="transparent",nb=" !important",ob=!!b.createElement("canvas").getContext,pb=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,qb={},rb=["Webkit","O","Moz","ms"];if(ob)var sb=a.devicePixelRatio||1,tb=function(){var a=b.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1}(),ub=sb/tb;else var vb=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'};d.extend(v.prototype,{init:function(a){var b,c;c=this.element=a.elements.tip=d("<div />",{"class":S+"-tip"}).prependTo(a.tooltip),ob?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1e5,b.save()):(b=vb("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",c).add(c),["click","mousedown"],function(a){a.stopPropagation()},this._ns)),a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&(a.y===K||a.y===O&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(D))},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===E||b===E?a=E:a===D?a=new A(b.string()):a.string||(a=new A(a),a.fixed=D),a},_parseWidth:function(a,b,c){var d=this.qtip.elements,e=jb+s(b)+"Width";return(c?u(c,e):u(d.content,e)||u(this._useTitle(a)&&d.titlebar||d.content,e)||u(d.tooltip,e))||0},_parseRadius:function(a){var b=this.qtip.elements,c=jb+s(a.y)+s(a.x)+"Radius";return db.ie<9?0:u(this._useTitle(a)&&b.titlebar||b.content,c)||u(b.tooltip,c)||0},_invalidColour:function(a,b,c){var d=a.css(b);return!d||c&&d===a.css(c)||pb.test(d)?E:d},_parseColours:function(a){var b=this.qtip.elements,c=this.element.css("cssText",""),e=jb+s(a[a.precedance])+s(kb),f=this._useTitle(a)&&b.titlebar||b.content,g=this._invalidColour,h=[];return h[0]=g(c,lb)||g(f,lb)||g(b.content,lb)||g(b.tooltip,lb)||c.css(lb),h[1]=g(c,e,kb)||g(f,e,kb)||g(b.content,e,kb)||g(b.tooltip,e,kb)||b.tooltip.css(e),d("*",c).add(c).css("cssText",lb+":"+mb+nb+";"+jb+":0"+nb+";"),h},_calculateSize:function(a){var b,c,d,e=a.precedance===H,f=this.options.width,g=this.options.height,h="c"===a.abbrev(),i=(e?f:g)*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[this.border/i*l,this.border/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(this.border,2)),m[3]=Math.sqrt(j(m[1],2)-j(this.border,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*f),k(c*g)],e?d:d.reverse()},_calculateTip:function(a,b,c){c=c||1,b=b||this.size;var d=b[0]*c,e=b[1]*c,f=Math.ceil(d/2),g=Math.ceil(e/2),h={br:[0,0,d,e,d,0],bl:[0,0,d,0,0,e],tr:[0,e,d,0,d,e],tl:[0,0,0,e,d,e],tc:[0,e,f,0,d,e],bc:[0,0,d,0,f,e],rc:[0,0,d,g,0,e],lc:[d,0,d,e,0,g]};return h.lt=h.br,h.rt=h.bl,h.lb=h.tr,h.rb=h.tl,h[a.abbrev()]},_drawCoords:function(a,b){a.beginPath(),a.moveTo(b[0],b[1]),a.lineTo(b[2],b[3]),a.lineTo(b[4],b[5]),a.closePath()},create:function(){var a=this.corner=(ob||db.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(b,c){if(!this.enabled)return this;var e,f,g,h,i,j,k,l,m=this.qtip.elements,n=this.element,o=n.children(),p=this.options,q=this.size,r=p.mimic,s=Math.round;b||(b=this.qtip.cache.corner||this.corner),r===E?r=b:(r=new A(r),r.precedance=b.precedance,"inherit"===r.x?r.x=b.x:"inherit"===r.y?r.y=b.y:r.x===r.y&&(r[b.precedance]=b[b.precedance])),f=r.precedance,b.precedance===G?this._swapDimensions():this._resetDimensions(),e=this.color=this._parseColours(b),e[1]!==mb?(l=this.border=this._parseWidth(b,b[b.precedance]),p.border&&1>l&&!pb.test(e[1])&&(e[0]=e[1]),this.border=l=p.border!==D?p.border:l):this.border=l=0,k=this.size=this._calculateSize(b),n.css({width:k[0],height:k[1],lineHeight:k[1]+"px"}),j=b.precedance===H?[s(r.x===L?l:r.x===N?k[0]-q[0]-l:(k[0]-q[0])/2),s(r.y===K?k[1]-q[1]:0)]:[s(r.x===L?k[0]-q[0]:0),s(r.y===K?l:r.y===M?k[1]-q[1]-l:(k[1]-q[1])/2)],ob?(g=o[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,6e3,6e3),h=this._calculateTip(r,q,ub),i=this._calculateTip(r,this.size,ub),o.attr(I,k[0]*ub).attr(J,k[1]*ub),o.css(I,k[0]).css(J,k[1]),this._drawCoords(g,i),g.fillStyle=e[1],g.fill(),g.translate(j[0]*ub,j[1]*ub),this._drawCoords(g,h),g.fillStyle=e[0],g.fill()):(h=this._calculateTip(r),h="m"+h[0]+","+h[1]+" l"+h[2]+","+h[3]+" "+h[4]+","+h[5]+" xe",j[2]=l&&/^(r|b)/i.test(b.string())?8===db.ie?2:1:0,o.css({coordsize:k[0]+l+" "+(k[1]+l),antialias:""+(r.string().indexOf(O)>-1),left:j[0]-j[2]*Number(f===G),top:j[1]-j[2]*Number(f===H),width:k[0]+l,height:k[1]+l}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k[0]+l+" "+(k[1]+l),
path:h,fillcolor:e[0],filled:!!a,stroked:!a}).toggle(!(!l&&!a)),!a&&b.html(vb("stroke",'weight="'+2*l+'px" color="'+e[1]+'" miterlimit="1000" joinstyle="miter"'))})),a.opera&&setTimeout(function(){m.tip.css({display:"inline-block",visibility:"visible"})},1),c!==E&&this.calculate(b,k)},calculate:function(a,b){if(!this.enabled)return E;var c,e,f=this,g=this.qtip.elements,h=this.element,i=this.options.offset,j=(g.tooltip.hasClass("ui-widget"),{});return a=a||this.corner,c=a.precedance,b=b||this._calculateSize(a),e=[a.x,a.y],c===G&&e.reverse(),d.each(e,function(d,e){var h,k,l;e===O?(h=c===H?L:K,j[h]="50%",j[ib+"-"+h]=-Math.round(b[c===H?0:1]/2)+i):(h=f._parseWidth(a,e,g.tooltip),k=f._parseWidth(a,e,g.content),l=f._parseRadius(a),j[e]=Math.max(-f.border,d?k:i+(l>h?l:-h)))}),j[a[c]]-=b[c===G?0:1],h.css({margin:"",top:"",bottom:"",left:"",right:""}).css(j),j},reposition:function(a,b,d){function e(a,b,c,d,e){a===Q&&j.precedance===b&&k[d]&&j[c]!==O?j.precedance=j.precedance===G?H:G:a!==Q&&k[d]&&(j[b]=j[b]===O?k[d]>0?d:e:j[b]===d?e:d)}function f(a,b,e){j[a]===O?p[ib+"-"+b]=o[a]=g[ib+"-"+b]-k[b]:(h=g[e]!==c?[k[b],-g[b]]:[-k[b],g[b]],(o[a]=Math.max(h[0],h[1]))>h[0]&&(d[b]-=k[b],o[b]=E),p[g[e]!==c?e:b]=o[a])}if(this.enabled){var g,h,i=b.cache,j=this.corner.clone(),k=d.adjusted,l=b.options.position.adjust.method.split(" "),m=l[0],n=l[1]||l[0],o={left:E,top:E,x:0,y:0},p={};this.corner.fixed!==D&&(e(m,G,H,L,N),e(n,H,G,K,M),(j.string()!==i.corner.string()||i.cornerTop!==k.top||i.cornerLeft!==k.left)&&this.update(j,E)),g=this.calculate(j),g.right!==c&&(g.left=-g.right),g.bottom!==c&&(g.top=-g.bottom),g.user=this.offset,(o.left=m===Q&&!!k.left)&&f(G,L,N),(o.top=n===Q&&!!k.top)&&f(H,K,M),this.element.css(p).toggle(!(o.x&&o.y||j.x===O&&o.y||j.y===O&&o.x)),d.left-=g.left.charAt?g.user:m!==Q||o.top||!o.left&&!o.top?g.left+this.border:0,d.top-=g.top.charAt?g.user:n!==Q||o.left||!o.left&&!o.top?g.top+this.border:0,i.cornerLeft=k.left,i.cornerTop=k.top,i.corner=j.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),hb=R.tip=function(a){return new v(a,a.options.style.tip)},hb.initialize="render",hb.sanitize=function(a){if(a.style&&"tip"in a.style){var b=a.style.tip;"object"!=typeof b&&(b=a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=D)}},B.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},d.extend(D,y.defaults,{style:{tip:{corner:D,mimic:E,width:6,height:6,border:D,offset:0}}});var wb,xb,yb="qtip-modal",zb="."+yb;xb=function(){function a(a){if(d.expr[":"].focusable)return d.expr[":"].focusable;var b,c,e,f=!isNaN(d.attr(a,"tabindex")),g=a.nodeName&&a.nodeName.toLowerCase();return"area"===g?(b=a.parentNode,c=b.name,a.href&&c&&"map"===b.nodeName.toLowerCase()?(e=d("img[usemap=#"+c+"]")[0],!!e&&e.is(":visible")):!1):/input|select|textarea|button|object/.test(g)?!a.disabled:"a"===g?a.href||f:f}function c(a){k.length<1&&a.length?a.not("body").blur():k.first().focus()}function e(a){if(i.is(":visible")){var b,e=d(a.target),h=f.tooltip,j=e.closest(W);b=j.length<1?E:parseInt(j[0].style.zIndex,10)>parseInt(h[0].style.zIndex,10),b||e.closest(W)[0]===h[0]||c(e),g=a.target===k[k.length-1]}}var f,g,h,i,j=this,k={};d.extend(j,{init:function(){return i=j.elem=d("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return E}}).hide(),d(b.body).bind("focusin"+zb,e),d(b).bind("keydown"+zb,function(a){f&&f.options.show.modal.escape&&27===a.keyCode&&f.hide(a)}),i.bind("click"+zb,function(a){f&&f.options.show.modal.blur&&f.hide(a)}),j},update:function(b){f=b,k=b.options.show.modal.stealfocus!==E?b.tooltip.find("*").filter(function(){return a(this)}):[]},toggle:function(a,e,g){var k=(d(b.body),a.tooltip),l=a.options.show.modal,m=l.effect,n=e?"show":"hide",o=i.is(":visible"),p=d(zb).filter(":visible:not(:animated)").not(k);return j.update(a),e&&l.stealfocus!==E&&c(d(":focus")),i.toggleClass("blurs",l.blur),e&&i.appendTo(b.body),i.is(":animated")&&o===e&&h!==E||!e&&p.length?j:(i.stop(D,E),d.isFunction(m)?m.call(i,e):m===E?i[n]():i.fadeTo(parseInt(g,10)||90,e?1:0,function(){e||i.hide()}),e||i.queue(function(a){i.css({left:"",top:""}),d(zb).length||i.detach(),a()}),h=e,f.destroyed&&(f=F),j)}}),j.init()},xb=new xb,d.extend(w.prototype,{init:function(a){var b=a.tooltip;return this.options.on?(a.elements.overlay=xb.elem,b.addClass(yb).css("z-index",y.modal_zindex+d(zb).length),a._bind(b,["tooltipshow","tooltiphide"],function(a,c,e){var f=a.originalEvent;if(a.target===b[0])if(f&&"tooltiphide"===a.type&&/mouse(leave|enter)/.test(f.type)&&d(f.relatedTarget).closest(xb.elem[0]).length)try{a.preventDefault()}catch(g){}else(!f||f&&"tooltipsolo"!==f.type)&&this.toggle(a,"tooltipshow"===a.type,e)},this._ns,this),a._bind(b,"tooltipfocus",function(a,c){if(!a.isDefaultPrevented()&&a.target===b[0]){var e=d(zb),f=y.modal_zindex+e.length,g=parseInt(b[0].style.zIndex,10);xb.elem[0].style.zIndex=f-1,e.each(function(){this.style.zIndex>g&&(this.style.zIndex-=1)}),e.filter("."+$).qtip("blur",a.originalEvent),b.addClass($)[0].style.zIndex=f,xb.update(c);try{a.preventDefault()}catch(h){}}},this._ns,this),void a._bind(b,"tooltiphide",function(a){a.target===b[0]&&d(zb).filter(":visible").not(b).last().qtip("focus",a)},this._ns,this)):this},toggle:function(a,b,c){return a&&a.isDefaultPrevented()?this:void xb.toggle(this.qtip,!!b,c)},destroy:function(){this.qtip.tooltip.removeClass(yb),this.qtip._unbind(this.qtip.tooltip,this._ns),xb.toggle(this.qtip,E),delete this.qtip.elements.overlay}}),wb=R.modal=function(a){return new w(a,a.options.show.modal)},wb.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:"undefined"==typeof a.show.modal.on&&(a.show.modal.on=D))},y.modal_zindex=y.zindex-200,wb.initialize="render",B.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},d.extend(D,y.defaults,{show:{modal:{on:E,effect:D,blur:D,stealfocus:D,escape:D}}}),R.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,j){var k=d[f],s=u[a],t=v[a],w=c===Q,x=s===f?j:s===g?-j:-j/2,y=t===f?i:t===g?-i:-i/2,z=q[f]+r[f]-(n?0:m[f]),A=z-k,B=k+j-(h===I?o:p)-z,C=x-(u.precedance===a||s===u[b]?y:0)-(t===O?i/2:0);return w?(C=(s===f?1:-1)*x,d[f]+=A>0?A:B>0?-B:0,d[f]=Math.max(-m[f]+r[f],k-C,Math.min(Math.max(-m[f]+r[f]+(h===I?o:p),k+C),d[f],"center"===s?k-x:1e9))):(e*=c===P?2:0,A>0&&(s!==f||B>0)?(d[f]-=C+e,l.invert(a,f)):B>0&&(s!==g||A>0)&&(d[f]-=(s===O?-C:C)+e,l.invert(a,g)),d[f]<q&&-d[f]>B&&(d[f]=k,l=u.clone())),d[f]-k}var k,l,m,n,o,p,q,r,s=e.target,t=c.elements.tooltip,u=e.my,v=e.at,w=e.adjust,x=w.method.split(" "),y=x[0],z=x[1]||x[0],A=e.viewport,B=e.container,C=(c.cache,{left:0,top:0});return A.jquery&&s[0]!==a&&s[0]!==b.body&&"none"!==w.method?(m=B.offset()||C,n="static"===B.css("position"),k="fixed"===t.css("position"),o=A[0]===a?A.width():A.outerWidth(E),p=A[0]===a?A.height():A.outerHeight(E),q={left:k?0:A.scrollLeft(),top:k?0:A.scrollTop()},r=A.offset()||C,("shift"!==y||"shift"!==z)&&(l=u.clone()),C={left:"none"!==y?j(G,H,y,w.x,L,N,I,f,h):0,top:"none"!==z?j(H,G,z,w.y,K,M,J,g,i):0,my:l}):C},R.polys={polygon:function(a,b){var c,d,e,f={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:E},g=0,h=[],i=1,j=1,k=0,l=0;for(g=a.length;g--;)c=[parseInt(a[--g],10),parseInt(a[g+1],10)],c[0]>f.position.right&&(f.position.right=c[0]),c[0]<f.position.left&&(f.position.left=c[0]),c[1]>f.position.bottom&&(f.position.bottom=c[1]),c[1]<f.position.top&&(f.position.top=c[1]),h.push(c);if(d=f.width=Math.abs(f.position.right-f.position.left),e=f.height=Math.abs(f.position.bottom-f.position.top),"c"===b.abbrev())f.position={left:f.position.left+f.width/2,top:f.position.top+f.height/2};else{for(;d>0&&e>0&&i>0&&j>0;)for(d=Math.floor(d/2),e=Math.floor(e/2),b.x===L?i=d:b.x===N?i=f.width-d:i+=Math.floor(d/2),b.y===K?j=e:b.y===M?j=f.height-e:j+=Math.floor(e/2),g=h.length;g--&&!(h.length<2);)k=h[g][0]-f.position.left,l=h[g][1]-f.position.top,(b.x===L&&k>=i||b.x===N&&i>=k||b.x===O&&(i>k||k>f.width-i)||b.y===K&&l>=j||b.y===M&&j>=l||b.y===O&&(j>l||l>f.height-j))&&h.splice(g,1);f.position={left:h[0][0],top:h[0][1]}}return f},rect:function(a,b,c,d){return{width:Math.abs(c-a),height:Math.abs(d-b),position:{left:Math.min(a,c),top:Math.min(b,d)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(a,b,c,d,e){var f=R.polys._angles[e.abbrev()],g=0===f?0:c*Math.cos(f*Math.PI),h=d*Math.sin(f*Math.PI);return{width:2*c-Math.abs(g),height:2*d-Math.abs(h),position:{left:a+g,top:b+h},adjustable:E}},circle:function(a,b,c,d){return R.polys.ellipse(a,b,c,c,d)}},R.svg=function(a,c,e){for(var f,g,h,i,j,k,l,m,n,o=(d(b),c[0]),p=d(o.ownerSVGElement),q=o.ownerDocument,r=(parseInt(c.css("stroke-width"),10)||0)/2;!o.getBBox;)o=o.parentNode;if(!o.getBBox||!o.parentNode)return E;switch(o.nodeName){case"ellipse":case"circle":m=R.polys.ellipse(o.cx.baseVal.value,o.cy.baseVal.value,(o.rx||o.r).baseVal.value+r,(o.ry||o.r).baseVal.value+r,e);break;case"line":case"polygon":case"polyline":for(l=o.points||[{x:o.x1.baseVal.value,y:o.y1.baseVal.value},{x:o.x2.baseVal.value,y:o.y2.baseVal.value}],m=[],k=-1,i=l.numberOfItems||l.length;++k<i;)j=l.getItem?l.getItem(k):l[k],m.push.apply(m,[j.x,j.y]);m=R.polys.polygon(m,e);break;default:m=o.getBBox(),m={width:m.width,height:m.height,position:{left:m.x,top:m.y}}}return n=m.position,p=p[0],p.createSVGPoint&&(g=o.getScreenCTM(),l=p.createSVGPoint(),l.x=n.left,l.y=n.top,h=l.matrixTransform(g),n.left=h.x,n.top=h.y),q!==b&&"mouse"!==a.position.target&&(f=d((q.defaultView||q.parentWindow).frameElement).offset(),f&&(n.left+=f.left,n.top+=f.top)),q=d(q),n.left+=q.scrollLeft(),n.top+=q.scrollTop(),m},R.imagemap=function(a,b,c){b.jquery||(b=d(b));var e,f,g,h,i,j=(b.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),k=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),l=d.trim(b.attr("coords")),m=l.replace(/,$/,"").split(",");if(!k.length)return E;if("polygon"===j)h=R.polys.polygon(m,c);else{if(!R.polys[j])return E;for(g=-1,i=m.length,f=[];++g<i;)f.push(parseInt(m[g],10));h=R.polys[j].apply(this,f.concat(c))}return e=k.offset(),e.left+=Math.ceil((k.outerWidth(E)-k.width())/2),e.top+=Math.ceil((k.outerHeight(E)-k.height())/2),h.position.left+=e.left,h.position.top+=e.top,h};var Ab,Bb='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';d.extend(x.prototype,{_scroll:function(){var b=this.qtip.elements.overlay;b&&(b[0].style.top=d(a).scrollTop()+"px")},init:function(c){var e=c.tooltip;d("select, object").length<1&&(this.bgiframe=c.elements.bgiframe=d(Bb).appendTo(e),c._bind(e,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=d("<div/>",{id:S+"-rcontainer"}).appendTo(b.body),c.elements.overlay&&c.elements.overlay.addClass("qtipmodal-ie6fix")&&(c._bind(a,["scroll","resize"],this._scroll,this._ns,this),c._bind(e,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var a,b,c=this.qtip.tooltip,d={height:c.outerHeight(E),width:c.outerWidth(E)},e=this.qtip.plugins.tip,f=this.qtip.elements.tip;b=parseInt(c.css("borderLeftWidth"),10)||0,b={left:-b,top:-b},e&&f&&(a="x"===e.corner.precedance?[I,L]:[J,K],b[a[1]]-=f[a[0]]()),this.bgiframe.css(b).css(d)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var a,b,c,d,e=this.qtip.tooltip,f=this.qtip.options.style,g=this.qtip.options.position.container;return this.qtip.drawing=1,f.height&&e.css(J,f.height),f.width?e.css(I,f.width):(e.css(I,"").appendTo(this.redrawContainer),b=e.width(),1>b%2&&(b+=1),c=e.css("maxWidth")||"",d=e.css("minWidth")||"",a=(c+d).indexOf("%")>-1?g.width()/100:0,c=(c.indexOf("%")>-1?a:1)*parseInt(c,10)||b,d=(d.indexOf("%")>-1?a:1)*parseInt(d,10)||0,b=c+d?Math.min(Math.max(b,d),c):b,e.css(I,Math.round(b)).appendTo(g)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([a,this.qtip.tooltip],this._ns)}}),Ab=R.ie6=function(a){return 6===db.ie?new x(a):E},Ab.initialize="render",B.ie6={"^content|style$":function(){this.redraw()}}})}(window,document);(function(){document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("blur",function(event){var target=event.target;if(target.matches("input[type=number][min]")){var min=parseInt(target.getAttribute("min"));var val=parseInt(target.value);if(val<min){target.value=min}}},true)},false)})();(function(){fvdSpeedDial.Donate={canShow:function(){if(localStorage["paypal-donate-state"]){return false}return true}}})();